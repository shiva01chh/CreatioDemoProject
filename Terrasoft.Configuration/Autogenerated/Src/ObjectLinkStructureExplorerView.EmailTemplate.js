define("ObjectLinkStructureExplorerView", ["ObjectLinkStructureExplorerViewResources", "StructureExplorerViewConfig"],
	function(resources) {

		/**
		 * @class Terrasoft.configuration.ObjectLinkStructureExplorerView
		 * Object link structure explorer view class.
		 */
		Ext.define("Terrasoft.configuration.ObjectLinkStructureExplorerView", {
			extend: "Terrasoft.StructureExplorerViewConfig",
			alternateClassName: "Terrasoft.ObjectLinkStructureExplorerView",

			//region Methods: Protected

			/**
			 * @inheritdoc Terrasoft.StructureExplorerViewConfig#generateMainView
			 * @overridden
			 */
			generateMainView: function() {
				let mainView = this.callParent(arguments);
				mainView.markerValue = "LinkToObjectStructureExplorer";
				let firstItemConfig = this.getContainerById(mainView, "firstItemConfig");
				firstItemConfig.items.unshift(this.getLinkObjectEditLabelConfig());
				let autoGeneratedMainContainer = this.getContainerById(mainView, "autoGeneratedMainContainer");
				autoGeneratedMainContainer.items.push(this.getLinkColumnEditConfig());
				return mainView;
			},

			/**
			 * Gets link object edit config.
			 * @protected
			 * @return {Object} Link object edit config.
			 */
			getLinkObjectEditLabelConfig: function() {
				const linkObjectEditLabel = {
					className: "Terrasoft.Label",
					caption: resources.localizableStrings.LinkObjectEditCaption,
					classes: {labelClass: ["object-link-label-caption", "link-object-edit-label"]}
				};
				return linkObjectEditLabel;
			},

			/**
			 * Gets link column edit config.
			 * @protected
			 * @return {Object} Link column edit config.
			 */
			getLinkColumnEditConfig: function() {
				let bottomPanelConfig = this.getContainerConfig("autoGeneratedLinkBottomContainer");
				let linkTextConfig = this.getContainerConfig("linkTextBottomContainer");
				let linkColorConfig = this.getContainerConfig("linkColorBottomContainer");
				linkTextConfig.classes = { wrapClassName: ["link-text-config"] };
				linkColorConfig.classes = { wrapClassName: ["link-color-config"] };
				linkTextConfig.items = [
					{
						className: "Terrasoft.Label",
						caption: resources.localizableStrings.LinkColumnEditCaption,
						classes: {labelClass: ["object-link-label-caption", "link-column-edit-label"]}
					},
					{
						className: "Terrasoft.ComboBoxEdit",
						enabled: {
							bindTo: "ComboBoxListEnabled"
						},
						id: "linkItemComboBox",
						selectors: {
							wrapEl: "#linkItemComboBox"
						},
						keydown: {
							bindTo: "onKeyDown"
						},
						isRequired: true,
						value: {
							bindTo: "EntitySchemaColumn"
						},
						list: {
							bindTo: "EntitySchemaColumnList"
						},
						prepareList: {
							bindTo: "getItems"
						},
						markerValue: "column-select"
					}
				];
				linkColorConfig.items = [
					{
						className: "Terrasoft.Label",
						caption: resources.localizableStrings.LinkColorButtonCaption,
						classes: {labelClass: ["object-link-label-caption", "link-edit-color-label"]}
					},
					{
						className: "Terrasoft.ColorButton",
						value: {
							bindTo: "LinkColor"
						},
						menuItemClassName: Terrasoft.MenuItemType.COLOR_PICKER,
						defaultValue: "#0000EE",
						markerValue: "link-color-button"
					}
				];
				bottomPanelConfig.items = [linkTextConfig, linkColorConfig];
				return bottomPanelConfig;
			},

			/**
			 * Gets view container config by identifier.
			 * @protected
			 * @param {String} id View container config identifier.
			 * @return {Object} View container config.
			 */
			getContainerById: function(view, id) {
				const container = Ext.Array.findBy(view.items, function(item) {
					return item.id === id;
				});
				return container;
			},

			/**
			 * @inheritdoc Terrasoft.StructureExplorerViewConfig#getHeaderCaption
			 * @overridden
			 */
			getHeaderCaption: function() {
				return resources.localizableStrings.HeaderCaption;
			},

			/**
			 * @inheritdoc Terrasoft.StructureExplorerViewConfig#getSaveButtonCaption
			 * @overridden
			 */
			getSaveButtonCaption: function() {
				return resources.localizableStrings.InsertButtonCaption;
			}

			//endregion

		});
		return Terrasoft.ObjectLinkStructureExplorerView;
	});
