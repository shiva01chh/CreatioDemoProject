"use strict";(self.webpackChunkapp_studio_enterprise_system_designer=self.webpackChunkapp_studio_enterprise_system_designer||[]).push([[697],{57697:(ge,U,o)=>{o.r(U),o.d(U,{BOUND_SCHEMA_DATA_MOCK:()=>pe,SCHEMA_DATA:()=>ue,SchemaDataDesignerModule:()=>y});var g=o(88692),_=o(20092),v=o(83331),Z=o(79510),T=o(15756),A=o(95236),k=o(74817),N=o(93254),I=o(97355),D=o(56707),E=o(26522),C=o(73715),x=o(23522),L=o(76170),O=o(55953),d=o(80542),P=o(28262),q=o(87683),m=o(36619),B=o(84945),r=o(75378),F=o(69403),V=o(6388),u=o(98168),e=o(64537),Q=o(85193),R=o(58143),J=o(41867);function K(s,a){s&1&&e._UZ(0,"ts-mask")}function Y(s,a){s&1&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),s&2&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"SchemaDataDesignerPage.BoundDataDetail.Blankslate")))}function H(s,a){s&1&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),s&2&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BaseTableDetail.BlankslateWithFilters")))}function $(s,a){if(s&1&&(e.TgZ(0,"div",11),e.YNc(1,Y,4,3,"ng-container",12),e.YNc(2,H,3,3,"ng-template",null,13,e.W1O),e.qZA()),s&2){const t=e.MAs(3),n=e.oxw();e.xp6(1),e.Q6J("ngIf",!n.searchKey)("ngIfElse",t)}}function z(s,a){if(s&1){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onDeleteSelected())}),e._UZ(1,"mat-icon",15),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()}if(s&2){const t=e.oxw();e.xp6(3),e.AsE("",e.lcZ(4,2,"WorkspaceExplorer.Section.Actions.Delete")," (",t.table.selected.length,")")}}const W=function(s){return{selectMode:s,sortColumn:"caption",headerSticky:!0}};class S extends d.POq{get searchKey(){return this._searchKey}set searchKey(a){var t;this._searchKey=a,this.tableDataSource.filter=(t=a?.trim())===null||t===void 0?void 0:t.toLowerCase()}constructor(a,t,n,i,l,c){super(),this._restHandler=a,this._entityTableDataSchemaBuilder=t,this._lookupDialogService=n,this._queryExecutor=i,this._snackBar=l,this._translateService=c,this._ignoredDataValueTypes=[r.DataValueType.Blob,r.DataValueType.Image],this._searchKey=""}_showNotification(a){this._snackBar.open(a,"",{duration:5e3})}_getDisplayedRecordIds(a){const t=a.getPrimaryColumn().name;return this.data.map(n=>n[t])}_getVisibleColumns(a,t){const n=t.map(i=>a.columns.find(l=>l.name===i.name)).filter(i=>!this._ignoredDataValueTypes.includes(i.dataValueType));return n.length===0&&n.push(a.getPrimaryColumn()),n}_initFilterPredicate(a){const n=a.filter(i=>{const l=i.dataValueType;return l===r.DataValueType.Lookup||m.wQM.Text.includes(l)}).map(i=>i.dataValueType===r.DataValueType.Lookup?l=>{var c;return(c=l[i.name])===null||c===void 0?void 0:c.displayValue}:i.name);this.tableDataSource.filterPredicate=(0,m.$V)(n)}_applyDetailStructure(a,t){const n=this._getVisibleColumns(a,t);this.dataSchema=this._entityTableDataSchemaBuilder.buildTableDataSchema(a,n.map(i=>i.name)),this._initFilterPredicate(n)}_loadEntityData(a,t,n){const i=this._buildEntityDataEsq(a,t,n);return this._restHandler.handleRequest(this._queryExecutor.executeSelectQuery(i)).pipe((0,u.b)(l=>{this.data=l,this.fireChangeEvent()}))}_showActualizationNotification(){const a=this._translateService.instant("SchemaDataDesignerPage.BoundDataDetail.ActualDataWasLoaded");this._showNotification(a)}_applyActualColumnsChange(a,t,n,i){this._applyDetailStructure(a,n);const l=this._getDisplayedRecordIds(a);!i&&l.length>0&&!(0,V.Z)(n,t??this.boundColumns)&&this._loadEntityData(a,n,l).subscribe(()=>this._showActualizationNotification())}_buildEntityDataEsq(a,t,n){const i=this._getVisibleColumns(a,t),l=new r.EntitySchemaQuery(a.name);i.forEach(he=>l.addSchemaColumn(he.name));const c=a.getPrimaryColumn().name;return l.filters.addSchemaColumnInFilterWithParameters(r.ComparisonType.Equal,c,n),l}_buildLookupDialogConfig(a,t){const n=this._getVisibleColumns(a,t).map(i=>i.name);return{entitySchema:a,displayedColumns:n,excludedIds:this._getDisplayedRecordIds(a)}}ngOnChanges(a){a.entitySchema&&(this.data=[]);const t=a.actualColumns;this.entitySchema&&t&&this._applyActualColumnsChange(this.entitySchema,t.previousValue,t.currentValue,Boolean(a.boundColumns))}addData(){const a=this.entitySchema,t=this.actualColumns;if(!a||!t)return;const n=this._buildLookupDialogConfig(a,t);this._lookupDialogService.openWithMultiselect(n).subscribe(i=>{if(!i.selectedIds)return;const l=this._getDisplayedRecordIds(a).concat(i.selectedIds);this._loadEntityData(a,t,l).subscribe()})}actualizeSchemaData(){if(!this.entitySchema||!this.actualColumns)return;const a=this._getDisplayedRecordIds(this.entitySchema);(a.length===0?(0,B.of)([]):this._loadEntityData(this.entitySchema,this.actualColumns,a)).subscribe(()=>this._showActualizationNotification())}}S.\u0275fac=function(a){return new(a||S)(e.Y36(m.MW0),e.Y36(d.vcc),e.Y36(d.FCr),e.Y36(F.oq),e.Y36(Q.pl),e.Y36(D.sK))},S.\u0275cmp=e.Xpm({type:S,selectors:[["ts-bound-schema-data-detail"]],inputs:{boundColumns:"boundColumns",actualColumns:"actualColumns",entitySchema:"entitySchema"},features:[e.qOj,e.TTD],decls:14,vars:13,consts:[[4,"ngIf"],[1,"detail-wrapper"],[1,"search-container"],[3,"value","valueChange"],[1,"detail-table-wrapper"],[3,"dataSource","dataSchema","config"],["class","detail-blank-slate",4,"ngIf"],[1,"detail-bottom-action"],["mat-button","",1,"default",3,"disabled","click"],["svgIcon","add-button"],["class","default mat-button mat-button-base","mat-button","",3,"click",4,"ngIf"],[1,"detail-blank-slate"],[4,"ngIf","ngIfElse"],["blankslateWithFilters",""],["mat-button","",1,"default","mat-button","mat-button-base",3,"click"],["svgIcon","trash"]],template:function(a,t){a&1&&(e.YNc(0,K,1,0,"ts-mask",0),e.TgZ(1,"div",1)(2,"div",2)(3,"ts-search-input",3),e.NdJ("valueChange",function(i){return t.searchKey=i}),e.qZA()(),e.TgZ(4,"div",4),e._UZ(5,"ts-table",5),e.YNc(6,$,4,2,"div",6),e.qZA(),e.TgZ(7,"div",7)(8,"button",8),e.NdJ("click",function(){return t.addData()}),e._UZ(9,"mat-icon",9),e.TgZ(10,"span"),e._uU(11),e.ALo(12,"translate"),e.qZA()(),e.YNc(13,z,5,4,"button",10),e.qZA()()),a&2&&(e.Q6J("ngIf",t.isLoading),e.xp6(3),e.Q6J("value",t.searchKey),e.xp6(2),e.Q6J("dataSource",t.tableDataSource)("dataSchema",t.dataSchema)("config",e.VKq(11,W,t.readonly?"none":"multi")),e.xp6(1),e.Q6J("ngIf",t.isEmpty()),e.xp6(2),e.Q6J("disabled",!t.entitySchema||t.readonly),e.xp6(3),e.Oqu(e.lcZ(12,9,"BaseTableDetail.Add")),e.xp6(2),e.Q6J("ngIf",t.isDeleteSelectedButtonVisible()))},dependencies:[g.O5,R.J,J.a,T.eB,v.Hw,D.X$],styles:[`ts-bound-schema-data-detail .detail-wrapper .detail-table-wrapper{width:100%}ts-bound-schema-data-detail .detail-wrapper .detail-table-wrapper table thead .mat-column-delete{width:36px}
`],encapsulation:2});var j=o(538),f=o(27969),M=o(11770);function G(s,a){s&1&&(e.TgZ(0,"div",8)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),s&2&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"SchemaDataDesignerPage.ColumnsDetail.Blankslate")))}function X(s,a){if(s&1){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onDeleteSelected())}),e._UZ(1,"mat-icon",10),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()}if(s&2){const t=e.oxw();e.xp6(3),e.AsE("",e.lcZ(4,2,"WorkspaceExplorer.Section.Actions.Delete")," (",t.table.selected.length,")")}}const ee=function(s){return{selectMode:s,sortColumn:"caption",headerSticky:!0}};class b extends d.POq{constructor(a,t,n){super(),this._structureExplorerService=a,this._translateService=t,this._dialogService=n,this._errorDeletePrimaryColumnMessage=this._translateService.instant("SchemaDataDesignerPage.ColumnsDetail.ErrorDeletePrimaryColumn"),this._readonlyDetailDataSchema={columns:[{name:"caption",caption:this._translateService.instant("SchemaDataDesignerPage.ColumnsDetail.Columns.Caption"),valueType:r.DataValueType.Text},{name:"name",caption:this._translateService.instant("SchemaDataDesignerPage.ColumnsDetail.Columns.Name"),valueType:r.DataValueType.Text},new d.bde({name:"isForceUpdate",caption:this._translateService.instant("SchemaDataDesignerPage.ColumnsDetail.Columns.ForcedUpdate"),disabled:()=>this.readonly,tooltip:this._translateService.instant("SchemaDataDesignerPage.ColumnsDetail.Tooltips.ForcedUpdate")}),new d.bde({name:"isKey",caption:this._translateService.instant("SchemaDataDesignerPage.ColumnsDetail.Columns.Key"),disabled:()=>this.readonly,tooltip:this._translateService.instant("SchemaDataDesignerPage.ColumnsDetail.Tooltips.Key")})]},this._editableDetailDataSchema={columns:this._readonlyDetailDataSchema.columns.concat({name:"delete",cellComponentClass:d.xox})}}_getColumnsFromStructureExplorer(){const t={providers:[{name:j.p.Providers.ENTITY_SCHEMA,options:{entitySchemaUId:this.entitySchema.uId,firstColumnsOnly:!0,displayId:!0,enableBlobDataValueType:!0,excludedItems:this.data.map(n=>n.uId)}}],enableMultiSelection:!0};return this._structureExplorerService.show(t).pipe((0,f.U)(n=>n&&n.map(i=>i.data)))}_mapEntitySchemaColumn(a,t){const n=this.data.find(i=>i.uId===t.uId);return n??{uId:t.uId,name:t.name,caption:t.caption,isForceUpdate:!1,isKey:t.uId===a.primaryColumnUId}}_initDataSchema(a){this.dataSchema=a?this._readonlyDetailDataSchema:this._editableDetailDataSchema,this.tableEventHandlers=a?{}:{delete:{click:t=>this.onDeleteRow(t)}}}_getPrimaryColumnIndex(a){const t=this.entitySchema.primaryColumnUId;return a.findIndex(n=>n.uId===t)}_setSchemaDataColumns(a){const t=a.map(n=>this._mapEntitySchemaColumn(this.entitySchema,n));this.data=this.data.concat(t),this.fireChangeEvent()}_initEntityDefaultColumns(a){if(!a){this.data=[],this.fireChangeEvent();return}this.data=a.columns.filter(t=>t.usageType===m.Qif.General||t.uId===a.primaryColumnUId).map(t=>this._mapEntitySchemaColumn(a,t)),this.fireChangeEvent()}_applyEntitySchemaChange(a,t){if(!a&&!t)return;const n=!a&&this.data.length===0,i=a&&t?.uId!==a.uId;(n||i)&&setTimeout(()=>this._initEntityDefaultColumns(t),0)}onReadonlySet(a){super.onReadonlySet(a),this._initDataSchema(a)}processRowsBeforeDelete(...a){r.ValidationUtilities.checkArgumentEmpty("entitySchema",this.entitySchema);const t=this._getPrimaryColumnIndex(a);return t!==-1&&(this._dialogService.openInfoDialog(M.Ld.Format(this._errorDeletePrimaryColumnMessage,a[t].name)),a.splice(t,1)),super.processRowsBeforeDelete(...a)}selectColumns(){r.ValidationUtilities.checkArgumentEmpty("entitySchema",this.entitySchema),this._getColumnsFromStructureExplorer().subscribe(a=>{!a||this._setSchemaDataColumns(a)})}ngOnChanges(a){const t=a.entitySchema;t&&this._applyEntitySchemaChange(t.previousValue,t.currentValue)}}b.\u0275fac=function(a){return new(a||b)(e.Y36(C.vR),e.Y36(D.sK),e.Y36(E.xA))},b.\u0275cmp=e.Xpm({type:b,selectors:[["ts-schema-data-columns-detail"]],inputs:{entitySchema:"entitySchema"},features:[e.qOj,e.TTD],decls:11,vars:12,consts:[[1,"detail-wrapper"],[1,"detail-table-wrapper"],[3,"dataSource","dataSchema","config","eventHandlers","cellValueChange"],["class","detail-blank-slate",4,"ngIf"],[1,"detail-bottom-action"],["mat-button","",1,"default",3,"disabled","click"],["svgIcon","add-button"],["class","default mat-button mat-button-base","mat-button","",3,"click",4,"ngIf"],[1,"detail-blank-slate"],["mat-button","",1,"default","mat-button","mat-button-base",3,"click"],["svgIcon","trash"]],template:function(a,t){a&1&&(e.TgZ(0,"div",0)(1,"div",1)(2,"ts-table",2),e.NdJ("cellValueChange",function(){return t.fireChangeEvent()}),e.qZA(),e.YNc(3,G,4,3,"div",3),e.qZA(),e.TgZ(4,"div",4)(5,"button",5),e.NdJ("click",function(){return t.selectColumns()}),e._UZ(6,"mat-icon",6),e.TgZ(7,"span"),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.YNc(10,X,5,4,"button",7),e.qZA()()),a&2&&(e.xp6(2),e.Q6J("dataSource",t.tableDataSource)("dataSchema",t.dataSchema)("config",e.VKq(10,ee,t.readonly?"none":"multi"))("eventHandlers",t.tableEventHandlers),e.xp6(1),e.Q6J("ngIf",!t.isLoading&&t.isEmpty()),e.xp6(2),e.Q6J("disabled",!t.entitySchema||t.readonly),e.xp6(3),e.Oqu(e.lcZ(9,8,"BaseTableDetail.Add")),e.xp6(2),e.Q6J("ngIf",t.isDeleteSelectedButtonVisible()))},dependencies:[g.O5,J.a,T.eB,v.Hw,D.X$],styles:[`ts-schema-data-columns-detail .detail-wrapper .detail-table-wrapper table thead .mat-column-name,ts-schema-data-columns-detail .detail-wrapper .detail-table-wrapper table thead .mat-column-caption{width:30%}ts-schema-data-columns-detail .detail-wrapper .detail-table-wrapper table thead .mat-column-delete{width:36px}
`],encapsulation:2});var ae=o(38023),te=o(84967),ne=o(15696),ie=o(95990),se=o(26903),oe=o(54882),le=o(95411),ce=o(65304);function re(s,a){if(s&1){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.actualizeSchemaData())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}s&2&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"SchemaDataDesignerPage.ActualizeData")," "))}function de(s,a){if(s&1&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),s&2){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t.name)}}class p extends P.jn{constructor(a,t,n,i,l,c){super(a),this._workspaceEntityApiService=n,this._restErrorHandler=i,this._entitySchemaService=l,this._entityDeserializer=c,this._entitySearchPattern$=new ae.x,this._apiDataService=t}get designerStructureService(){return null}get apiDataService(){return this._apiDataService}get modelType(){return x.O9}get filteredEntitySchemas$(){return this._filteredEntitySchemas$}get entitySchema(){return this._entitySchema}get entitySchemaByPackage(){return this._entitySchemaByPackage}_loadEntitySchema(a,t){return this._restErrorHandler.handleRequest(this._entitySchemaService.getEntitySchemaByUId(a,t)).pipe((0,f.U)(n=>n.entitySchema))}_initEntitySchema(a,t){this.showBodyMask();const n=this._loadEntitySchema(a,t).pipe((0,u.b)(c=>this._entitySchemaByPackage=c)),i=this._loadEntitySchema(a).pipe((0,u.b)(c=>this._entitySchema=c)),l=(0,te.D)([n,i]).pipe((0,u.b)(()=>this.hideBodyMask()));return l.subscribe(),l}_initAvailableEntitySchemas(a){if(!this.isNewMode||this._filteredEntitySchemas$)return(0,B.of)(null);const t=this._workspaceEntityApiService.getAvailableEntitySchemas(a).pipe((0,u.b)(()=>this._entitySearchPattern$.next("")),(0,f.U)(i=>i.items),(0,se.B)()),n=(0,m.$V)(["name"]);return this._filteredEntitySchemas$=(0,ne.a)([t,this._entitySearchPattern$]).pipe((0,f.U)(([i,l])=>i.filter(c=>n(c,l.toLowerCase())))),t.pipe((0,f.U)(()=>{}))}_loadBoundSchemaData(){return this.boundSchemaData?(0,B.of)(this.boundSchemaData):(this.showBodyMask(),this._restErrorHandler.handleRequest(this._apiDataService.getBoundSchemaData(this.model.uId)).pipe((0,u.b)(()=>this.hideBodyMask()),(0,f.U)(a=>{const t=a.items&&JSON.parse(a.items);return t?this._entityDeserializer.deserializeEntitySchemaRecords(this._entitySchema,t):[]}),(0,u.b)(a=>{this.boundSchemaData=a,this._boundSchemaDataSnap=a.slice()})))}_applyActualSchemaDataColumns(){var a;this.actualSchemaDataColumns=(a=this.model.columns)===null||a===void 0?void 0:a.slice()}_onBoundDataTabOpen(){this.isNewMode?this._applyActualSchemaDataColumns():this._loadBoundSchemaData().subscribe(()=>this._applyActualSchemaDataColumns())}_addBoundDataToModel(a){let t=null;if(this.boundSchemaData){const n=this._entitySchema.getPrimaryColumn().name;t=this.boundSchemaData.map(i=>i[n])}return a.boundRecordIds=t,a}getGtmSchemaName(){return"SchemaDataDesignerPage"}preProcessModelForSave(a){return a=super.preProcessModelForSave(a),this._addBoundDataToModel(a)}requestInitialPageData(){let a;return super.requestInitialPageData().pipe((0,u.b)(t=>a=t),(0,oe.z)(t=>this._initAvailableEntitySchemas(t.schema.package.uId)),(0,f.U)(()=>a))}onModelSet(a){var t,n;super.onModelSet(a),a.entitySchemaUId&&(!this._entitySchema||this._entitySchema.uId!==a.entitySchemaUId)&&this._initEntitySchema(a.entitySchemaUId,a.package.uId),this.boundSchemaDataColumns=(t=a.columns)===null||t===void 0?void 0:t.slice(),this.actualSchemaDataColumns=(n=a.columns)===null||n===void 0?void 0:n.slice()}loadModelFromSnap(){var a;super.loadModelFromSnap(),this.boundSchemaData=(a=this._boundSchemaDataSnap)===null||a===void 0?void 0:a.slice()}applySaveSuccessfulResponse(a,t){super.applySaveSuccessfulResponse(a,t),t&&t.errorInfo&&this.openInfoDialog(t.errorInfo.message)}isModelValid(){const a=this.model;return super.isModelValid()&&!M.Ld.isNullOrWhiteSpace(a.name)&&Boolean(a.entitySchemaUId)&&a.installType!==void 0&&Boolean(a.columns)&&a.columns.length!==0}searchEntitySchema(a){a||this.selectEntitySchema(null),this._entitySearchPattern$.next(a)}getEntitySchemaName(a){return a.name}selectEntitySchema(a){var t,n,i;if(a?.uId===this.model.entitySchemaUId)return;const l=(t=this.model)===null||t===void 0?void 0:t.entitySchemaName;this.model.entitySchemaName=(n=a?.name)!==null&&n!==void 0?n:"",this.model.entitySchemaUId=(i=a?.uId)!==null&&i!==void 0?i:null,a?.uId?this._initEntitySchema(a.uId,this.model.package.uId).pipe((0,ie.g)(0)).subscribe(()=>{this._applyActualSchemaDataColumns()}):this._entitySchema=null;const c=this.model.name;a?.name&&(!c||c===l)&&(this.model.name=a.name),this.setIsChanged(),this._entitySearchPattern$.next("")}onTabChanged(a){a.index===1&&this._entitySchema&&this._onBoundDataTabOpen()}onSchemaDataColumnsChanged(a){this.model.columns=a,this.setIsChanged(),this.isNewMode||this._loadBoundSchemaData().subscribe()}actualizeSchemaData(){this.isNewMode||this.isReadOnlyMode||(this.selectedTabIndex=1,this._loadBoundSchemaData().subscribe(()=>{this.boundSchemaDataDetailComponent.data=this.boundSchemaData,this.boundSchemaDataDetailComponent.actualizeSchemaData()}))}}p.\u0275fac=function(a){return new(a||p)(e.Y36(e.zs3),e.Y36(x.W5),e.Y36(O.W1),e.Y36(m.ZsW),e.Y36(m.t1w),e.Y36(m.DrN))},p.\u0275cmp=e.Xpm({type:p,selectors:[["ts-schema-data-designer-page"]],viewQuery:function(a,t){if(a&1&&e.Gf(S,5),a&2){let n;e.iGM(n=e.CRH())&&(t.boundSchemaDataDetailComponent=n.first)}},features:[e.qOj],decls:74,vars:75,consts:[[1,"base-page-wrap"],[3,"saveButtonVisible","saveButtonEnabled","saveClick","cancelClick","closeClick"],["class","action-button","mat-button","",3,"click",4,"ngIf"],[1,"page-content-wrapper","schema-designer-page"],[1,"schema-designer-structure-wrapper"],[1,"properties-pane","pane"],["floatLabel","always",1,"name-field"],["matInput","","type","text","required","",3,"ngModel","disabled","ngModelChange","keyup"],["matSuffix","","svgIcon","read-only"],["floatLabel","always",1,"entity-schema"],["type","text","matInput","","required","","spellcheck","false",3,"matAutocomplete","value","disabled","input"],["matSuffix","",1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["floatLabel","always",1,"install-type-field"],["mat-basic","","disableOptionCentering","","required","",3,"value","disabled","valueChange","selectionChange"],[1,"install-type-select-option",3,"value"],["floatLabel","always",1,"package-name-field"],["matInput","","type","text","required","",3,"ngModel","disabled","ngModelChange"],[1,"info-block-pane","pane"],[1,"info-block-title-wrapper"],["svgIcon","important-info",1,"info-block-title-icon"],[1,"info-block-title"],[1,"info-block-text"],[1,"schema-designer-page-main-content"],[1,"pane"],[1,"main-content"],["animationDuration","0ms","disableRipple","true",3,"selectedIndex","selectedTabChange","selectedIndexChange"],[3,"label"],[3,"entitySchema","data","isLoading","readonly","dataChange"],[3,"entitySchema","data","actualColumns","boundColumns","isLoading","readonly","dataChange"],["mat-button","",1,"action-button",3,"click"],[3,"value"]],template:function(a,t){if(a&1&&(e.TgZ(0,"div",0)(1,"ts-schema-designer-page-header",1),e.NdJ("saveClick",function(){return t.save()})("cancelClick",function(){return t.cancel()})("closeClick",function(){return t.close()}),e.YNc(2,re,3,3,"button",2),e.qZA(),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"mat-form-field",6)(7,"mat-label"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"input",7),e.NdJ("ngModelChange",function(i){return t.model.name=i})("keyup",function(){return t.setIsChanged()}),e.qZA(),e._UZ(11,"mat-icon",8),e.qZA(),e.TgZ(12,"mat-form-field",9)(13,"mat-label"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"input",10),e.NdJ("input",function(i){return t.searchEntitySchema(i.target.value)}),e.qZA(),e.TgZ(17,"div",11),e._UZ(18,"div",12),e.qZA(),e.TgZ(19,"mat-autocomplete",13,14),e.NdJ("optionSelected",function(i){return t.selectEntitySchema(i.option.value)}),e.YNc(21,de,2,2,"mat-option",15),e.ALo(22,"async"),e.qZA()(),e.TgZ(23,"mat-form-field",16)(24,"mat-label"),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"mat-select",17),e.NdJ("valueChange",function(i){return t.model.installType=i})("selectionChange",function(){return t.setIsChanged()}),e.TgZ(28,"mat-option",18),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"mat-option",18),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"mat-option",18),e._uU(35),e.ALo(36,"translate"),e.qZA()()(),e.TgZ(37,"mat-form-field",19)(38,"mat-label"),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"input",20),e.NdJ("ngModelChange",function(i){return t.model.package.name=i}),e.qZA(),e._UZ(42,"mat-icon",8),e.qZA()(),e.TgZ(43,"div",21)(44,"div",22),e._UZ(45,"mat-icon",23),e.TgZ(46,"span",24),e._uU(47),e.ALo(48,"translate"),e.qZA()(),e.TgZ(49,"span",25),e._uU(50),e.ALo(51,"translate"),e.qZA(),e.TgZ(52,"span",25),e._uU(53),e.ALo(54,"translate"),e.qZA(),e.TgZ(55,"span",25),e._uU(56),e.ALo(57,"translate"),e.qZA(),e.TgZ(58,"span",25),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.TgZ(61,"span",25),e._uU(62),e.ALo(63,"translate"),e.qZA()()(),e.TgZ(64,"div",26)(65,"div",27)(66,"div",28)(67,"mat-tab-group",29),e.NdJ("selectedTabChange",function(i){return t.onTabChanged(i)})("selectedIndexChange",function(i){return t.selectedTabIndex=i}),e.TgZ(68,"mat-tab",30),e.ALo(69,"translate"),e.TgZ(70,"ts-schema-data-columns-detail",31),e.NdJ("dataChange",function(i){return t.model.columns=i})("dataChange",function(i){return t.onSchemaDataColumnsChanged(i)}),e.qZA()(),e.TgZ(71,"mat-tab",30),e.ALo(72,"translate"),e.TgZ(73,"ts-bound-schema-data-detail",32),e.NdJ("dataChange",function(i){return t.boundSchemaData=i})("dataChange",function(){return t.setIsChanged()}),e.qZA()()()()()()()()),a&2){const n=e.MAs(20);e.xp6(1),e.Q6J("saveButtonVisible",t.saveButtonVisible())("saveButtonEnabled",t.saveButtonEnabled()),e.xp6(1),e.Q6J("ngIf",!t.isNewMode&&!t.isReadOnlyMode),e.xp6(6),e.Oqu(e.lcZ(9,43,"SchemaDataDesignerPage.Fields.Name")),e.xp6(2),e.Q6J("ngModel",t.model.name)("disabled",t.isReadOnlyMode||!t.model.entitySchemaName),e.xp6(4),e.Oqu(e.lcZ(15,45,"SchemaDataDesignerPage.Fields.Object")),e.xp6(2),e.Q6J("matAutocomplete",n)("value",t.model.entitySchemaName)("disabled",t.isReadOnlyMode||!t.isNewMode),e.xp6(3),e.Q6J("displayWith",t.getEntitySchemaName),e.xp6(2),e.Q6J("ngForOf",e.lcZ(22,47,t.filteredEntitySchemas$)),e.xp6(4),e.Oqu(e.lcZ(26,49,"SchemaDataDesignerPage.Fields.InstallType")),e.xp6(2),e.Q6J("value",t.model.installType)("disabled",t.isReadOnlyMode),e.xp6(1),e.Q6J("value",0),e.xp6(1),e.Oqu(e.lcZ(30,51,"SchemaDataDesignerPage.InstallType.Install")),e.xp6(2),e.Q6J("value",1),e.xp6(1),e.Oqu(e.lcZ(33,53,"SchemaDataDesignerPage.InstallType.FirstInstall")),e.xp6(2),e.Q6J("value",2),e.xp6(1),e.Oqu(e.lcZ(36,55,"SchemaDataDesignerPage.InstallType.Update")),e.xp6(4),e.Oqu(e.lcZ(40,57,"SchemaDataDesignerPage.Fields.Package")),e.xp6(2),e.Q6J("ngModel",t.model.package.name)("disabled",!0),e.xp6(6),e.Oqu(e.lcZ(48,59,"AdministratedObjectPage.InfoBlockTitle")),e.xp6(3),e.Oqu(e.lcZ(51,61,"SchemaDataDesignerPage.InfoBlockText1")),e.xp6(3),e.Oqu(e.lcZ(54,63,"SchemaDataDesignerPage.InfoBlockText2")),e.xp6(3),e.Oqu(e.lcZ(57,65,"SchemaDataDesignerPage.InfoBlockText3")),e.xp6(3),e.Oqu(e.lcZ(60,67,"SchemaDataDesignerPage.InfoBlockText4")),e.xp6(3),e.Oqu(e.lcZ(63,69,"SchemaDataDesignerPage.InfoBlockText5")),e.xp6(5),e.Q6J("selectedIndex",t.selectedTabIndex),e.xp6(1),e.s9C("label",e.lcZ(69,71,"SchemaDataDesignerPage.ColumnsSettingTabCaption")),e.xp6(2),e.Q6J("entitySchema",t.entitySchemaByPackage)("data",t.model.columns)("isLoading",t.isLoading)("readonly",t.isReadOnlyMode),e.xp6(1),e.s9C("label",e.lcZ(72,73,"SchemaDataDesignerPage.BoundDataTabCaption")),e.xp6(2),e.Q6J("entitySchema",t.entitySchema)("data",t.boundSchemaData)("actualColumns",t.actualSchemaDataColumns)("boundColumns",t.boundSchemaDataColumns)("isLoading",t.isLoading)("readonly",t.isReadOnlyMode)}},dependencies:[g.sg,g.O5,_.Fj,_.JJ,_.Q7,_.On,Z.VN,Z.QJ,le.CK,T.eB,A.v_,A.$V,A.nX,k.k0,v.Hw,N.x8,I.SK,I.R7,ce.a,b,S,g.Ov,D.X$],styles:[`ts-schema-data-designer-page .page-content-wrapper .schema-designer-structure-wrapper .pane{padding:21px 21px 6px}ts-schema-data-designer-page .page-content-wrapper .schema-designer-structure-wrapper .pane:not(:last-child){margin-bottom:6px}ts-schema-data-designer-page .page-content-wrapper .schema-designer-structure-wrapper .pane.properties-pane mat-form-field{width:100%}ts-schema-data-designer-page .page-content-wrapper .schema-designer-structure-wrapper .pane.info-block-pane{padding-bottom:25px}ts-schema-data-designer-page .page-content-wrapper .schema-designer-structure-wrapper .pane.info-block-pane .info-block-title-wrapper{display:flex;flex-direction:row;align-items:center}ts-schema-data-designer-page .page-content-wrapper .schema-designer-structure-wrapper .pane.info-block-pane .info-block-title-wrapper .info-block-title-icon{height:32px;width:32px}ts-schema-data-designer-page .page-content-wrapper .schema-designer-structure-wrapper .pane.info-block-pane .info-block-title-wrapper .info-block-title{color:#22ac14;font-size:19px;margin-left:12px}ts-schema-data-designer-page .page-content-wrapper .schema-designer-structure-wrapper .pane.info-block-pane .info-block-text{display:block;margin-top:14px}ts-schema-data-designer-page .page-content-wrapper .schema-designer-page-main-content .pane{height:100%}ts-schema-data-designer-page .page-content-wrapper .schema-designer-page-main-content .pane mat-tab-header{margin-bottom:20px}ts-schema-data-designer-page .page-content-wrapper .schema-designer-page-main-content .pane ts-schema-data-columns-detail .detail-wrapper .detail-table-wrapper{max-height:calc(100vh - 197px)!important}ts-schema-data-designer-page .page-content-wrapper .schema-designer-page-main-content .pane ts-schema-data-columns-detail .detail-wrapper .detail-bottom-action{position:initial}ts-schema-data-designer-page .page-content-wrapper .schema-designer-page-main-content .pane ts-bound-schema-data-detail .detail-wrapper .detail-table-wrapper{overflow-x:auto!important;max-height:calc(100vh - 230px)!important}ts-schema-data-designer-page .page-content-wrapper .schema-designer-page-main-content .pane ts-bound-schema-data-detail .detail-wrapper .detail-bottom-action{position:initial}
`],encapsulation:2});var w=o(7976);const me=[{path:"",component:p},{path:"new",component:p},{path:":uId",component:p}];class h{}h.\u0275fac=function(a){return new(a||h)},h.\u0275mod=e.oAB({type:h}),h.\u0275inj=e.cJS({imports:[w.Bz.forChild(me),w.Bz]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.kYT(h,{imports:[w.Bz],exports:[w.Bz]})}();class y{}y.\u0275fac=function(a){return new(a||y)},y.\u0275mod=e.oAB({type:y}),y.\u0275inj=e.cJS({providers:[d.Pnv,E.xA,C.Nq,C.vR,O.W1,{provide:P.ZS,useValue:{execute:()=>(0,B.of)({})}},{provide:C.$A,useClass:L.T,multi:!0},{provide:m.ZsW,useClass:q.vH},d.i3c,{provide:d.thQ,useValue:"SchemaDataDesignerModule"}],imports:[g.ez,d.kLW,E.Su,_.u5,Z.D8,T.yu,A.wp,k.x4,v.Ps,N.uw,I.Nn,h,P.Z_,C.Kq,D.aw,x.PD]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.kYT(y,{declarations:[p,b,S],imports:[g.ez,d.kLW,E.Su,_.u5,Z.D8,T.yu,A.wp,k.x4,v.Ps,N.uw,I.Nn,h,P.Z_,C.Kq,D.aw,x.PD]})}();const ue={entitySchemaName:"Contact",name:"ContactContact Contact ContactContact Contact",localizableStrings:null,uId:"64ac13c1-2078-448e-89c6-09fbec2b6998",description:null,package:{maintainer:null,createdBy:null,position:0,name:"Base",modifiedOn:null,uId:"5be3998b-c5c3-42bb-a01c-2e4149059a97",description:null,id:"00000000-0000-0000-0000-000000000000",createdOn:null,modifiedBy:null},body:null,installType:0,caption:null,columns:[{isKey:!0,isForceUpdate:!1,name:"Id",caption:"Identifier",uId:"ae0e45ca-c495-4fe7-a39d-3ab7278e1617",id:"00000000-0000-0000-0000-000000000000"},{isKey:!1,isForceUpdate:!1,name:"Name",caption:"Full name",uId:"a5cca792-47dd-428a-83fb-5c92bdd97ff8",id:"00000000-0000-0000-0000-000000000000"},{isKey:!1,isForceUpdate:!0,name:"Caption",caption:"Caption",uId:"9e53fd7c-dde4-4502-a64c-b9e34148108c",id:"00000000-0000-0000-0000-000000000000"},{isKey:!1,isForceUpdate:!0,name:"BirthDate",caption:"Birth date",uId:"3f08db69-6d2f-4b1c-87a4-acddc6c3b9d6",id:"00000000-0000-0000-0000-000000000000"},{isKey:!1,isForceUpdate:!0,name:"Address",caption:"Address",uId:"0fb61bc8-a195-4d90-aecc-18b411b51814",id:"00000000-0000-0000-0000-000000000000"},{isKey:!1,isForceUpdate:!1,name:"Account",caption:"Employee",uId:"5c6ca10e-1180-4c1e-8a50-55a72ff9bdd4",id:"00000000-0000-0000-0000-000000000000"}],id:"00000000-0000-0000-0000-000000000000",isReadOnly:!1,entitySchemaUId:"16be3651-8fe2-4159-8dd0-a803d4683dd3"},pe=[{Id:"4f8b2d67-71d0-45fb-897e-cd4a308a97c0",Name:"Home",Address:"Home address",Caption:"Home caption",Account:{value:(0,r.generateGuid)(),displayValue:"Account A"}},{Id:"760bf68c-4b6e-df11-b988-001d60e938c6",Name:"Shipping",Address:"Shipping address",Caption:"Shipping caption"},{Id:"770bf68c-4b6e-df11-b988-001d60e938c6",Name:"Legal",Address:"Legal address",Caption:"Legal caption",Account:{value:(0,r.generateGuid)(),displayValue:"Account B"}},{Id:"780bf68c-4b6e-df11-b988-001d60e938c6",Name:"Actual",Address:"Actual address",Caption:"Actual caption"},{Id:"fb7a3f6a-f36b-1410-6f81-1c6f65e50343",Name:"Business",Address:"Business address",Caption:"Business caption"},{Id:"ce157f11-f425-4811-ba0e-e3816e8eced5",Name:"Other",Address:"Other address",Caption:"Other caption",Account:{value:(0,r.generateGuid)(),displayValue:"Account C"}}]}}]);
