(self.webpackChunkapp_studio_enterprise_system_designer=self.webpackChunkapp_studio_enterprise_system_designer||[]).push([[464],{96386:(J,Re,l)=>{var g={"./facebook-logo.svg":96163,"./linkedin-logo.svg":11175,"./select-menu-logo.svg":56835};function c(x){var B=P(x);return l(B)}function P(x){if(!l.o(g,x)){var B=new Error("Cannot find module '"+x+"'");throw B.code="MODULE_NOT_FOUND",B}return g[x]}c.keys=function(){return Object.keys(g)},c.resolve=P,J.exports=c,c.id=96386},464:(J,Re,l)=>{"use strict";l.r(Re),l.d(Re,{SocialLeadgenModule:()=>be,generateSessionTokenResponseMock:()=>lt,getAccountMock:()=>Ct,getEntitiesResponseMock:()=>ht,getFacebookPagesResponseMock:()=>ze,getIntegrationListResponseMock:()=>je,getIntegrationResponseMock:()=>pt,getLinkedInFormFieldsMock:()=>dt,getLinkedInFormListMock:()=>mt,getLinkedInPredefinedFieldMock:()=>gt,getLinkedInTokensIntrospectionMock:()=>vt,getLinkedinAdAccountListResponseMock:()=>ut,leadEntitySchemaMock:()=>ft,leadgenLogsMock:()=>_t});var g=l(88692),c=l(20092),P=l(83331),x=l(15756),B=l(49460),f=l(95236),Pe=l(74817),Se=l(72990),Te=l(45772),W=l(93254),Fe=l(62549),Ee=l(97355),Je=l(55799),p=l(56707),I=l(26522),Be=l(73715),it=l(76170),$e=l(81753),b=l(80542),De=l(13239),ke=l(98168),G=l(33568),st=l(5557),e=l(64537);class Y{constructor(){this.dataValueStream=new st.t}setValue(t){this.dataValueStream.next(t)}}Y.\u0275fac=function(t){return new(t||Y)},Y.\u0275prov=e.Yz7({token:Y,factory:Y.\u0275fac});var rt=l(38023);class N{constructor(){this.changes=new rt.x}}N.\u0275fac=function(t){return new(t||N)},N.\u0275prov=e.Yz7({token:N,factory:N.\u0275fac});var C=l(36619),M=l(84945),u=l(27969),Ze=l(35732);class Q{constructor(t,n){this._httpClient=t,this.entitySchemaService=n,this._appInstallerServiceUrl="rest/SocialLeadGenService/",this._entitySchemasCache=[]}_castResponse(t,n){const a=t[n];return a.success=!0,a}getEntities(){return this._httpClient.post(this._appInstallerServiceUrl+"GetEntities",{}).pipe((0,u.U)(t=>this._castResponse(t,"GetEntitiesResult")))}getEntityByName(t){const n={request:{name:[t]}};return this._httpClient.post(this._appInstallerServiceUrl+"GetEntities",n).pipe((0,u.U)(a=>this._castResponse(a,"GetEntitiesResult")))}getEntityWithColumns(t){const n=this._entitySchemasCache.find(a=>a.uId===t);return n?(0,M.of)({entitySchema:n,success:!0}):this.entitySchemaService.getEntitySchemaByUId(t).pipe((0,u.U)(a=>(this._entitySchemasCache.find(i=>i.uId===a.entitySchema.uId)||this._entitySchemasCache.push(a.entitySchema),a)))}}Q.\u0275fac=function(t){return new(t||Q)(e.LFG(Ze.eN),e.LFG(C.t1w))},Q.\u0275prov=e.Yz7({token:Q,factory:Q.\u0275fac});var r=l(75378),Ne=l(69403),ct=l(44551);class ee{constructor(t,n,a,i,s){this.translateService=t,this.userInfo=n,this.numberFormatUtil=a,this.entityService=i,this.queryExecutor=s,this._translateBaseKey="SocialLeadgen.IntegrationPage.ColumnMapping"}_frameWithBrackets(t){return`[#${t}#]`}_getLookupValue(t,n,a){const i=new r.EntitySchemaQuery(n);return i.addSchemaColumn(a),i.filters.addSchemaColumnFilterWithParameter(r.ComparisonType.Equal,"Id",t),this.queryExecutor.executeSelectQuery(i)}_createLookupDispalyValue(t){if(!t.schemaName)throw new Error("SchemaName is required property");const n=this.translateService.instant(`${this._translateBaseKey}.DataTypes.Lookup`);return this.entityService.getEntityByName(t.schemaName).pipe((0,ct.b)(a=>{if(a.entities.length!==1)throw new Error(`Can't find schema with name '${t.schemaName}'`);const i=a.entities[0].primaryDisplayColumnName,s=a.entities[0].caption;return this._getLookupValue(t.value,t.schemaName,i).pipe((0,u.U)(d=>d.length===0?this.translateService.instant(`${this._translateBaseKey}.LookupValueUnknown`):{caption:s,displayValue:d[0][i]}))}),(0,u.U)(a=>`${n}.${a.caption}.${a.displayValue}`))}_createLinkedInDispalyValue(t){return`${this.translateService.instant(`${this._translateBaseKey}.LinkedIn`)}.${t.value}`}_createTextDispalyValue(t){return`${this.translateService.instant(`${this._translateBaseKey}.DataTypes.Text`)}.${t.value}`}_createMacroDispalyValue(t){return`${this.translateService.instant(`${this._translateBaseKey}.DataTypes.Macro`)}.${t.value}`}_createDateTimeDispalyValue(t){const n=this.translateService.instant(`${this._translateBaseKey}.DataTypes.DateTime`),a={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},s=(0,C.sGo)(t.value).toLocaleDateString(this.userInfo.cultureInfo.sysCultureName,a);return`${n}.${s}`}_createDateDispalyValue(t){const n=this.translateService.instant(`${this._translateBaseKey}.DataTypes.Date`),a={year:"numeric",month:"numeric",day:"numeric"},s=(0,C.sGo)(t.value).toLocaleDateString(this.userInfo.cultureInfo.sysCultureName,a);return`${n}.${s}`}_createTimeDispalyValue(t){const n=this.translateService.instant(`${this._translateBaseKey}.DataTypes.Time`),a={hour:"numeric",minute:"numeric",second:"numeric"},s=(0,C.sGo)(t.value).toLocaleTimeString(this.userInfo.cultureInfo.sysCultureName,a);return`${n}.${s}`}_createBooleanDispalyValue(t){const n=this.translateService.instant(`${this._translateBaseKey}.DataTypes.Boolean`);let a="";switch(t.value.toLocaleLowerCase()){case"true":{a=this.translateService.instant(`${this._translateBaseKey}.BooleanValue.True`);break}case"false":{a=this.translateService.instant(`${this._translateBaseKey}.BooleanValue.False`);break}default:throw new Error("Unrecognized boolean value")}return`${n}.${a}`}_createNumberDispalyValue(t){const n=this.translateService.instant(`${this._translateBaseKey}.DataTypes.Number`),a=this.numberFormatUtil.parseStringToNumber(t.value,10),i=new C.I$D({precision:10}),s=this.numberFormatUtil.formatNumberValue(a,i);return`${n}.${s}`}buildDisplayValue(t){let n;if(t.value===""||t.value===null)n=(0,M.of)("");else switch(t.type){case"lookup":n=this._createLookupDispalyValue(t);break;case"linkedin_consent":case"linkedin_customquestion":case"linkedin_hiddenfield":case"linkedin_predefinedfield":n=(0,M.of)(this._createLinkedInDispalyValue(t));break;case"text":n=(0,M.of)(this._createTextDispalyValue(t));break;case"boolean":n=(0,M.of)(this._createBooleanDispalyValue(t));break;case"double":n=(0,M.of)(this._createNumberDispalyValue(t));break;case"macro":n=(0,M.of)(this._createMacroDispalyValue(t));break;case"datetime":n=(0,M.of)(this._createDateTimeDispalyValue(t));break;case"date":n=(0,M.of)(this._createDateDispalyValue(t));break;case"time":n=(0,M.of)(this._createTimeDispalyValue(t));break}return n.pipe((0,u.U)(a=>this._frameWithBrackets(a)))}}ee.\u0275fac=function(t){return new(t||ee)(e.LFG(p.sK),e.LFG(C.aoG),e.LFG(C.$fM),e.LFG(Q),e.LFG(Ne.oq))},ee.\u0275prov=e.Yz7({token:ee,factory:ee.\u0275fac});class L{constructor(t){this.translateService=t}isInvalidElement(t,n){return!!t.get(n).invalid}getElementValidationMessage(t,n){const a=t.get(n);let i="";return a.errors.required||a.errors.pattern?i=this.translateService.instant("SocialLeadgen.ValidationMessage.RequiredFieldValue"):a.errors.maxlength?i=this.translateService.instant("SocialLeadgen.ValidationMessage.LongFieldValue"):a.errors.invalidValue&&(i=this.translateService.instant("SocialLeadgen.ValidationMessage.InvalidValue")),i}}L.\u0275fac=function(t){return new(t||L)(e.LFG(p.sK))},L.\u0275prov=e.Yz7({token:L,factory:L.\u0275fac});const lt={GenerateSessionTokenResult:{AccountServiceUrl:"https://localhost:4200",SessionToken:"08e2404d-f7ec-48e7-9c7f-7cdaab796f06"}},dt={GetLinkedInFormFieldsResult:{consents:[{DisplayValue:"i agree to smth",Id:"0"},{DisplayValue:"i agree to smth 2",Id:"1"}],customMultipleChoiceQuestions:[{DisplayValue:"Multiple choice question - choose one of the following",Id:"Custom question 1"}],customQuestions:[{DisplayValue:"Text question single line",Id:"Custom question 0"}],hiddenFields:[{DisplayValue:"form from ",Id:"form from "},{DisplayValue:"created by",Id:"created by"}],predefinedFields:[{DisplayValue:"FIRST_NAME",Id:"FIRST_NAME"},{DisplayValue:"LAST_NAME",Id:"LAST_NAME"},{DisplayValue:"EMAIL",Id:"EMAIL"},{DisplayValue:"PHONE_NUMBER",Id:"PHONE_NUMBER"},{DisplayValue:"CITY",Id:"CITY"},{DisplayValue:"COMPANY_NAME",Id:"COMPANY_NAME"},{DisplayValue:"GENDER",Id:"GENDER"}]}},gt={GetLinkedInPredefinedFieldResult:{PredefinedFields:[{DisplayValue:"FIRST_NAME",Id:"FIRST_NAME"},{DisplayValue:"LAST_NAME",Id:"LAST_NAME"},{DisplayValue:"EMAIL",Id:"EMAIL"},{DisplayValue:"PHONE_NUMBER",Id:"PHONE_NUMBER"},{DisplayValue:"JOB_TITLE",Id:"JOB_TITLE"},{DisplayValue:"COMPANY_NAME",Id:"COMPANY_NAME"},{DisplayValue:"LINKEDIN_PROFILE_LINK",Id:"LINKEDIN_PROFILE_LINK"},{DisplayValue:"ZIP_CODE",Id:"ZIP_CODE"},{DisplayValue:"SENIORITY",Id:"SENIORITY"},{DisplayValue:"DEGREE",Id:"DEGREE"},{DisplayValue:"START_DATE",Id:"START_DATE"},{DisplayValue:"GRADUATION_DATE",Id:"GRADUATION_DATE"},{DisplayValue:"GENDER",Id:"GENDER"},{DisplayValue:"CITY",Id:"CITY"},{DisplayValue:"COUNTRY",Id:"COUNTRY"}]}},je={GetIntegrationListResult:{integrations:[{id:"a668256d-e864-19ef-7344-1dd95d5e1622",name:"New year promotions",isActive:!1,type:"Facebook",metadata:{facebook:{facebookPageId:"1"},linkedIn:null}},{id:"b668256d-e864-19ef-7344-1dd95d5e1622",name:"Christmas promotions",isActive:!0,type:"Facebook",metadata:{facebook:{facebookPageId:"1"},linkedIn:null}},{id:"c668256d-e864-19ef-7344-1dd95d5e1622",name:"Independence day promotions",isActive:!0,type:"LinkedIn",metadata:{facebook:null,linkedIn:{linkedInAdAccountId:"a668256d-e864-19ef-7344-1dd95d5e1622",mapping:{entitySchemaName:"Lead",columns:[]},forms:[{id:"123456",name:"Form 1 (empty mapping)",isActive:!0,linkedInCreatedTime:"2021-03-05T15:43:29.234",linkedInStatus:"ARCHIVED.REJECTED",useCustomMapping:!0,mapping:null},{id:"123123",name:"Form 2 (filled mapping)",isActive:!1,linkedInCreatedTime:"2021-04-05T15:43:29.234",linkedInStatus:"SUBMITTED.REJECTED",useCustomMapping:!0,mapping:{entitySchemaName:"Lead",columns:[]}}]}}}]}},pt=o=>{const t=je.GetIntegrationListResult.integrations.find(n=>n.id.toUpperCase()===o.toUpperCase());return{actualizeLinkedInFormsSuccess:!1,integrationData:t}},ut={GetLinkedinAdAccountListResult:{linkedinAdAccounts:[{id:"a668256d-e864-19ef-7344-1dd95d5e1622",name:"[Mock] Creatio UA"},{id:"b668256d-e864-19ef-7344-1dd95d5e1622",name:"[Mock] Creatio RU"},{id:"c668256d-e864-19ef-7344-1dd95d5e1622",name:"[Mock] Creatio US"}]}},ze={success:!0,records:[{id:"a668256d-e864-19ef-7344-1dd95d5e1622",name:"[UI Mock] Creatio UA"},{id:"b668256d-e864-19ef-7344-1dd95d5e1622",name:"[UI Mock] Creatio RU"},{id:"c668256d-e864-19ef-7344-1dd95d5e1622",name:"[UI Mock] Creatio US"}]},mt={GetLinkedInFormListResult:{success:!0,forms:[{id:3489524,linkedInCreatedTime:"2020-12-31T12:13:49.000",linkedInStatus:"SUBMITTED.REJECTED",name:"Form - Dec 31, 2020"},{id:3685614,linkedInCreatedTime:"2021-02-11T10:20:04.000",linkedInStatus:"SUBMITTED.NEEDS_REVIEW",name:"\u0424\u043E\u0440\u043C\u0430 - Feb 11, 2021"}]}},_t={rows:[{LeadGenLogType:{displayValue:"Error"},CreatedOn:"2022-01-23T13:05:25.193",Message:"Test",Id:"908ac129-3db1-49de-ba89-a25c21f93917"},{LeadGenLogType:{displayValue:"Info"},CreatedOn:"2022-01-23T13:05:54.387",Message:"02. Nam nec lectus viverra, tincidunt felis et, gravida arcu. Nulla arcu metus.",Id:"a0991549-404a-4ae5-9962-b8ed18bf34f9"},{LeadGenLogType:{displayValue:"Error"},CreatedOn:"2022-04-23T01:05:19.627",Message:"Test",Id:"7348cb9e-d4eb-4044-8ac1-1a101a727e31"},{LeadGenLogType:{displayValue:"Error"},CreatedOn:"2021-04-23T02:05:25.193",Message:"Test",Id:"908ac129-3db1-49de-ba89-a25c21f93917"},{LeadGenLogType:{displayValue:"Error"},CreatedOn:"2021-04-23T03:05:54.387",Message:"05. Nam nec lectus viverra, tincidunt felis et, gravida arcu. Nulla arcu metus.",Id:"a0991549-404a-4ae5-9962-b8ed18bf34f9"},{LeadGenLogType:{displayValue:"Warning"},CreatedOn:"2021-04-23T04:05:19.627",Message:"Test",Id:"7348cb9e-d4eb-4044-8ac1-1a101a727e31"},{LeadGenLogType:{displayValue:"Error"},CreatedOn:"2021-04-23T05:05:25.193",Message:"Test",Id:"908ac129-3db1-49de-ba89-a25c21f93917"},{LeadGenLogType:{displayValue:"Error"},CreatedOn:"2021-04-23T06:05:54.387",Message:"08 Nam nec lectus viverra, tincidunt felis et, gravida arcu. Nulla arcu metus.",Id:"a0991549-404a-4ae5-9962-b8ed18bf34f9"},{LeadGenLogType:{displayValue:"Error"},CreatedOn:"2021-04-23T07:05:19.627",Message:"Test",Id:"7348cb9e-d4eb-4044-8ac1-1a101a727e31"}],rowConfig:{Id:{dataValueType:r.DataValueType.Guid},CreatedOn:{dataValueType:r.DataValueType.DateTime},Message:{dataValueType:r.DataValueType.Text}}},ht={GetEntitiesResult:{entities:[{uId:"41af89e9-750b-4ebb-8cac-ff39b64841ec",caption:"[UI Mock] Lead",name:"Lead",primaryDisplayColumnName:"LeadName"},{uId:"b668256d-e864-19ef-7344-1dd95d5e1622",caption:"[UI Mock] Contact",name:"Contact",primaryDisplayColumnName:"LeadName"},{uId:"c668256d-e864-19ef-7344-1dd95d5e1622",caption:"[UI Mock] Custom",name:"Custom",primaryDisplayColumnName:"LeadName"}]}},ft={schema:{parentUId:"a22b1e79-7fc1-4fe5-aba0-538e9df96f17",isVirtual:!1,isDBView:!1,isTrackChangesInDB:!1,administratedByOperations:!1,administratedByColumns:!1,administratedByRecords:!0,useMasterRecordRights:!1,masterRecordSchemaName:"",columns:{Items:{"ae0e45ca-c495-4fe7-a39d-3ab7278e1617":{uId:"ae0e45ca-c495-4fe7-a39d-3ab7278e1617",name:"Id",caption:{"en-US":"Id","ru-RU":"Id"},description:{},dataValueType:0,isInherited:!0,isOverride:!1,isRequired:!0,isVirtual:!1,isValueCloneable:!1,isMultilineText:!1,isSimpleLookup:!1,isCascade:!1,usageType:1,status:0,isIndexed:!1,isWeakReference:!1},"e80190a5-03b2-4095-90f7-a193a960adee":{uId:"e80190a5-03b2-4095-90f7-a193a960adee",name:"CreatedOn",caption:{"en-US":"Created on","ru-RU":"\u0414\u0430\u0442\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F"},description:{},dataValueType:7,isInherited:!0,isOverride:!1,isRequired:!1,isVirtual:!1,isValueCloneable:!1,isMultilineText:!1,isSimpleLookup:!1,isCascade:!1,usageType:1,status:0,isIndexed:!0,isWeakReference:!1},"ebf6bb93-8aa6-4a01-900d-c6ea67affe21":{uId:"ebf6bb93-8aa6-4a01-900d-c6ea67affe21",name:"CreatedBy",referenceSchemaName:"Contact",caption:{"en-US":"Created by","ru-RU":"\u0421\u043E\u0437\u0434\u0430\u043B"},description:{},dataValueType:10,isInherited:!0,isOverride:!1,referenceSchemaUId:"16be3651-8fe2-4159-8dd0-a803d4683dd3",isRequired:!1,isVirtual:!1,isValueCloneable:!1,isMultilineText:!1,isSimpleLookup:!1,isCascade:!1,usageType:1,status:0,isIndexed:!0,isWeakReference:!0},"abc96728-faf6-451d-91f6-35bc53ea9745":{uId:"abc96728-faf6-451d-91f6-35bc53ea9745",name:"Notes",caption:{"en-US":"Notes","ru-RU":"\u0417\u0430\u043C\u0435\u0442\u043A\u0438"},description:{},dataValueType:29,isInherited:!0,isOverride:!1,isRequired:!0,isVirtual:!1,isValueCloneable:!0,isMultilineText:!1,isSimpleLookup:!1,isCascade:!1,usageType:2,status:0,isIndexed:!1,isWeakReference:!1}}},primaryColumnUId:"ae0e45ca-c495-4fe7-a39d-3ab7278e1617",primaryDisplayColumnUId:"d06ba9af-faf5-4741-a672-e154ae561a94",uId:"41af89e9-750b-4ebb-8cac-ff39b64841ec",realUId:"41af89e9-750b-4ebb-8cac-ff39b64841ec",name:"Lead",caption:{"en-US":"Lead","ru-RU":"\u041B\u0438\u0434"},description:{},extendParent:!1}},Ct={GetAccountResult:{AccountId:"e3bd829d-c680-4a70-90a7-0f569478452d",CreatioUrl:"http://test.com",IsAccountExists:!0,IsActive:!0}},vt={adAccounts:[{id:"506997792",name:"\u0423\u0447. \u0437\u0430\u043F\u0438\u0441\u044C \u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u0430 Alina",link:"https://www.linkedin.com/campaignmanager/accounts/506997792",connectionStatus:1,expirationDate:"2021-07-24T14:21:51.000",tokens:[{id:"RauxC_J11d",linkedInUserName:"Dmytro Zdybai",status:1,expirationDate:"2021-07-24T14:21:51.000",hasAdAccountAccess:!0}]},{id:"507004382",name:"DevTeam. Ad Account 2",link:"https://www.linkedin.com/campaignmanager/accounts/507004382",connectionStatus:0,expirationDate:"2021-07-24T14:21:51.000",tokens:[{id:"RauxC_J11d",linkedInUserName:"Dmytro Zdybai",status:3,expirationDate:"2021-07-24T14:21:51.000",hasAdAccountAccess:!0},{id:"RauxC_J11d",linkedInUserName:"Artem Avanesian",status:2,expirationDate:"2021-07-24T14:21:51.000",hasAdAccountAccess:!1}]}]};class S{constructor(t){this._httpClient=t,this._appInstallerServiceUrl="rest/SocialLeadGenService/"}_proxyRequest(t,n){return this._httpClient.post(`${this._appInstallerServiceUrl}ProxyRequest?proxyto=/${t}`,JSON.stringify(n),{headers:new Ze.WM({"Content-Type":"text/plain"})})}_castResponse(t,n){const a=t[n];return a.success=!0,a}deleteLinkedInAdAccount(t){return this._proxyRequest("api/linkedIn/adaccount/delete",{adAccountId:t})}deleteLinkedInUserToken(t){return this._proxyRequest("api/linkedIn/token/delete",{linkedInUserId:t})}getLinkedInTokensIntrospection(t){return this._proxyRequest("api/linkedIn/token/introspect/account",t)}getIntegration(t){return this._proxyRequest("api/integration/get",{id:t,actualizeFormsFromLinkedIn:!0}).pipe((0,u.U)(n=>(n.success=!0,n)))}generateSessionToken(){return this._httpClient.post(this._appInstallerServiceUrl+"GenerateSessionToken",{}).pipe((0,u.U)(t=>{const n=t.GenerateSessionTokenResult;return{accountServiceUrl:n.AccountServiceUrl,sessionToken:n.SessionToken}}))}getIntegrationList(){return this._httpClient.post(this._appInstallerServiceUrl+"GetIntegrationList",{}).pipe((0,u.U)(t=>this._castResponse(t,"GetIntegrationListResult")))}createIntegration(t){return this._httpClient.post(this._appInstallerServiceUrl+"CreateIntegration",{request:t}).pipe((0,u.U)(()=>({success:!0})))}updateLeadgenIntegration(t){return this._httpClient.post(this._appInstallerServiceUrl+"UpdateIntegration",{request:t}).pipe((0,u.U)(()=>({success:!0})))}deleteLeadgenIntegration(t){return this._proxyRequest("api/integration/delete",{integrationId:t.id}).pipe((0,u.U)(()=>({success:!0})),(0,G.K)(n=>(0,M.of)(n.error)))}getLinkedinAdAccounts(){return this._httpClient.post(this._appInstallerServiceUrl+"GetLinkedinAdAccountList",{}).pipe((0,u.U)(t=>this._castResponse(t,"GetLinkedinAdAccountListResult")))}getFacebookPages(){return(0,M.of)(ze)}getLinkedInPredefinedField(t){const n={request:{adAccountId:t}};return this._httpClient.post(this._appInstallerServiceUrl+"GetLinkedInPredefinedField",n).pipe((0,u.U)(a=>this._castResponse(a,"GetLinkedInPredefinedFieldResult")))}getLinkedInFormFields(t,n){const a={request:{adAccountId:t,formId:n}};return this._httpClient.post(this._appInstallerServiceUrl+"GetLinkedInFormFields",a).pipe((0,u.U)(i=>this._castResponse(i,"GetLinkedInFormFieldsResult")))}getLinkedInFormList(t){const n={request:{adAccountId:t}};return this._httpClient.post(this._appInstallerServiceUrl+"GetLinkedInFormList",n).pipe((0,u.U)(a=>this._castResponse(a,"GetLinkedInFormListResult")))}}S.\u0275fac=function(t){return new(t||S)(e.LFG(Ze.eN))},S.\u0275prov=e.Yz7({token:S,factory:S.\u0275fac});class te{constructor(t){this._translateService=t,this._translationPrefix="SocialLeadgen.IntegrationPage.FormsList.FormStatus"}translateStatus(t){const n=t.split(".")[0],a=t.split(".")[1];if(n==="SUBMITTED"&&a==="")return this._translateService.instant(`${this._translationPrefix}.NotActive`);if(n==="ARCHIVED")return this._translateService.instant(`${this._translationPrefix}.Archived`);if(n!=="SUBMITTED")return this._translateService.instant(`${this._translationPrefix}.Undefined`);switch(a){case"PENDING":return this._translateService.instant(`${this._translationPrefix}.Pending`);case"APPROVED":return this._translateService.instant(`${this._translationPrefix}.Approved`);case"PREAPPROVED":return this._translateService.instant(`${this._translationPrefix}.Preapproved`);case"REJECTED":return this._translateService.instant(`${this._translationPrefix}.Rejected`);case"NEEDS_REVIEW":return this._translateService.instant(`${this._translationPrefix}.NeedsReview`);case"AUTO_APPROVED":return this._translateService.instant(`${this._translationPrefix}.AutoApproved`);case"AUTO_REJECTED":return this._translateService.instant(`${this._translationPrefix}.AutoRejected`);case"NOT_ATTACHED_TO_CREATIVE_ON_HOLD":return this._translateService.instant(`${this._translationPrefix}.NotActive`)}}}te.\u0275fac=function(t){return new(t||te)(e.LFG(p.sK))},te.\u0275prov=e.Yz7({token:te,factory:te.\u0275fac});function k(o){return o==null}class ne{constructor(){this._defaultMapping={name:"",value:{const:""}}}generateMappingColumn(t,n,a){let i={...this._defaultMapping},s={};const d=n.displayValue,m=n.value;switch(i.name=t,a){case"boolean":case"double":s={const:m.toString()};break;case"text":case"lookup":s={const:m};break;case"date":case"datetime":case"time":s={const:(0,r.toLocalISOString)(m)};break;case"macro":s={macros:{selector:m}};break;case"linkedin_predefinedfield":s={form:{predefinedQuestion:{predefinedField:m}}};break;case"linkedin_customquestion":s={form:{customQuestion:{name:m,question:d}}};break;case"linkedin_hiddenfield":s={form:{hiddenField:{name:m}}};break;case"linkedin_consent":s={form:{consent:{id:m,content:d}}};break;default:throw new Error(`Invalid mapping type ${a}`)}return i={...i,name:t,value:s},i}getMappingColumnDisplayValue(t,n){const a=t.value;switch(n){case"text":case"boolean":case"double":case"date":case"datetime":case"time":case"lookup":return a.const;case"macro":return a.macros.selector;case"linkedin_predefinedfield":return a.form.predefinedQuestion.predefinedField;case"linkedin_customquestion":return a.form.customQuestion.question;case"linkedin_hiddenfield":return a.form.hiddenField.name;case"linkedin_consent":return a.form.consent.content;default:throw new Error(`Invalid mapping type '${n}'`)}}getMappingColumnType(t,n){var a,i,s,d,m,O,h,y,T;const v=t.value,w=()=>new Error(`Data not found for data value type ${n.toString()}`);switch(n){case r.DataValueType.Text:case r.DataValueType.SHORT_TEXT:case r.DataValueType.PHONE_TEXT:case r.DataValueType.WEB_TEXT:case r.DataValueType.EMAIL_TEXT:case r.DataValueType.MEDIUM_TEXT:case r.DataValueType.RICH_TEXT:case r.DataValueType.MAXSIZE_TEXT:case r.DataValueType.LONG_TEXT:switch(!0){case!k(v.const):return"text";case!k((a=v.macros)===null||a===void 0?void 0:a.selector):return"macro";case!k((s=(i=v.form)===null||i===void 0?void 0:i.predefinedQuestion)===null||s===void 0?void 0:s.predefinedField):return"linkedin_predefinedfield";case!k((m=(d=v.form)===null||d===void 0?void 0:d.customQuestion)===null||m===void 0?void 0:m.question):return"linkedin_customquestion";case!k((h=(O=v.form)===null||O===void 0?void 0:O.hiddenField)===null||h===void 0?void 0:h.name):return"linkedin_hiddenfield";default:throw w()}case r.DataValueType.Boolean:switch(!0){case!k(v.const):return"boolean";case!k((T=(y=v.form)===null||y===void 0?void 0:y.consent)===null||T===void 0?void 0:T.content):return"linkedin_consent";default:throw w()}case r.DataValueType.DateTime:if(k(v.const))throw w();return"datetime";case r.DataValueType.Date:if(k(v.const))throw w();return"date";case r.DataValueType.Time:if(k(v.const))throw w();return"time";case r.DataValueType.Integer:case r.DataValueType.Float:case r.DataValueType.FLOAT1:case r.DataValueType.FLOAT2:case r.DataValueType.FLOAT3:case r.DataValueType.FLOAT4:case r.DataValueType.FLOAT8:case r.DataValueType.Money:if(k(v.const))throw w();return"double";case r.DataValueType.Lookup:if(k(v.const))throw w();return"lookup";default:throw w()}}}ne.\u0275fac=function(t){return new(t||ne)},ne.\u0275prov=e.Yz7({token:ne,factory:ne.\u0275fac});var Ke=l(11465),Ve=l(84967);class E{get _isAccountExists(){var t,n;return((n=(t=this._settings)===null||t===void 0?void 0:t.account)===null||n===void 0?void 0:n.isAccountExists)||!1}constructor(t,n,a){this.sysSettingsService=t,this._httpClient=n,this.queryExecutor=a,this._appInstallerServiceUrl="rest/SocialLeadGenService/",this._isLoaded=!1}_getSelectedSysAdminUnit(){const t="LeadGenRecipientsOfNotifications";return this.sysSettingsService.getByCodes([t]).pipe((0,u.U)(n=>n.values[t].value))}_saveSelectedSysAdminUnit(t){const n="LeadGenRecipientsOfNotifications";return this.sysSettingsService.updateMany([{code:n,value:t}])}_getSysAdminUnits(){const t=new r.EntitySchemaQuery("SysAdminUnit");return t.addSchemaColumn("Id"),t.addSchemaColumn("Name"),t.filters.addSchemaColumnFilterWithParameter(r.ComparisonType.Equal,"Active",1),t.filters.addSchemaColumnFilterWithParameter(r.ComparisonType.Equal,"ConnectionType",0),this.queryExecutor.executeSelectQuery(t).pipe((0,u.U)(n=>n.map(a=>({id:a.Id,name:a.Name}))))}_getAccount(){return this._httpClient.post(this._appInstallerServiceUrl+"GetAccount",{}).pipe((0,u.U)(t=>{const n=t.GetAccountResult;return{accountId:n.AccountId,creatioUrl:n.CreatioUrl,isAccountExists:n.IsAccountExists,isActive:n.IsActive}}))}_saveAccount(t){const n=this._appInstallerServiceUrl+(t.isAccountExists?"UpdateAccount":"CreateAccount"),a=t.isAccountExists?{updateAccountRequest:{CreatioDomain:t.creatioUrl,PingCreatioInstance:!0}}:{createAccountRequest:{CreatioDomain:t.creatioUrl,PingCreatioInstance:!0}};return this._httpClient.post(n,a).pipe((0,u.U)(()=>(t.isAccountExists=!0,{success:!0})),(0,G.K)(i=>(0,M.of)(i.error)))}_getNotificationGroups(){return(0,Ve.D)([this._getSelectedSysAdminUnit(),this._getSysAdminUnits()]).pipe((0,u.U)(t=>({selected:t[0],rows:t[1]})))}getSettings(){return this._isLoaded?(0,M.of)(this._settings):(0,Ve.D)([this._getNotificationGroups(),this._getAccount()]).pipe((0,u.U)(t=>({success:!0,notificationGroups:t[0],account:t[1]})),(0,ke.b)(t=>{this._settings=t,this._isLoaded=!0}))}saveSettings(t){return(0,Ve.D)([this._saveAccount(t.account),this._saveSelectedSysAdminUnit(t.notificationGroups.selected)]).pipe((0,u.U)(([n,a])=>(n.success&&(this._settings=t),n)))}isAccountExists(){return this._isLoaded?(0,M.of)(this._isAccountExists):this.getSettings().pipe((0,u.U)(t=>t.account.isAccountExists))}}E.\u0275fac=function(t){return new(t||E)(e.LFG(Ke.lI),e.LFG(Ze.eN),e.LFG(Ne.oq))},E.\u0275prov=e.Yz7({token:E,factory:E.\u0275fac});const It=[Y,ne,S,Q,L,ee,te,E,N];var F=l(7976);class ${constructor(t,n){this.settingsService=t,this.router=n,this._redirectToSettingsLocation=()=>this.router.navigateByUrl("/SocialLeadgen/settings?createAccount=true"),this._redirectToErrorLocation=a=>this.router.navigateByUrl("/SocialLeadgen/error?code="+a)}canActivate(t,n){return this.settingsService.isAccountExists().pipe((0,ke.b)(a=>{a||this._redirectToSettingsLocation()}),(0,G.K)(a=>{var i,s;return this._redirectToErrorLocation((s=(i=a?.error)===null||i===void 0?void 0:i.errorInfo)===null||s===void 0?void 0:s.errorCode)}))}}$.\u0275fac=function(t){return new(t||$)(e.LFG(E),e.LFG(F.F0))},$.\u0275prov=e.Yz7({token:$,factory:$.\u0275fac});const Mt=[$];var bt=l(33177),Ue=l(60527);class ae{constructor(t,n,a){this._translateService=t,this._activatedRoute=n,this._window=a,this._errorCodesTranslates=new Map([["identity_general_error","SocialLeadgen.IntegrationError.GeneralError"],["invalid_client","SocialLeadgen.IntegrationError.InvalidClient"],["invalid_scope","SocialLeadgen.IntegrationError.InvalidScope"],["identity_invalid_settings","SocialLeadgen.IntegrationError.InvalidSettings"]])}ngOnInit(){const t=this._activatedRoute.snapshot.queryParams.code,n=this._errorCodesTranslates.get(t);this.errorMessage=this._translateService.instant(n)}close(){this._window.close()}}ae.\u0275fac=function(t){return new(t||ae)(e.Y36(p.sK),e.Y36(F.gz),e.Y36(bt.WINDOW_TOKEN))},ae.\u0275cmp=e.Xpm({type:ae,selectors:[["ts-integration-error"]],decls:18,vars:7,consts:[[1,"base-section-wrap"],[1,"header"],[1,"pane"],[3,"title"],[1,"actions"],["mat-flat-button","","color","primary",1,"action-button",3,"click"],[1,"flex-wrapper"],[1,"table-wrapper"],[1,"integration-blank-slate-wrapper_vertical"],[1,"integration-blank-slate-wrapper"],[1,"integration-blank-slate-icon"],[1,"integration-blank-slate-description"]],template:function(t,n){t&1&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ts-header",3),e.ALo(4,"translate"),e.TgZ(5,"div",4)(6,"button",5),e.NdJ("click",function(){return n.close()}),e._uU(7),e.ALo(8,"translate"),e.qZA()()()()(),e.TgZ(9,"div",6)(10,"div",7)(11,"div",2)(12,"div",8)(13,"div",9),e._UZ(14,"div",10),e.TgZ(15,"div",11)(16,"span"),e._uU(17),e.qZA()()()()()()()()),t&2&&(e.xp6(3),e.Q6J("title",e.lcZ(4,3,"SocialLeadgen.IntegrationSection.Header.Title")),e.xp6(4),e.hij(" ",e.lcZ(8,5,"BasePageComponent.Close")," "),e.xp6(10),e.hij(" ",n.errorMessage," "))},dependencies:[x.eB,Ue.G,p.X$],styles:[".integration-blank-slate-wrapper_vertical[_ngcontent-%COMP%]{align-items:center;justify-content:center;height:100%;width:100%;display:flex;position:fixed}.integration-blank-slate-wrapper_vertical[_ngcontent-%COMP%]   .integration-blank-slate-wrapper[_ngcontent-%COMP%]{color:#444;display:flex;flex-direction:column;position:relative;align-items:center;justify-content:center}.integration-blank-slate-wrapper_vertical[_ngcontent-%COMP%]   .integration-blank-slate-wrapper[_ngcontent-%COMP%]   .integration-blank-slate-description[_ngcontent-%COMP%]{max-width:400px;font-size:18px;line-height:24px;padding-left:15px;box-shadow:-3px 0 #006ce0}.integration-blank-slate-wrapper_vertical[_ngcontent-%COMP%]   .integration-blank-slate-wrapper[_ngcontent-%COMP%]   .integration-blank-slate-icon[_ngcontent-%COMP%]{width:134px;height:139px;margin-bottom:32px;background:url(empty-blankslate.5fa1b8a6b3f86afb.svg) no-repeat center;background-size:100%}"]});var Ae=l(95411);function xt(o,t){if(o&1&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),o&2){const n=t.$implicit;e.Q6J("value",n.id),e.xp6(1),e.hij(" ",n.name," ")}}function yt(o,t){if(o&1&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),o&2){const n=e.oxw();e.xp6(1),e.hij(" ",n.getElementValidationMessage("facebookPageId")," ")}}class oe{constructor(t,n){this.leadgenService=t,this.formValidationService=n,this.setIsChanged=new e.vpe,this.setupIntegration=new e.vpe,this.isInvalidElement=a=>this.formValidationService.isInvalidElement(this.parent.get("facebookIntegrationForm"),a),this.getElementValidationMessage=a=>this.formValidationService.getElementValidationMessage(this.parent.get("facebookIntegrationForm"),a)}loadPages(){this.facebookPages=this.leadgenService.getFacebookPages().pipe((0,u.U)(t=>t.records))}ngOnInit(){this.loadPages()}}oe.\u0275fac=function(t){return new(t||oe)(e.Y36(S),e.Y36(L))},oe.\u0275cmp=e.Xpm({type:oe,selectors:[["ts-facebook-integration-form"]],inputs:{parent:"parent"},outputs:{setIsChanged:"setIsChanged",setupIntegration:"setupIntegration"},decls:15,vars:8,consts:[[3,"formGroup"],["formGroupName","facebookIntegrationForm"],[1,"horizantal-container"],["formControlName","facebookPageId","required","",3,"selectionChange"],["class","default-value-type-select-option",3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["mat-icon-button","",1,"refresh-button",3,"click"],["svgIcon","refresh-icon"],["mat-icon-button","",1,"setup-button",3,"click"],["svgIcon","gear-icon"],[1,"default-value-type-select-option",3,"value"]],template:function(t,n){t&1&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"mat-form-field")(4,"mat-label"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"mat-select",3),e.NdJ("selectionChange",function(){return n.setIsChanged.emit()}),e.YNc(8,xt,2,2,"mat-option",4),e.ALo(9,"async"),e.qZA(),e.YNc(10,yt,2,1,"mat-error",5),e.qZA(),e.TgZ(11,"button",6),e.NdJ("click",function(){return n.loadPages()}),e._UZ(12,"mat-icon",7),e.qZA(),e.TgZ(13,"button",8),e.NdJ("click",function(){return n.setupIntegration.emit()}),e._UZ(14,"mat-icon",9),e.qZA()()()()),t&2&&(e.Q6J("formGroup",n.parent),e.xp6(5),e.Oqu(e.lcZ(6,4,"SocialLeadgen.IntegrationPage.Detail.FacebookPage")),e.xp6(3),e.Q6J("ngForOf",e.lcZ(9,6,n.facebookPages)),e.xp6(2),e.Q6J("ngIf",n.isInvalidElement("facebookPageId")))},dependencies:[g.sg,g.O5,c._Y,c.JJ,c.JL,c.Q7,c.F,c.sg,c.u,c.x0,x.eB,f.nI,f.v_,f.$V,W.x8,Ae.CK,P.Hw,g.Ov,p.X$],styles:[".horizantal-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:baseline}.horizantal-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-grow:1}"]});function Ot(o,t){if(o&1&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),o&2){const n=t.$implicit;e.Q6J("value",n.id),e.xp6(1),e.hij(" ",n.name," ")}}function Pt(o,t){if(o&1){const n=e.EpF();e.TgZ(0,"mat-icon",11),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.setupIntegration.emit())}),e.qZA()}}function St(o,t){o&1&&e._UZ(0,"mat-icon",12)}function Tt(o,t){if(o&1&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),o&2){const n=e.oxw();e.xp6(1),e.hij(" ",n.getElementValidationMessage("linkedinAdAccountId")," ")}}class ie{constructor(t,n){this.leadgenService=t,this.formValidationService=n,this.setIsChanged=new e.vpe,this.setupIntegration=new e.vpe,this.isInvalidElement=a=>this.formValidationService.isInvalidElement(this.parent.get("linkedinIntegrationForm"),a),this.getElementValidationMessage=a=>this.formValidationService.getElementValidationMessage(this.parent.get("linkedinIntegrationForm"),a)}loadAdAccounts(){this.linkedinAdAccounts=this.leadgenService.getLinkedinAdAccounts().pipe((0,u.U)(t=>t.linkedinAdAccounts))}ngOnInit(){this.loadAdAccounts()}}ie.\u0275fac=function(t){return new(t||ie)(e.Y36(S),e.Y36(L))},ie.\u0275cmp=e.Xpm({type:ie,selectors:[["ts-linkedin-integration-form"]],inputs:{parent:"parent",enableSetupIntegrationAction:"enableSetupIntegrationAction"},outputs:{setIsChanged:"setIsChanged",setupIntegration:"setupIntegration"},decls:14,vars:11,consts:[[3,"formGroup"],["formGroupName","linkedinIntegrationForm"],[1,"horizantal-container"],[1,"hide-select-arrow"],["formControlName","linkedinAdAccountId","required","",3,"placeholder","selectionChange"],["select",""],["class","default-value-type-select-option",3,"value",4,"ngFor","ngForOf"],["matSuffix","","svgIcon","gear-icon",3,"click",4,"ngIf"],["matSuffix","","svgIcon","read-only",4,"ngIf"],[4,"ngIf"],[1,"default-value-type-select-option",3,"value"],["matSuffix","","svgIcon","gear-icon",3,"click"],["matSuffix","","svgIcon","read-only"]],template:function(t,n){if(t&1&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"mat-select",4,5),e.NdJ("selectionChange",function(){return n.setIsChanged.emit()}),e.YNc(9,Ot,2,2,"mat-option",6),e.ALo(10,"async"),e.qZA(),e.YNc(11,Pt,1,0,"mat-icon",7),e.YNc(12,St,1,0,"mat-icon",8),e.YNc(13,Tt,2,1,"mat-error",9),e.qZA()()()()),t&2){const a=e.MAs(8);e.Q6J("formGroup",n.parent),e.xp6(5),e.Oqu(e.lcZ(6,7,"SocialLeadgen.IntegrationPage.Detail.LinkedinAdAccount")),e.xp6(2),e.Q6J("placeholder",a.value),e.xp6(2),e.Q6J("ngForOf",e.lcZ(10,9,n.linkedinAdAccounts)),e.xp6(2),e.Q6J("ngIf",n.enableSetupIntegrationAction),e.xp6(1),e.Q6J("ngIf",!n.enableSetupIntegrationAction),e.xp6(1),e.Q6J("ngIf",n.isInvalidElement("linkedinAdAccountId"))}},dependencies:[g.sg,g.O5,c._Y,c.JJ,c.JL,c.Q7,c.F,c.sg,c.u,c.x0,f.nI,f.v_,f.$V,f.nX,W.x8,Ae.CK,P.Hw,g.Ov,p.X$],styles:[".horizantal-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:baseline}.horizantal-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-grow:1}.horizantal-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:16px;width:16px;font-size:20px;line-height:20px;margin-left:8px}.horizantal-container[_ngcontent-%COMP%]   mat-form-field.hide-select-arrow[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%]     .mat-select-arrow{opacity:0}"]});var D=l(37697),kt=l(6729);class se{constructor(t,n,a,i){this._changeDetectorRef=t,this._dialogRef=n,this._translateService=a,this.data=i,this._translationPrefix="SocialLeadgen.IntegrationPage.ColumnMapping.ModalBox",this.value=null,this.entitySchemaColumn=this.data.entitySchemaColumn}_calculateResponseType(){switch(this.data.entitySchemaColumn.dataValueType){case r.DataValueType.Text:case r.DataValueType.SHORT_TEXT:case r.DataValueType.PHONE_TEXT:case r.DataValueType.WEB_TEXT:case r.DataValueType.EMAIL_TEXT:case r.DataValueType.MEDIUM_TEXT:case r.DataValueType.RICH_TEXT:case r.DataValueType.MAXSIZE_TEXT:case r.DataValueType.LONG_TEXT:return"text";case r.DataValueType.Lookup:return"lookup";case r.DataValueType.Date:return"date";case r.DataValueType.Time:return"time";case r.DataValueType.DateTime:return"datetime";case r.DataValueType.Integer:case r.DataValueType.Float:case r.DataValueType.FLOAT1:case r.DataValueType.FLOAT2:case r.DataValueType.FLOAT3:case r.DataValueType.FLOAT4:case r.DataValueType.FLOAT8:case r.DataValueType.Money:return"double"}}translate(t){return this._translateService.instant(`${this._translationPrefix}.${t}`)}onActionOk(){const t=this._calculateResponseType();let n=null;k(this.value)||(t==="lookup"?n={value:this.value.value,displayValue:this.value.displayValue}:n={value:this.value,displayValue:this.value},this._dialogRef.close({status:!0,value:n,type:t}))}onActionCancel(){this._dialogRef.close({status:!1})}}se.\u0275fac=function(t){return new(t||se)(e.Y36(e.sBO),e.Y36(D.hV),e.Y36(p.sK),e.Y36(D.eJ))},se.\u0275cmp=e.Xpm({type:se,selectors:[["ts-mapping-field-custom-modal-box"]],decls:9,vars:6,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["required","",3,"column","label","ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-flat-button","","color","primary",3,"click"],["mat-button","","cdkFocusInitial","",3,"click"]],template:function(t,n){t&1&&(e.TgZ(0,"h2",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1)(3,"ts-entity-column-value-input",2),e.NdJ("ngModelChange",function(i){return n.value=i}),e.qZA()(),e.TgZ(4,"div",3)(5,"button",4),e.NdJ("click",function(){return n.onActionOk()}),e._uU(6),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return n.onActionCancel()}),e._uU(8),e.qZA()()),t&2&&(e.xp6(1),e.Oqu(n.translate("EnterTextValueCaption")),e.xp6(2),e.Q6J("column",n.entitySchemaColumn)("label",n.data.caption)("ngModel",n.value),e.xp6(3),e.Oqu(n.translate("SetButtonCaption")),e.xp6(2),e.Oqu(n.translate("CancelButtonCaption")))},dependencies:[c.JJ,c.Q7,c.On,x.eB,kt.j],styles:["[mat-dialog-content][_ngcontent-%COMP%]     .mat-form-field-infix{margin-top:10px}[mat-dialog-actions][_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse}[mat-dialog-actions] button[_ngcontent-%COMP%]{margin-left:10px}"],changeDetection:0});var A=l(33569),we;(function(o){o.DEFAULT="DEFAULT",o.FORM="FORM"})(we||(we={}));var _;(function(o){o.FACEBOOK="Facebook",o.LINKEDIN="LinkedIn",o.UNDEFINED="Undefined"})(_||(_={}));var xe;(function(o){o.NOTMAPPEDFIELDS="not_mapped_fields"})(xe||(xe={}));var ye;(function(o){o[o.Inactive=0]="Inactive",o[o.Active=1]="Active"})(ye||(ye={}));var Z;(function(o){o[o.Unknown=0]="Unknown",o[o.Revoked=1]="Revoked",o[o.Expired=2]="Expired",o[o.Active=3]="Active"})(Z||(Z={}));var At=l(79831);function wt(o,t){if(o&1&&e._UZ(0,"crt-skeleton-loader",7),o&2){const n=e.oxw();e.Q6J("styles",n.skeletonStyles)}}function Lt(o,t){if(o&1&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),o&2){const n=t.$implicit;e.Q6J("value",n),e.xp6(1),e.hij(" ",n.name," ")}}function Ft(o,t){if(o&1){const n=e.EpF();e.TgZ(0,"mat-form-field")(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",8),e.NdJ("ngModelChange",function(i){e.CHM(n);const s=e.oxw();return e.KtG(s.selectedValue=i)}),e.YNc(4,Lt,2,2,"mat-option",9),e.qZA()()}if(o&2){const n=e.oxw();e.xp6(2),e.Oqu(n.data.caption),e.xp6(1),e.Q6J("ngModel",n.selectedValue),e.xp6(1),e.Q6J("ngForOf",n.formFields)}}class re{constructor(t,n,a,i,s){this._dialogRef=t,this._leadgenService=n,this._translateService=a,this.data=i,this._changeDetector=s,this._translationPrefix="SocialLeadgen.IntegrationPage.ColumnMapping.ModalBox",this.selectedValue=null,this.formFields=[],this.isDataLoading=!1,this.skeletonStyles={height:"54px",width:"290px"}}_mapFields(t,n,a){return t[n].map(i=>({value:i.Id,name:i.DisplayValue,type:a}))}_loadData(t,n,a,i){return this.isDataLoading=!0,i===we.DEFAULT?this._leadgenService.getLinkedInPredefinedField(n).pipe((0,u.U)(s=>this._mapFields(s,"PredefinedFields","linkedin_predefinedfield"))):i===we.FORM?this._leadgenService.getLinkedInFormFields(n,a).pipe((0,u.U)(s=>{if(t===r.DataValueType.Boolean)return this._mapFields(s,"consents","linkedin_consent");if(t===r.DataValueType.Text||t===r.DataValueType.SHORT_TEXT||t===r.DataValueType.PHONE_TEXT||t===r.DataValueType.WEB_TEXT||t===r.DataValueType.EMAIL_TEXT||t===r.DataValueType.MEDIUM_TEXT||t===r.DataValueType.RICH_TEXT||t===r.DataValueType.MAXSIZE_TEXT||t===r.DataValueType.LONG_TEXT){const d=this._mapFields(s,"predefinedFields","linkedin_predefinedfield"),m=this._mapFields(s,"customQuestions","linkedin_customquestion"),O=this._mapFields(s,"customMultipleChoiceQuestions","linkedin_customquestion"),h=this._mapFields(s,"hiddenFields","linkedin_hiddenfield");return[...d,...m,...O,...h]}else throw new Error(`Invalid data type '${t}'`)})):(0,M.of)([])}translate(t){return this._translateService.instant(`${this._translationPrefix}.${t}`)}onActionOk(){(0,A.Z)(this.selectedValue)||this._dialogRef.close({status:!0,value:{value:this.selectedValue.value,displayValue:this.selectedValue.name},type:this.selectedValue.type})}onActionCancel(){this._dialogRef.close({status:!1})}ngAfterViewInit(){const t=this.data.entitySchemaColumn.dataValueType,n=this.data.extraData.linkedinAdAccountId,a=this.data.extraData.linkedinFormId,i=this.data.extraData.mode;this._loadData(t,n,a,i).subscribe(s=>{this.formFields=s,this.isDataLoading=!1,this._changeDetector.detectChanges()})}}re.\u0275fac=function(t){return new(t||re)(e.Y36(D.hV),e.Y36(S),e.Y36(p.sK),e.Y36(D.eJ),e.Y36(e.sBO))},re.\u0275cmp=e.Xpm({type:re,selectors:[["ts-mapping-field-form-modal-box"]],decls:11,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"styles",4,"ngIf","ngIfElse"],["field",""],["mat-dialog-actions",""],["mat-flat-button","","color","primary",3,"click"],["mat-button","","cdkFocusInitial","",3,"click"],[3,"styles"],["required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,n){if(t&1&&(e.TgZ(0,"h2",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e.YNc(3,wt,1,1,"crt-skeleton-loader",2),e.YNc(4,Ft,5,3,"ng-template",null,3,e.W1O),e.qZA(),e.TgZ(6,"div",4)(7,"button",5),e.NdJ("click",function(){return n.onActionOk()}),e._uU(8),e.qZA(),e.TgZ(9,"button",6),e.NdJ("click",function(){return n.onActionCancel()}),e._uU(10),e.qZA()()),t&2){const a=e.MAs(5);e.xp6(1),e.Oqu(n.translate("SelectFormCaption")),e.xp6(2),e.Q6J("ngIf",n.isDataLoading)("ngIfElse",a),e.xp6(5),e.Oqu(n.translate("SetButtonCaption")),e.xp6(2),e.Oqu(n.translate("CancelButtonCaption"))}},dependencies:[g.sg,g.O5,c.JJ,c.Q7,c.On,x.eB,f.v_,f.$V,W.x8,Ae.CK,At.t],styles:["[mat-dialog-content][_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}[mat-dialog-actions][_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse}[mat-dialog-actions] button[_ngcontent-%COMP%]{margin-left:10px}"],changeDetection:0});function Et(o,t){o&1&&e._UZ(0,"mat-icon",12)}function Dt(o,t){if(o&1){const n=e.EpF();e.TgZ(0,"mat-icon",13),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.clearField())}),e.qZA()}}function Zt(o,t){if(o&1&&e._UZ(0,"mat-icon",14),o&2){e.oxw();const n=e.MAs(10);e.Q6J("matMenuTriggerFor",n)}}function Nt(o,t){if(o&1){const n=e.EpF();e.TgZ(0,"mat-icon",15),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.removeField())}),e.qZA()}}function Vt(o,t){o&1&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),o&2&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"SocialLeadgen.ValidationMessage.RequiredFieldValue")," "))}function Ut(o,t){if(o&1){const n=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.onMenuItemClick("form_field"))}),e._UZ(1,"mat-icon",16),e.TgZ(2,"span"),e._uU(3),e.qZA()()}if(o&2){const n=e.oxw();e.xp6(3),e.Oqu(n.translate("FieldMenuCaptions.FormField"))}}function qt(o,t){if(o&1){const n=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.onMenuItemClick("text_value"))}),e._UZ(1,"mat-icon",17),e.TgZ(2,"span"),e._uU(3),e.qZA()()}if(o&2){const n=e.oxw();e.xp6(3),e.Oqu(n.translate("FieldMenuCaptions.Text"))}}function Rt(o,t){if(o&1&&(e.TgZ(0,"button",18),e._UZ(1,"mat-icon",19),e.TgZ(2,"span"),e._uU(3),e.qZA()()),o&2){const n=e.oxw(),a=e.MAs(17);e.Q6J("matMenuTriggerFor",a),e.xp6(3),e.Oqu(n.translate("FieldMenuCaptions.Boolean"))}}function Jt(o,t){if(o&1){const n=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.onMenuItemClick("lookup_value"))}),e._UZ(1,"mat-icon",20),e.TgZ(2,"span"),e._uU(3),e.qZA()()}if(o&2){const n=e.oxw();e.xp6(3),e.Oqu(n.translate("FieldMenuCaptions.Lookup"))}}function Bt(o,t){if(o&1&&(e.TgZ(0,"button",18),e._UZ(1,"mat-icon",21),e.TgZ(2,"span"),e._uU(3),e.qZA()()),o&2){const n=e.oxw(),a=e.MAs(23);e.Q6J("matMenuTriggerFor",a),e.xp6(3),e.Oqu(n.translate("FieldMenuCaptions.Other"))}}const He=function(){return[1,27,28,29,30]},Gt=function(){return[1,12,27,28,29,30]},Yt=function(){return[1,4,5,6,7,8,9,27,28,29,30,31,32,33,34,40]},Qt=function(){return[12]},$t=function(){return[10]};class V{set value(t){if(this._value=t,this.defaultValue.name=t.name,this._rawValue===""){this.mappingField.setValue("");return}this.fieldCaptionService.buildDisplayValue({schemaName:this.entitySchemaColumn.referenceSchemaName,value:this._rawValue.toString(),type:this.mappingColumnType}).subscribe(n=>{this.mappingField.setValue(n)})}get value(){return(0,A.Z)(this._value)&&(this._value={...this.defaultValue}),this._value}get _rawValue(){return this.mappingService.getMappingColumnDisplayValue(this.value,this.mappingColumnType)}get required(){var t;return((t=this.entitySchemaColumn)===null||t===void 0?void 0:t.isRequired)||!1}get columnCaption(){return this.entitySchemaColumn.caption}get columnName(){return this.entitySchemaColumn.name}get mappingColumnType(){return this.mappingService.getMappingColumnType(this.value,this.entitySchemaColumn.dataValueType)}constructor(t,n,a,i){this.dialogService=t,this.mappingService=n,this.translateService=a,this.fieldCaptionService=i,this._translatePrefix="SocialLeadgen.IntegrationPage.ColumnMapping",this.mappingField=new c.NI("",this.required?[c.kI.required]:[]),this.entitySchemaColumn={referenceSchemaName:"Lead",referenceSchemaUId:"41af89e9-750b-4ebb-8cac-ff39b64841ec",caption:"Empty column caption",isRequired:!1,dataValueType:r.DataValueType.Lookup},this.defaultValue={name:this.entitySchemaColumn.name,value:{const:""}},this.readonly=!1,this.integrationType=_.UNDEFINED,this.mode=we.DEFAULT,this.remove=new e.vpe,this._onChange=s=>{},this._onTouched=()=>{},this.clearField=()=>{this._fireValue({...this.defaultValue})},this.removeField=()=>this.remove.emit()}_fireValue(t){this.value=t,this._onChange(t)}_openDialog(t,n){this.dialogService.open(t,n).subscribe(a=>{a.status===!0&&this._fireValue(this.mappingService.generateMappingColumn(this.columnName,a.type==="lookup"?{value:a.value.value}:a.value,a.type))})}_openFormEditDialog(){const t={width:"350px",data:{caption:this.columnCaption,entitySchemaColumn:this.entitySchemaColumn,extraData:{linkedinAdAccountId:this.linkedinAdAccountId,linkedinFormId:this.linkedinFormId,mode:this.mode}}};this._openDialog(re,t)}_openCustomEditDialog(){const t={width:"350px",data:{caption:this.columnCaption,entitySchemaColumn:this.entitySchemaColumn}};this._openDialog(se,t)}translate(t){return this.translateService.instant(`${this._translatePrefix}.${t}`)}menuItemVisibleFor(t){for(let n=0;n<t.length;n++)if(this.entitySchemaColumn.dataValueType===t[n])return!0;return!1}onMenuItemClick(t){switch(t){case"form_field":this._openFormEditDialog();break;case"text_value":case"lookup_value":this._openCustomEditDialog();break;case"boolean_true":this._fireValue(this.mappingService.generateMappingColumn(this.columnName,{value:!0},"boolean"));break;case"boolean_false":this._fireValue(this.mappingService.generateMappingColumn(this.columnName,{value:!1},"boolean"));break;case"not_mapped_fields":this._fireValue(this.mappingService.generateMappingColumn(this.columnName,{value:xe.NOTMAPPEDFIELDS},"macro"));break;default:throw new Error(`Invalid menu item code: ${t}`)}}writeValue(t){this.value=t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}validate(t){return this._control=t,this.mappingField.errors}ngDoCheck(){!this._control||(this._control.updateValueAndValidity({emitEvent:!1,onlySelf:!1}),this._control.touched?this.mappingField.markAsTouched():this.mappingField.markAsUntouched())}}V.\u0275fac=function(t){return new(t||V)(e.Y36(I.xA),e.Y36(ne),e.Y36(p.sK),e.Y36(ee))},V.\u0275cmp=e.Xpm({type:V,selectors:[["ts-mapping-field"]],inputs:{entitySchemaColumn:"entitySchemaColumn",formControlNameSource:"formControlNameSource",readonly:"readonly",integrationType:"integrationType",value:"value",mode:"mode",linkedinAdAccountId:"linkedinAdAccountId",linkedinFormId:"linkedinFormId"},outputs:{remove:"remove"},features:[e._Bn([{provide:c.JU,useExisting:(0,e.Gpc)(()=>V),multi:!0},{provide:c.Cf,useExisting:V,multi:!0}])],decls:26,vars:22,consts:[["matInput","","type","text","readonly","",3,"required","formControl"],["matSuffix","","class","readonly-icon","svgIcon","read-only",4,"ngIf"],["matSuffix","","class","close-icon","svgIcon","close",3,"click",4,"ngIf"],["matSuffix","","class","thunder-icon","svgIcon","thunder",3,"matMenuTriggerFor",4,"ngIf"],["matSuffix","","class","trash-icon","svgIcon","trash",3,"click",4,"ngIf"],[4,"ngIf"],["setValueMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"matMenuTriggerFor",4,"ngIf"],["booleanMenu","matMenu"],["mat-menu-item","",3,"click"],["otherMenu","matMenu"],["matSuffix","","svgIcon","read-only",1,"readonly-icon"],["matSuffix","","svgIcon","close",1,"close-icon",3,"click"],["matSuffix","","svgIcon","thunder",1,"thunder-icon",3,"matMenuTriggerFor"],["matSuffix","","svgIcon","trash",1,"trash-icon",3,"click"],["svgIcon","selection"],["svgIcon","writing"],["mat-menu-item","",3,"matMenuTriggerFor"],["svgIcon","checked"],["svgIcon","blue-search"],["svgIcon","horizontal-dots"]],template:function(t,n){t&1&&(e.TgZ(0,"mat-form-field")(1,"mat-label"),e._uU(2),e.qZA(),e._UZ(3,"input",0),e.YNc(4,Et,1,0,"mat-icon",1),e.YNc(5,Dt,1,0,"mat-icon",2),e.YNc(6,Zt,1,1,"mat-icon",3),e.YNc(7,Nt,1,0,"mat-icon",4),e.YNc(8,Vt,3,3,"mat-error",5),e.qZA(),e.TgZ(9,"mat-menu",null,6),e.YNc(11,Ut,4,1,"button",7),e.YNc(12,qt,4,1,"button",7),e.YNc(13,Rt,4,2,"button",8),e.YNc(14,Jt,4,1,"button",7),e.YNc(15,Bt,4,2,"button",8),e.qZA(),e.TgZ(16,"mat-menu",null,9)(18,"button",10),e.NdJ("click",function(){return n.onMenuItemClick("boolean_true")}),e._uU(19),e.qZA(),e.TgZ(20,"button",10),e.NdJ("click",function(){return n.onMenuItemClick("boolean_false")}),e._uU(21),e.qZA()(),e.TgZ(22,"mat-menu",null,11)(24,"button",10),e.NdJ("click",function(){return n.onMenuItemClick("not_mapped_fields")}),e._uU(25),e.qZA()()),t&2&&(e.xp6(2),e.Oqu(n.columnCaption),e.xp6(1),e.Q6J("required",n.required)("formControl",n.mappingField),e.xp6(1),e.Q6J("ngIf",n.readonly),e.xp6(1),e.Q6J("ngIf",!n.readonly),e.xp6(1),e.Q6J("ngIf",!n.readonly),e.xp6(1),e.Q6J("ngIf",!n.readonly&&!n.required),e.xp6(1),e.Q6J("ngIf",n.mappingField.invalid),e.xp6(3),e.Q6J("ngIf",n.mode==="DEFAULT"?n.menuItemVisibleFor(e.DdM(16,He)):n.menuItemVisibleFor(e.DdM(17,Gt))),e.xp6(1),e.Q6J("ngIf",n.menuItemVisibleFor(e.DdM(18,Yt))),e.xp6(1),e.Q6J("ngIf",n.menuItemVisibleFor(e.DdM(19,Qt))),e.xp6(1),e.Q6J("ngIf",n.menuItemVisibleFor(e.DdM(20,$t))),e.xp6(1),e.Q6J("ngIf",n.menuItemVisibleFor(e.DdM(21,He))),e.xp6(4),e.hij(" ",n.translate("BooleanValue.True")," "),e.xp6(2),e.hij(" ",n.translate("BooleanValue.False")," "),e.xp6(4),e.hij(" ",n.translate("UnmappedMacroValue")," "))},dependencies:[g.O5,c.Fj,c.JJ,c.Q7,c.oH,Se.W0,Se.tN,Se.D8,f.nI,f.v_,f.$V,f.nX,P.Hw,Pe.k0,p.X$],styles:[".mat-icon[_ngcontent-%COMP%]{height:16px;width:16px;font-size:20px;line-height:20px;cursor:pointer}.thunder-icon[_ngcontent-%COMP%]{height:14px}.readonly-icon[_ngcontent-%COMP%]{display:block!important}mat-form-field[_ngcontent-%COMP%]{width:100%}mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{cursor:default}mat-form-field[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-left:4px;opacity:0}mat-form-field[_ngcontent-%COMP%]:hover   .mat-icon[_ngcontent-%COMP%]{opacity:1}"]});var Xe=l(31177),Ge=l(87241),jt=l(87472),qe=l(78464),zt=l(44113);function Kt(o,t){o&1&&e._UZ(0,"ts-mask")}class ce{constructor(t,n,a,i){this.data=t,this._dialogRef=n,this._processEngineService=a,this._translateService=i,this._modalBoxLocalizableStringSeciton="SocialLeadgen.IntegrationPage.DownloadLeads.ModalBox",this.maxDate=new Date,this.isLoading=!1,this.loadingDatesRange={startDate:(0,C.b7Q)(new Date),endDate:(0,C.iXC)(new Date)}}_getConfigForBusinessProcess(){return{StartDate:(0,r.toLocalISOString)(this.loadingDatesRange.startDate),EndDate:(0,r.toLocalISOString)(this.loadingDatesRange.endDate),IntegrationId:this.data.integrationId,FormId:this.data.formId}}onActionCancel(){this._dialogRef.close({isCanceled:!0})}onActionDownload(){this.isLoading=!0,this._processEngineService.executeProcessByName("SocialLeadGeneration_LoadingLeads",this._getConfigForBusinessProcess()).subscribe(t=>{let n;if(t&&t.success)n=this._translateService.instant(`${this._modalBoxLocalizableStringSeciton}.SuccessRunBusinessProcessInfoText`);else{if(!t)throw new jt.K;!t.success&&t.message&&(n=t.message)}this._dialogRef.close({dialogMessage:n??this._translateService.instant(`${this._modalBoxLocalizableStringSeciton}.UnknownFailedRunBusinessProcessInfoText`)}),this.isLoading=!1})}}ce.\u0275fac=function(t){return new(t||ce)(e.Y36(D.eJ),e.Y36(D.hV),e.Y36(Ke.zV),e.Y36(p.sK))},ce.\u0275cmp=e.Xpm({type:ce,selectors:[["ts-download-leads-modal-box"]],decls:20,vars:17,consts:[[4,"ngIf"],[1,"download-leads-container"],["mat-dialog-content",""],[1,"title"],[1,"time-picker-block"],[3,"startDateRequired","endDateRequired","maxDate","value","valueChange"],[1,"info-block"],["svgIcon","important-info",1,"info-block-title-icon"],[1,"info-text"],["mat-dialog-actions",""],["mat-flat-button","","color","primary",3,"click"],["mat-button","","cdkFocusInitial","",3,"click"]],template:function(t,n){t&1&&(e.YNc(0,Kt,1,0,"ts-mask",0),e.TgZ(1,"div",1)(2,"div",2)(3,"span",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",4)(7,"ts-date-range",5),e.NdJ("valueChange",function(i){return n.loadingDatesRange=i}),e.qZA()(),e.TgZ(8,"div",6),e._UZ(9,"mat-icon",7),e.TgZ(10,"span",8),e._uU(11),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",9)(14,"button",10),e.NdJ("click",function(){return n.onActionDownload()}),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"button",11),e.NdJ("click",function(){return n.onActionCancel()}),e._uU(18),e.ALo(19,"translate"),e.qZA()()()),t&2&&(e.Q6J("ngIf",n.isLoading),e.xp6(4),e.hij("",e.lcZ(5,9,"SocialLeadgen.IntegrationPage.DownloadLeads."+(n.data.formId?"ForForm":"ForAdAccount")+".ModalBoxTitle")," "),e.xp6(3),e.Q6J("startDateRequired",!0)("endDateRequired",!0)("maxDate",n.maxDate)("value",n.loadingDatesRange),e.xp6(4),e.hij(" ",e.lcZ(12,11,"SocialLeadgen.IntegrationPage.DownloadLeads.ModalBox.InformationText")," "),e.xp6(4),e.hij(" ",e.lcZ(16,13,"SocialLeadgen.IntegrationPage.DownloadLeads.ModalBox.DownloadButtonCaption")," "),e.xp6(3),e.hij(" ",e.lcZ(19,15,"SocialLeadgen.IntegrationPage.DownloadLeads.ModalBox.CancelButtonCaption")," "))},dependencies:[g.O5,x.eB,qe.g,P.Hw,zt.S,p.X$],styles:["[mat-dialog-content][_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;height:100%}[mat-dialog-content][_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;font-family:Bpmonline Open Sans,sans-serif;line-height:18px}[mat-dialog-content][_ngcontent-%COMP%]   .time-picker-block[_ngcontent-%COMP%]{height:32px;margin-top:9px}[mat-dialog-content][_ngcontent-%COMP%]   .info-block[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:8px}[mat-dialog-content][_ngcontent-%COMP%]   .info-block[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{vertical-align:middle}[mat-dialog-content][_ngcontent-%COMP%]   .info-block[_ngcontent-%COMP%]   .info-block-title-icon[_ngcontent-%COMP%]{height:16px;width:16px;vertical-align:middle}[mat-dialog-actions][_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse}[mat-dialog-actions] button[_ngcontent-%COMP%]{margin-left:10px}"]});const Ht=function(o,t,n,a){return{blankslate:o,message:t,success:n,error:a}};function Xt(o,t){if(o&1&&(e.ynx(0),e.TgZ(1,"div",4),e._uU(2),e.qZA(),e.BQk()),o&2){const n=t.$implicit;e.xp6(1),e.Q6J("ngClass",e.l5B(2,Ht,n.type==="BLANKSLATE",n.type==="ERROR"||n.type==="SUCCESS",n.type==="SUCCESS",n.type==="ERROR")),e.xp6(1),e.Oqu(n.message)}}var le;(function(o){o.BLANKSLATE="BLANKSLATE",o.ERROR="ERROR",o.SUCCESS="SUCCESS"})(le||(le={}));class de{constructor(){this.messages=[]}get headerCssClass(){var t;const n="general";let a=n;return(t=this.messages)===null||t===void 0||t.every(i=>{const s=i.type===this.messages[0].type,d=i.type===le.BLANKSLATE?n:i.type.toLowerCase();return a=s?d:n,s}),a}}de.\u0275fac=function(t){return new(t||de)},de.\u0275cmp=e.Xpm({type:de,selectors:[["ts-integration-sync-info"]],inputs:{messages:"messages"},decls:6,vars:5,consts:[[1,"integration-sync-info",3,"ngClass"],[1,"header"],[1,"content"],[4,"ngFor","ngForOf"],[1,"content-row",3,"ngClass"]],template:function(t,n){t&1&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",2),e.YNc(5,Xt,3,7,"ng-container",3),e.qZA()()),t&2&&(e.Q6J("ngClass",n.headerCssClass),e.xp6(2),e.Oqu(e.lcZ(3,3,"SocialLeadgen.IntegrationPage.IntegrationSyncInfo.Header")),e.xp6(3),e.Q6J("ngForOf",n.messages))},dependencies:[g.mk,g.sg,p.X$],styles:['.integration-sync-info[_ngcontent-%COMP%]{width:100%;border:0px solid white;border-radius:8px!important;display:flex;flex-direction:column;transition:all .5s ease}.integration-sync-info.general[_ngcontent-%COMP%]{background:url(purple-background.009ee3996c01efd7.svg)}.integration-sync-info.error[_ngcontent-%COMP%]{background:url(orange-background.2c7136644124656c.svg)}.integration-sync-info.success[_ngcontent-%COMP%]{background:url(green-background.ed26c08683dbe6a0.svg)}.integration-sync-info[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:block;color:#fff;background-color:transparent;font-family:Bpmonline Open Sans Light,serif;font-size:16px;padding:8px}.integration-sync-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;height:100%;box-sizing:border-box;border-radius:8px!important;padding:8px;background-color:#fff;border:0px solid white;display:flex;flex-direction:column;align-items:center}.integration-sync-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .content-row[_ngcontent-%COMP%]{position:relative}.integration-sync-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .content-row.blankslate[_ngcontent-%COMP%]{text-align:center;font-family:Bpmonline Open Sans Light,serif;font-size:18px;line-height:24px;letter-spacing:0px;color:#757575;opacity:1;width:344px;margin-top:41px;margin-bottom:58px}.integration-sync-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .content-row.message[_ngcontent-%COMP%]{text-align:left;font-family:Bpmonline Open Sans,serif;font-size:13px;letter-spacing:0px;color:#181818;opacity:1;width:calc(100% - 16px);padding-left:16px;box-sizing:border-box;margin-top:14px;margin-bottom:14px}.integration-sync-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .content-row.message.error[_ngcontent-%COMP%]:before, .integration-sync-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .content-row.message.success[_ngcontent-%COMP%]:before{content:"";position:absolute;width:8px;height:8px;border-radius:50%;display:block;left:0;top:6px}.integration-sync-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .content-row.message.error[_ngcontent-%COMP%]:before{background-color:#df1f26}.integration-sync-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .content-row.message.success[_ngcontent-%COMP%]:before{background-color:#22ac14}'],changeDetection:0});var Wt=l(14581),Ye=l(74970);const en=["iframe"];class j{get header(){return this.data.provideAccess?this.translateService.instant(`${this._socialMediaProviderLocalizableStringSection}.RestoreAccess`):this.translateService.instant(`${this._socialMediaProviderLocalizableStringSection}.New`)}constructor(t,n,a,i,s){this.translateService=t,this.userInfo=n,this.leadgenService=a,this.dialogRef=i,this.data=s,this._socialMediaProviderLocalizableStringSection="SocialLeadgen.SocialMediaProvider",this._defaultUserCulture="en-US"}_getUserCulture(){var t,n;return(n=(t=this.userInfo)===null||t===void 0?void 0:t.cultureInfo)===null||n===void 0?void 0:n.sysCultureName}_setupIframeSettings(t,n){var a;let i;const s=(a=this._getUserCulture())!==null&&a!==void 0?a:this._defaultUserCulture;if(this.data.provideAccess){const m=`${this.data.socialNetworkType}/provide-access`;i=`${t}/app/v2/${m}?locale=${s}&dir=ltr&session_token=${n}`}else i=`${t}/app/v2?locale=${s}&dir=ltr&session_token=${n}`;this._iframe.nativeElement.src=i}_setupIframeMessageHandler(){const t=(0,Wt.R)(window,"message");this._windowMessageSubscription=t.pipe((0,Ye.h)(n=>{var a;return((a=n.data)===null||a===void 0?void 0:a.type)==="socialMediaProvider"})).subscribe(n=>{const a=n.data.data;(0,A.Z)(a)?this.dialogRef.close({status:"CANCEL"}):this.dialogRef.close({status:"OK",type:this.data.socialNetworkType||a.socialNetworkType,data:a})})}ngAfterViewInit(){this._setupIframeMessageHandler(),this.leadgenService.generateSessionToken().subscribe(t=>{this._setupIframeSettings(t.accountServiceUrl,t.sessionToken)})}ngOnDestroy(){this._windowMessageSubscription.unsubscribe()}}j.\u0275fac=function(t){return new(t||j)(e.Y36(p.sK),e.Y36(C.aoG),e.Y36(S),e.Y36(D.hV),e.Y36(D.eJ))},j.\u0275cmp=e.Xpm({type:j,selectors:[["ts-social-media-provider-modal-box"]],viewQuery:function(t,n){if(t&1&&e.Gf(en,5),t&2){let a;e.iGM(a=e.CRH())&&(n._iframe=a.first)}},decls:7,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"content-wrapper"],["title","Social connector",1,"iframe"],["iframe",""],[1,"spinner"],["mode","indeterminate","diameter","32",1,"mask-element"]],template:function(t,n){t&1&&(e.TgZ(0,"span",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e._UZ(3,"iframe",2,3),e.TgZ(5,"div",4),e._UZ(6,"mat-spinner",5),e.qZA()()),t&2&&(e.xp6(1),e.Oqu(n.header))},dependencies:[Te.sN],styles:["[_nghost-%COMP%]{height:100%;padding:0}[_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .iframe[_ngcontent-%COMP%]{position:relative;border:none;width:100%;height:100%;z-index:1}[_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{position:absolute;width:200px;height:200px;top:calc(50% - 100px);left:calc(50% - 100px);display:flex;flex-direction:column;align-items:center;justify-content:center}[_nghost-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:200px;height:200px}"]});function tn(o,t){o&1&&e._UZ(0,"ts-mask")}function nn(o,t){if(o&1){const n=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.save())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}o&2&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"BasePageComponent.Apply")," "))}function an(o,t){if(o&1){const n=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.cancel())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}o&2&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"BasePageComponent.Cancel")," "))}function on(o,t){if(o&1){const n=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.close())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}o&2&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"BasePageComponent.Close")," "))}function sn(o,t){if(o&1&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),o&2){const n=e.oxw();e.xp6(1),e.hij(" ",n.getElementValidationMessage("name")," ")}}function rn(o,t){if(o&1){const n=e.EpF();e.TgZ(0,"ts-facebook-integration-form",38),e.NdJ("setupIntegration",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.setupIntegration("facebook"))})("setIsChanged",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.setIsChanged())}),e.qZA()}if(o&2){const n=e.oxw();e.Q6J("parent",n.leadgenIntegrationForm)}}function cn(o,t){if(o&1){const n=e.EpF();e.TgZ(0,"ts-linkedin-integration-form",39),e.NdJ("setupIntegration",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.setupIntegration("linkedin"))})("setIsChanged",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.setIsChanged())}),e.qZA()}if(o&2){const n=e.oxw();e.Q6J("parent",n.leadgenIntegrationForm)("enableSetupIntegrationAction",n.unableToAdAccountAccess)}}function ln(o,t){if(o&1){const n=e.EpF();e.TgZ(0,"div",40),e._UZ(1,"mat-icon",41),e.TgZ(2,"span",42),e._uU(3),e.qZA(),e.TgZ(4,"button",37),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.setupIntegration())}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}if(o&2){const n=e.oxw();e.xp6(3),e.Oqu(n.getIntegrationNotSetDescription()),e.xp6(2),e.hij(" ",e.lcZ(6,2,"SocialLeadgen.IntegrationPage.IntegrationSettings.Create")," ")}}function dn(o,t){o&1&&e._UZ(0,"div")}function gn(o,t){if(o&1&&(e.TgZ(0,"div",46),e._UZ(1,"div",47),e.TgZ(2,"div",48)(3,"span",49),e._uU(4),e.qZA()(),e.TgZ(5,"div",50)(6,"span",51),e._uU(7),e.qZA()()()),o&2){const n=e.oxw(2);e.xp6(4),e.hij(" ",n.blankslateTitle," "),e.xp6(3),e.hij(" ",n.blankslateDescription," ")}}function pn(o,t){if(o&1&&e._UZ(0,"ts-object-column-mapping",66),o&2){const n=e.oxw(4);e.Q6J("formControl",n.customMapping)("ngClass","custom-mapping")("mode","FORM")("linkedinAdAccountId",n.linkedinAdAccountId)("linkedinFormId",n.selectedFormMapping.id)}}function un(o,t){o&1&&(e.TgZ(0,"div",46),e._UZ(1,"div",67),e.TgZ(2,"span",68),e._uU(3),e.ALo(4,"translate"),e.qZA()()),o&2&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"SocialLeadgen.IntegrationPage.FormsList.BlankSlate.Description")," "))}function mn(o,t){if(o&1){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",56)(2,"span"),e._uU(3),e.qZA(),e._UZ(4,"ts-info-tooltip-icon",30),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",54)(7,"div",57)(8,"button",58),e.NdJ("click",function(){e.CHM(n);const i=e.oxw(3);return e.KtG(i.onActionDownloadLeads(i.selectedFormMapping.id))}),e._UZ(9,"mat-icon",59),e.TgZ(10,"span"),e._uU(11),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"div",60)(14,"span",61),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"span",62),e._uU(18),e.qZA()()(),e.TgZ(19,"mat-checkbox",63),e.NdJ("change",function(i){e.CHM(n);const s=e.oxw(3);return e.KtG(s.onUseCustomMappingChanged(i.checked))}),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.YNc(22,pn,1,5,"ts-object-column-mapping",64),e.YNc(23,un,5,3,"div",65),e.qZA(),e.BQk()}if(o&2){const n=e.oxw(3);e.xp6(3),e.Oqu(n.selectedFormMapping.name),e.xp6(1),e.Q6J("message",e.lcZ(5,10,"SocialLeadgen.IntegrationPage.FormsList.Hint")),e.xp6(7),e.Oqu(e.lcZ(12,12,"SocialLeadgen.IntegrationPage.DownloadLeads.ForForm.ButtonCaption")),e.xp6(4),e.hij("",e.lcZ(16,14,"SocialLeadgen.IntegrationPage.FormsList.LinkedInStatus"),":"),e.xp6(3),e.Oqu(n.translateFormStatus(n.selectedFormMapping.linkedInStatus)),e.xp6(1),e.Q6J("ngClass","custom-mapping-checkbox")("checked",n.selectedFormMapping.useCustomMapping),e.xp6(1),e.hij(" ",e.lcZ(21,16,"SocialLeadgen.IntegrationPage.FormsList.MappingType.CustomMapping")," "),e.xp6(2),e.Q6J("ngIf",n.selectedFormMapping.useCustomMapping),e.xp6(1),e.Q6J("ngIf",!n.selectedFormMapping.useCustomMapping)}}function _n(o,t){if(o&1){const n=e.EpF();e.TgZ(0,"div",52)(1,"div",53)(2,"span",1),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",54)(6,"ts-forms-list",55),e.NdJ("changeFormSelection",function(i){e.CHM(n);const s=e.oxw(2);return e.KtG(s.changeFormSelection(i))})("changeFormActivation",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.changeFormActivation())}),e.qZA()()(),e.TgZ(7,"div",53),e.YNc(8,mn,24,18,"ng-container",0),e.qZA()()}if(o&2){const n=e.oxw(2);e.xp6(3),e.Oqu(e.lcZ(4,4,"SocialLeadgen.IntegrationPage.FormsList.Header")),e.xp6(3),e.Q6J("forms",n.forms)("canChangeFormSelection",n.canChangeFormSelection),e.xp6(2),e.Q6J("ngIf",n.selectedFormMapping)}}function hn(o,t){if(o&1&&(e.ynx(0),e.YNc(1,dn,1,0,"div",43),e.YNc(2,gn,8,2,"ng-template",null,44,e.W1O),e.YNc(4,_n,9,6,"ng-template",null,45,e.W1O),e.BQk()),o&2){const n=e.MAs(3),a=e.MAs(5),i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.isEmptyForms||i.unableToAdAccountAccess)("ngIfThen",n)("ngIfElse",a)}}const We=function(){return["/SocialLeadgen/settings"]},fn=function(){return{}},Cn=function(){return{tab:"logs"}};class U extends b.neP{get linkedinAdAccountId(){var t,n;return(n=(t=this.model.metadata)===null||t===void 0?void 0:t.linkedIn)===null||n===void 0?void 0:n.linkedInAdAccountId}get defaultMapping(){var t,n;const a=this.model.metadata;switch(this.leadgenIntegrationType){case _.FACEBOOK:return((t=a?.facebook)===null||t===void 0?void 0:t.mapping)||null;case _.LINKEDIN:return((n=a?.linkedIn)===null||n===void 0?void 0:n.mapping)||null}}get blankslateTitle(){const t=`${this._integrationPageLocalizableStringSection}.BlankSlate`;if(this.unableToAdAccountAccess)return this.translateInstant(`${t}Error.Title`);if(this.isEmptyForms)return this.translateInstant(`${t}.Title`)}get blankslateDescription(){const t=`${this._integrationPageLocalizableStringSection}.BlankSlate`;if(this.unableToAdAccountAccess)return this.translateInstant(`${t}Error.Description`);if(this.isEmptyForms)return this.translateInstant(`${t}.Description`)}get forms(){var t,n;const a=this.model.metadata;switch(this.leadgenIntegrationType){case _.FACEBOOK:return((t=a?.facebook)===null||t===void 0?void 0:t.forms)||[];case _.LINKEDIN:return((n=a?.linkedIn)===null||n===void 0?void 0:n.forms)||[]}}set forms(t){const n=this.model.metadata;switch(this.leadgenIntegrationType){case _.FACEBOOK:n.facebook.forms=t;break;case _.LINKEDIN:n.linkedIn.forms=t;break}}get isEmptyForms(){return(0,A.Z)(this.forms)}constructor(t,n,a,i,s,d,m,O){super(t),this.injector=t,this.userInfo=n,this.dialogService=a,this._leadgenService=i,this._formValidationService=s,this._linkedinFormStatusService=d,this._dataService=m,this._detectChangesService=O,this._integrationPageLocalizableStringSection="SocialLeadgen.IntegrationPage",this._noWhitespacesValidationRegex="^.*\\S+.*$",this._isPanelExpanded=!0,this._isLogsPanelExpanded=!0,this._downloadLeadsModalBoxDefaultConfig={width:"420px",height:"auto",minWidth:"420px",data:{}},this.unableToAdAccountAccess=!1,this.entitySchemas=[],this.leadSyncInformationMessages=[],this.customMapping=new c.p4({}),this._validateCustomMapping=h=>new Ge.y(y=>{this.customMapping.markAsTouched(),setTimeout(()=>{var T,v;const w=!((T=this.customMapping)===null||T===void 0)&&T.validator?!(!((v=this.customMapping)===null||v===void 0)&&v.validator(this.customMapping)):!0;if(w)this.customMapping.markAsUntouched();else if(h===!0){const ga=this.translateInstant(`${this._integrationPageLocalizableStringSection}.Error.FormSelection`);this.dialogService.openInfoDialog(ga)}y.next(w),y.complete()},1)}),this._validateForm=h=>new Ge.y(y=>{this.leadgenIntegrationForm.markAllAsTouched(),this.leadgenIntegrationForm.updateValueAndValidity(),setTimeout(()=>{const T=this.leadgenIntegrationForm.valid;if(!T&&h){const v=this.translateInstant(`${this._integrationPageLocalizableStringSection}.Error.Save`);this.dialogService.openInfoDialog(v)}y.next(T),y.complete()},1)}),this.getGtmSchemaName=()=>"LeadgenSetupPage",this.getModelFromLoadResponse=h=>h.integrationData,this.requestPageData=()=>this._leadgenService.getIntegration(this.id).pipe((0,ke.b)(h=>this.unableToAdAccountAccess=!h.actualizeLinkedInFormsSuccess)),this.onModelSet=h=>this._applyModelData(h),this.isInvalidElement=h=>this._formValidationService.isInvalidElement(this.leadgenIntegrationForm,h),this.getElementValidationMessage=h=>this._formValidationService.getElementValidationMessage(this.leadgenIntegrationForm,h),this.canChangeFormSelection=()=>this._validateCustomMapping(!0),this.changeFormActivation=()=>this.setIsChanged(),this.translateFormStatus=h=>h?this._linkedinFormStatusService.translateStatus(h):"",this.reload=()=>window.location.reload()}_initUserCulture(){this._userCulture=this.userInfo.cultureInfo.sysCultureName}_buildForm(){this.leadgenIntegrationForm=new c.nJ({name:new c.p4("",[c.kI.required,c.kI.maxLength(255),c.kI.pattern(this._noWhitespacesValidationRegex)]),isActive:new c.p4(!0),mapping:new c.p4(this._getDefaultMappingObject())}),this._addIntegrationForm()}_getDefaultMappingObject(){return{entitySchemaName:"Lead",columns:[]}}_addIntegrationForm(){switch(this.needToCreateIntegration=!1,this.leadgenIntegrationType){case _.FACEBOOK:this._addFacebookIntegrationForm();break;case _.LINKEDIN:this._addLinkedinIntegrationForm();break;default:break}}_addFacebookIntegrationForm(){const t=new c.cw({facebookPageId:new c.p4({disabled:!this.isNew,value:null},[c.kI.required])});this.leadgenIntegrationForm.addControl("facebookIntegrationForm",t)}_addLinkedinIntegrationForm(){const t=new c.cw({linkedinAdAccountId:new c.p4({disabled:!0,value:null},[c.kI.required])});this.leadgenIntegrationForm.addControl("linkedinIntegrationForm",t)}_applyModelData(t){const n=this._extractMetadataValue(t);this.leadgenIntegrationForm.patchValue({name:t.name,isActive:t.isActive,...n}),this.pageTitle=t.name,this.modelSnap=(0,Xe.Z)(t),this._dataService.setValue({key:"default-mapping-object-name",value:n.mapping.entitySchemaName}),this._onFormValueChange(),this._calculateIntegrationSyncInfoMessages()}_extractMetadataValue(t){var n,a;switch(this.leadgenIntegrationType){case _.FACEBOOK:{const i=(n=t?.metadata)===null||n===void 0?void 0:n.facebook;return{facebookIntegrationForm:{facebookPageId:i?.facebookPageId},mapping:i?.mapping}}case _.LINKEDIN:{const i=(a=t?.metadata)===null||a===void 0?void 0:a.linkedIn;return{linkedinIntegrationForm:{linkedinAdAccountId:i?.linkedInAdAccountId},mapping:i?.mapping}}default:return null}}_onFormValueChange(){switch(this._subscribeOnValueChange(this.leadgenIntegrationForm,"name",t=>{this.model.name=t,this.pageTitle=t,this.setIsChanged()}),this._subscribeOnValueChange(this.leadgenIntegrationForm,"isActive"),this.leadgenIntegrationType){case _.FACEBOOK:this._onFacebookIntegrationFormValueChange();break;case _.LINKEDIN:this._onLinkedinIntegrationFormValueChange();break;default:break}}_onLinkedinIntegrationFormValueChange(){this._subscribeOnValueChange(this.leadgenIntegrationForm,"mapping",t=>{this.setIsChanged(),this._dataService.setValue({key:"default-mapping-object-name",value:t.entitySchemaName}),this.model.metadata.linkedIn.mapping=t}),this._subscribeOnValueChange(this.leadgenIntegrationForm.get("linkedinIntegrationForm"),"linkedinAdAccountId",t=>{this.setIsChanged(),this.model.metadata.linkedIn.linkedInAdAccountId=t})}_onFacebookIntegrationFormValueChange(){this._subscribeOnValueChange(this.leadgenIntegrationForm,"mapping",t=>{this.setIsChanged(),this._dataService.setValue({key:"default-mapping-object-name",value:t.entitySchemaName}),this.model.metadata.facebook.mapping=t}),this._subscribeOnValueChange(this.leadgenIntegrationForm.get("facebookIntegrationForm"),"facebookPageId",t=>{this.setIsChanged(),this.model.metadata.facebook.facebookPageId=t})}_subscribeOnValueChange(t,n,a){const i=function(s){this.model[n]=s,this.setIsChanged()};a===void 0?t.get(n).valueChanges.subscribe(i.bind(this)):t.get(n).valueChanges.subscribe(a.bind(this))}_readRoutingParameters(){var t,n;const a=this.activateRoute.snapshot.params,i=((t=a.id)===null||t===void 0?void 0:t.toUpperCase())||null,s=((n=a.type)===null||n===void 0?void 0:n.toUpperCase())||null;this.id=i,this.isNew=i==="NEW",this.needToCreateIntegration=this.isNew,this.leadgenIntegrationType=_[s]}_createLinkedInDefaultIntegration(){return{name:this._getDefaultIntegrationRecordName(),isActive:!0,type:this.leadgenIntegrationType,metadata:{linkedIn:{mapping:this._getDefaultMappingObject(),forms:[]}}}}_getLinkedInFormMapping(t){return this._leadgenService.getLinkedInFormList(t).pipe((0,u.U)(n=>n.forms.map(a=>({id:a.id.toString(),name:a.name,linkedInCreatedTime:a.linkedInCreatedTime,linkedInStatus:a.linkedInStatus,isActive:!0,useCustomMapping:!1,mapping:null}))))}_loadLinkedInNewRecordPageData(){const t=this.activateRoute.snapshot.queryParams.adaccountid,n=this._createLinkedInDefaultIntegration(),a=i=>{this.model=(0,Xe.Z)(i),this.setIsChanged(),this._calculateIntegrationSyncInfoMessages(),this.isLoading=!1};t?(n.metadata.linkedIn.linkedInAdAccountId=t,this._getLinkedInFormMapping(t).subscribe(i=>{n.metadata.linkedIn.forms=i,a(n)})):a(n)}_loadPageData(){if(this.isNew)switch(this.leadgenIntegrationType){case _.LINKEDIN:this._loadLinkedInNewRecordPageData();break;case _.FACEBOOK:break}else super.loadInitialPageData()}_getDefaultIntegrationRecordName(){const t=this._integrationPageLocalizableStringSection+".IntegrationSettings";return this.translateInstant(`${t}.DefaultIntegrationRecordName`)}_subscribeOnCustomMappingField(){this._customMappingSubscription=this.customMapping.valueChanges.subscribe(t=>{this.selectedFormMapping.mapping=t,this.setIsChanged()})}_calculateIntegrationSyncInfoMessages(){const t=n=>{const a=`${this._integrationPageLocalizableStringSection}.IntegrationSyncInfo.${n}`;return this.translateInstant(a)};if(this.isNew){this.leadSyncInformationMessages=[{message:t("SaveIntegration"),type:le.BLANKSLATE}];return}if(this.unableToAdAccountAccess){this.leadSyncInformationMessages=[{message:t("UnableToAdAccountAccess"),type:le.ERROR}];return}this.model.isActive?this.leadSyncInformationMessages=[{message:t("SubscriptionActive"),type:le.SUCCESS}]:this.leadSyncInformationMessages=[{message:t("SubscriptionInactive"),type:le.ERROR}]}savePageData(t){if(this.isNew){const n=(0,r.generateGuid)();return this.model.id=n,this.id=n,this._leadgenService.createIntegration(t).pipe((0,ke.b)(()=>{this.isNew=!1}),(0,G.K)(a=>(0,M.of)(a.error)))}else return this._leadgenService.updateLeadgenIntegration(t).pipe((0,G.K)(n=>(0,M.of)(n.error)))}selectedCustomMapping(t){switch(this.leadgenIntegrationType){case _.FACEBOOK:return this.model.metadata.facebook.forms.filter(n=>n.id===t);case _.LINKEDIN:return this.model.metadata.linkedIn.forms.filter(n=>n.id===t)}}save(){const t=this._validateForm(!1),n=this._validateCustomMapping(!1);(0,Ve.D)([t,n]).subscribe(a=>{if(a[0]&&a[1])super.save();else{const i=this.translateInstant(`${this._integrationPageLocalizableStringSection}.Error.Save`);this.dialogService.openInfoDialog(i)}})}cancel(){this.loadModelFromSnap();const t=this.leadgenIntegrationForm.controls;Object.keys(t).forEach(a=>{this.leadgenIntegrationForm.controls[a].markAsUntouched()}),this.isChanged=!1,this._calculateIntegrationSyncInfoMessages()}setupIntegration(t){this.dialogService.open(j,{width:"800px",height:"560px",minWidth:"800px",minHeight:"560px",data:{provideAccess:!0,socialNetworkType:t}}).subscribe(n=>{(0,A.Z)(n)||n.status==="OK"&&n.data.accessProvided&&this.reload()})}getIntegrationNotSetDescription(){const t=this._integrationPageLocalizableStringSection+".IntegrationSettings";switch(this.leadgenIntegrationType){case _.FACEBOOK:return this.translateInstant(`${t}.FacebookIsNotSet`);case _.LINKEDIN:return this.translateInstant(`${t}.LinkedInIsNotSet`);case _.UNDEFINED:throw new Error("Invalid integration type")}}getIsPanelExpanded(){return this._isPanelExpanded}getIsLogsPanelExpanded(){return this._isLogsPanelExpanded}toggleIsPanelExpanded(){this._isPanelExpanded=!this._isPanelExpanded}toggleIsLogsPanelExpanded(){this._isLogsPanelExpanded=!this._isLogsPanelExpanded}onUseCustomMappingChanged(t){if(this.selectedFormMapping.useCustomMapping=t,!this.selectedFormMapping.mapping){const n=this.leadgenIntegrationForm.get("mapping").value;this.customMapping.setValue(n)}this._detectChangesService.changes.next({componentName:this.constructor.name}),this.setIsChanged()}changeFormSelection(t){this.selectedFormMapping=t,this._customMappingSubscription.unsubscribe(),this.customMapping.setValue(t.mapping),this._subscribeOnCustomMappingField()}onIntegrationActiveChanged(t){if(t.source.checked===!0)return;const n=this.translateInstant(`${this._integrationPageLocalizableStringSection}.Detail.DeactivateConfirmationQuestion`);this.dialogService.openConfirmationDialog(n).subscribe(a=>{a===I.rM.result&&(this.model.isActive=!0)})}onActionDownloadLeads(t){const n={integrationId:this.id,formId:t},a={...this._downloadLeadsModalBoxDefaultConfig,data:n};this.dialogService.open(ce,a).subscribe(i=>{i&&!i.isCanceled&&this.dialogService.openInfoDialog(i.dialogMessage)})}ngOnInit(){this._initUserCulture(),this._readRoutingParameters(),this._buildForm(),this._loadPageData(),this._subscribeOnCustomMappingField()}}U.\u0275fac=function(t){return new(t||U)(e.Y36(e.zs3),e.Y36(C.aoG),e.Y36(I.xA),e.Y36(S),e.Y36(L),e.Y36(te),e.Y36(Y),e.Y36(N))},U.\u0275cmp=e.Xpm({type:U,selectors:[["ts-integration-page"]],features:[e.qOj],decls:63,vars:59,consts:[[4,"ngIf"],[1,"header"],[1,"pane"],[3,"title"],["class","action-button","mat-flat-button","","color","accent",3,"click",4,"ngIf"],["class","action-button","mat-flat-button","","color","primary",3,"click",4,"ngIf"],["mat-button","",1,"action-button",3,"routerLink","queryParams"],["mat-button","",1,"action-button",3,"disabled","click"],[1,"page-content-wrapper"],[1,"page-content"],[1,"left-bar-wrapper"],[1,"left-bar"],[3,"messages"],[1,"integration-pane","pane"],[3,"formGroup"],[1,"activated-record"],[3,"ngClass"],["matInput","","type","text","formControlName","name","required","",3,"readonly","keypress"],["matSuffix","","svgIcon","read-only",1,"readonly-icon"],[1,"toggle"],["matInput","","hidden",""],["formControlName","isActive",3,"disabled","checked","change"],[1,"mat-form-field-label","label"],[3,"parent","setupIntegration","setIsChanged",4,"ngIf"],[3,"parent","enableSetupIntegrationAction","setupIntegration","setIsChanged",4,"ngIf"],[3,"hideToggle","onExpanded"],["expansion-panel-header","",1,"expansion-panel-header"],[1,"expansion-panel-header-container"],[1,"expansion-panel-icon",3,"svgIcon"],[1,"expansion-panel-header-title"],[1,"info-tooltip",3,"message"],["expansion-panel-content",""],["formControlName","mapping",3,"mode","readonly","linkedinAdAccountId","setIsChanged"],[3,"integrationId"],["class","setup-integration",4,"ngIf"],[1,"main-content","pane"],["mat-flat-button","","color","accent",1,"action-button",3,"click"],["mat-flat-button","","color","primary",1,"action-button",3,"click"],[3,"parent","setupIntegration","setIsChanged"],[3,"parent","enableSetupIntegrationAction","setupIntegration","setIsChanged"],[1,"setup-integration"],["svgIcon","empty-info",1,"ledgen-integration-pane-icon"],[1,"info-block-text"],[4,"ngIf","ngIfThen","ngIfElse"],["blankslate",""],["formsTemplate",""],[1,"blankslate-pane"],[1,"sad-cat"],[1,"blank-slate-title"],["data-qa","integration-blank-slate-title"],[1,"blank-slate-description"],["data-qa","integration-blank-slate-description"],[1,"forms-pane"],[1,"form-pane-column"],[1,"body"],[3,"forms","canChangeFormSelection","changeFormSelection","changeFormActivation"],[1,"header","horizontal-container"],[1,"horizontal-container"],["mat-button","",1,"default",3,"click"],["svgIcon","refresh-icon"],[1,"form-status"],[1,"label"],[1,"value"],[3,"ngClass","checked","change"],[3,"formControl","ngClass","mode","linkedinAdAccountId","linkedinFormId",4,"ngIf"],["class","blankslate-pane",4,"ngIf"],[3,"formControl","ngClass","mode","linkedinAdAccountId","linkedinFormId"],[1,"blank-slate-icon"],["data-qa","blank-slate-description",1,"blank-slate-description"]],template:function(t,n){t&1&&(e.YNc(0,tn,1,0,"ts-mask",0),e.TgZ(1,"div",1)(2,"div",2)(3,"ts-header",3),e.YNc(4,nn,3,3,"button",4),e.YNc(5,an,3,3,"button",5),e.YNc(6,on,3,3,"button",5),e.TgZ(7,"button",6),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"button",6),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"button",7),e.NdJ("click",function(){return n.onActionDownloadLeads()}),e._uU(14),e.ALo(15,"translate"),e.qZA()()()(),e.TgZ(16,"div",8)(17,"div",9)(18,"div",10)(19,"div",11),e._UZ(20,"ts-integration-sync-info",12),e.TgZ(21,"div",13)(22,"form",14)(23,"div",15)(24,"mat-form-field",16)(25,"mat-label"),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"input",17),e.NdJ("keypress",function(){return n.setIsChanged()}),e.qZA(),e._UZ(29,"mat-icon",18),e.YNc(30,sn,2,1,"mat-error",0),e.qZA(),e.TgZ(31,"mat-form-field",19),e._UZ(32,"textarea",20),e.TgZ(33,"mat-slide-toggle",21),e.NdJ("change",function(i){return n.onIntegrationActiveChanged(i)}),e.qZA(),e.TgZ(34,"span",22),e._uU(35),e.ALo(36,"translate"),e.ALo(37,"translate"),e.qZA()()(),e.YNc(38,rn,1,1,"ts-facebook-integration-form",23),e.YNc(39,cn,1,2,"ts-linkedin-integration-form",24),e.TgZ(40,"ts-expansion-panel",25),e.NdJ("onExpanded",function(){return n.toggleIsPanelExpanded()}),e.TgZ(41,"div",26)(42,"div",27),e._UZ(43,"mat-icon",28),e.TgZ(44,"span",29),e._uU(45),e.ALo(46,"translate"),e.qZA()(),e._UZ(47,"ts-info-tooltip-icon",30),e.ALo(48,"translate"),e.qZA(),e.TgZ(49,"div",31)(50,"ts-object-column-mapping",32),e.NdJ("setIsChanged",function(){return n.setIsChanged()}),e.qZA()()(),e.TgZ(51,"ts-expansion-panel",25),e.NdJ("onExpanded",function(){return n.toggleIsLogsPanelExpanded()}),e.TgZ(52,"div",26)(53,"div",27),e._UZ(54,"mat-icon",28),e.TgZ(55,"span",29),e._uU(56),e.ALo(57,"translate"),e.qZA()()(),e.TgZ(58,"div",31),e._UZ(59,"ts-integration-logs",33),e.qZA()()(),e.YNc(60,ln,7,4,"div",34),e.qZA()()(),e.TgZ(61,"div",35),e.YNc(62,hn,6,3,"ng-container",0),e.qZA()()()),t&2&&(e.Q6J("ngIf",n.isLoading),e.xp6(3),e.Q6J("title",n.pageTitle),e.xp6(1),e.Q6J("ngIf",n.saveButtonVisible()&&!n.unableToAdAccountAccess),e.xp6(1),e.Q6J("ngIf",n.cancelButtonVisible()&&!n.unableToAdAccountAccess),e.xp6(1),e.Q6J("ngIf",n.closeButtonVisible()||n.unableToAdAccountAccess),e.xp6(1),e.Q6J("routerLink",e.DdM(55,We))("queryParams",e.DdM(56,fn)),e.xp6(1),e.hij(" ",e.lcZ(9,37,"SocialLeadgen.IntegrationPage.Header.Buttons.Settings")," "),e.xp6(2),e.Q6J("routerLink",e.DdM(57,We))("queryParams",e.DdM(58,Cn)),e.xp6(1),e.hij(" ",e.lcZ(12,39,"SocialLeadgen.IntegrationPage.Header.Buttons.Logs")," "),e.xp6(2),e.Q6J("disabled",n.unableToAdAccountAccess),e.xp6(1),e.hij(" ",e.lcZ(15,41,"SocialLeadgen.IntegrationPage.DownloadLeads.ForAdAccount.ButtonCaption")," "),e.xp6(6),e.Q6J("messages",n.leadSyncInformationMessages),e.xp6(2),e.Q6J("formGroup",n.leadgenIntegrationForm),e.xp6(2),e.Q6J("ngClass",n.unableToAdAccountAccess?"readonly":""),e.xp6(2),e.Oqu(e.lcZ(27,43,"SocialLeadgen.IntegrationPage.Detail.Name")),e.xp6(2),e.Q6J("readonly",n.unableToAdAccountAccess),e.xp6(2),e.Q6J("ngIf",n.isInvalidElement("name")),e.xp6(3),e.Q6J("disabled",n.unableToAdAccountAccess)("checked",n.model.isActive),e.xp6(2),e.hij(" ",n.model.isActive?e.lcZ(36,45,"SocialLeadgen.IntegrationPage.ToggleStateCaptions.Active"):e.lcZ(37,47,"SocialLeadgen.IntegrationPage.ToggleStateCaptions.Inactive")," "),e.xp6(3),e.Q6J("ngIf",n.leadgenIntegrationType==="Facebook"),e.xp6(1),e.Q6J("ngIf",n.leadgenIntegrationType==="LinkedIn"),e.xp6(1),e.Q6J("hideToggle",!0),e.xp6(3),e.Q6J("svgIcon","detail-"+(n.getIsPanelExpanded()?"open":"closed")),e.xp6(2),e.Oqu(e.lcZ(46,49,"SocialLeadgen.IntegrationPage.ColumnMapping.ExpansionPanelCaption")),e.xp6(2),e.Q6J("message",e.lcZ(48,51,"SocialLeadgen.IntegrationPage.ColumnMapping.Hint")),e.xp6(3),e.Q6J("mode","DEFAULT")("readonly",n.unableToAdAccountAccess)("linkedinAdAccountId",n.linkedinAdAccountId),e.xp6(1),e.Q6J("hideToggle",!0),e.xp6(3),e.Q6J("svgIcon","detail-"+(n.getIsLogsPanelExpanded()?"open":"closed")),e.xp6(2),e.Oqu(e.lcZ(57,53,"SocialLeadgen.IntegrationPage.Logs.ExpansionPanelCaption")),e.xp6(3),e.Q6J("integrationId",n.id),e.xp6(1),e.Q6J("ngIf",n.needToCreateIntegration),e.xp6(2),e.Q6J("ngIf",!n.isLoading))},styles:["mat-dialog-container{border-top:3px solid #006ce0}  .mat-slide-toggle.mat-disabled{opacity:1}  .mat-slide-toggle.mat-disabled .mat-slide-toggle-bar{background-color:#939393}  .mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb{background-color:transparent;width:8px;height:8px;border:2px solid white}[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;min-height:100vh}[_nghost-%COMP%]     mat-form-field.toggle label{top:0}.pane[_ngcontent-%COMP%]{overflow:hidden;border-radius:8px!important}  .form-hint.simple-hint:after{left:calc(100% - 13px)!important}  .form-hint.simple-hint:before{left:calc(100% - 14px)!important}.horizontal-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;box-sizing:border-box;width:100%}.header[_ngcontent-%COMP%]{width:100%;z-index:800;background-color:#ebeeef;box-sizing:border-box;padding:8px}.header[_ngcontent-%COMP%]   .pane[_ngcontent-%COMP%]{height:106px}.header[_ngcontent-%COMP%]   .pane[_ngcontent-%COMP%]   ts-header[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:not(:first-child){margin-left:10px}.page-content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;height:calc(100vh - 122px);overflow-y:hidden;overflow-x:auto}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]{width:100%;min-width:1280px;display:flex;flex-direction:row}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]{width:432px;min-width:432px;box-sizing:border-box;padding-left:8px;padding-right:8px;overflow-y:auto}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:0}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]   .left-bar[_ngcontent-%COMP%]{width:100%}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:not(:last-child){margin-bottom:11px}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]   mat-form-field.hidden[_ngcontent-%COMP%]{visibility:hidden;height:0}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]   mat-form-field.readonly[_ngcontent-%COMP%]:hover   .readonly-icon[_ngcontent-%COMP%]{opacity:1;display:block!important}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]   .activated-record[_ngcontent-%COMP%]{display:flex;flex-direction:row;box-sizing:border-box}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]   .activated-record[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{margin-left:10px;width:-moz-fit-content;width:fit-content}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]   .activated-record[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]     .mat-form-field-wrapper{width:100%}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]   .activated-record[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex{padding-top:0}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]   .activated-record[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix{display:flex;flex-direction:column;align-items:center;width:-moz-fit-content;width:fit-content}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]   .activated-record[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix .mat-form-field-label-wrapper{min-width:auto;width:auto}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]   .activated-record[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-underline{display:none}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]   .activated-record[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:auto;position:relative;opacity:0}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]   .activated-record[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]:hover   .label[_ngcontent-%COMP%]{opacity:1}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]   .pane[_ngcontent-%COMP%]{padding:16px;margin-bottom:8px}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]     .integration-sync-info{margin-bottom:8px}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]     .mat-expansion-panel-header{padding:0!important}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]     .mat-expansion-panel-header .expansion-panel-header{display:flex;justify-content:space-between;width:100%;padding:0!important}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]     .mat-expansion-panel-header .expansion-panel-header .expansion-panel-header-container{display:flex}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]     .mat-expansion-panel-header .expansion-panel-header .expansion-panel-header-container .expansion-panel-header-title{color:#4e7bd8!important;font-size:13px}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]     .mat-expansion-panel-header .expansion-panel-header .expansion-panel-header-container mat-icon.expansion-panel-icon{height:14px;width:14px;padding-right:13px;margin-top:2px}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]     .mat-expansion-panel-body{padding-left:28px;padding-right:0!important}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{flex-grow:1;box-sizing:border-box;margin-right:8px;margin-bottom:8px}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .forms-pane[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;height:100%;box-sizing:border-box;padding-top:8px;padding-bottom:8px}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .forms-pane[_ngcontent-%COMP%]   .form-pane-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1;box-sizing:border-box;width:50%}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .forms-pane[_ngcontent-%COMP%]   .form-pane-column[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{color:#006ce0;background-color:transparent;font-family:Bpmonline Open Sans Light,serif;font-size:16px;padding:8px 16px}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .forms-pane[_ngcontent-%COMP%]   .form-pane-column[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]     .form-block-title-icon:hover svg .circle{fill:#22ac14}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .forms-pane[_ngcontent-%COMP%]   .form-pane-column[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]     .form-block-title-icon:hover svg .content{fill:#fff}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .forms-pane[_ngcontent-%COMP%]   .form-pane-column[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{flex-grow:1;height:calc(100% - 48px);display:flex;flex-direction:column;overflow-y:auto}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .forms-pane[_ngcontent-%COMP%]   .form-pane-column[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .horizontal-container[_ngcontent-%COMP%]{padding:0 16px 8px}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .forms-pane[_ngcontent-%COMP%]   .form-pane-column[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .horizontal-container[_ngcontent-%COMP%]   .form-status[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#757575;margin-right:5px}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .forms-pane[_ngcontent-%COMP%]   .form-pane-column[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .custom-mapping-checkbox[_ngcontent-%COMP%]{padding:8px 16px}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .forms-pane[_ngcontent-%COMP%]   .form-pane-column[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .custom-mapping[_ngcontent-%COMP%]{display:contents}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .forms-pane[_ngcontent-%COMP%]   .form-pane-column[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .custom-mapping[_ngcontent-%COMP%]     form{padding:8px 16px;overflow:visible}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .forms-pane[_ngcontent-%COMP%]   .form-pane-column[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .blankslate-pane[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;justify-content:center;min-height:256px}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .forms-pane[_ngcontent-%COMP%]   .form-pane-column[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .blankslate-pane[_ngcontent-%COMP%]   .blank-slate-icon[_ngcontent-%COMP%]{width:134px;height:139px;margin-bottom:32px;background:url(empty-blankslate.5fa1b8a6b3f86afb.svg) no-repeat center;background-size:100%}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .forms-pane[_ngcontent-%COMP%]   .form-pane-column[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .blankslate-pane[_ngcontent-%COMP%]   .blank-slate-description[_ngcontent-%COMP%]{width:282px;font-size:18px;line-height:24px;text-align:center;font-family:Bpmonline Open Sans Light,serif;letter-spacing:0;color:#757575;box-shadow:unset;padding:unset}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .forms-pane[_ngcontent-%COMP%]   .form-pane-column[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]     .forms-list-table-viewport{overflow:visible}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .forms-pane[_ngcontent-%COMP%]   .form-pane-column[_ngcontent-%COMP%]:nth-child(2){border-left:1px solid #ebeeef}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .blankslate-pane[_ngcontent-%COMP%]{color:#999;display:flex;flex-direction:column;position:relative;align-items:center;text-align:left}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .blankslate-pane[_ngcontent-%COMP%]   .sad-cat[_ngcontent-%COMP%]{width:134px;height:139px;margin-bottom:32px;background:url(sad-cat-blankslate.03fe1183ece8cf4b.svg) no-repeat center;background-size:100%}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .blankslate-pane[_ngcontent-%COMP%]   .blank-slate-title[_ngcontent-%COMP%]{display:block;text-align:center;color:#757575;max-width:282px;font-size:18px;line-height:20px;margin-bottom:13px}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   .blankslate-pane[_ngcontent-%COMP%]   .blank-slate-description[_ngcontent-%COMP%]{display:inline-flex;align-items:center;color:#444;max-width:360px;font-size:18px;line-height:24px;padding:20px 20px 20px 17px;box-shadow:-3px 0 #006ce0}"]});var vn=l(538);function In(o,t){if(o&1&&(e.TgZ(0,"mat-option",9),e._uU(1),e.qZA()),o&2){const n=t.$implicit;e.Q6J("value",n),e.xp6(1),e.hij(" ",n.caption," ")}}function Mn(o,t){if(o&1&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),o&2){const n=e.oxw();e.xp6(1),e.hij(" ",n.getElementValidationMessage("entityName")," ")}}function bn(o,t){if(o&1){const n=e.EpF();e.TgZ(0,"ts-mapping-field",10),e.NdJ("remove",function(){const s=e.CHM(n).$implicit,d=e.oxw();return e.KtG(d.clearColumnMapping(s))}),e.qZA()}if(o&2){const n=t.$implicit,a=e.oxw();e.Q6J("mode",a.mode)("readonly",a.readonly)("linkedinAdAccountId",a.linkedinAdAccountId)("linkedinFormId",a.linkedinFormId)("formControlName",n.name)("entitySchemaColumn",n)}}class q{set value(t){var n,a;this._value=t,this._setEntity(((n=this._value)===null||n===void 0?void 0:n.entitySchemaName)||null),this._setColumns(((a=this._value)===null||a===void 0?void 0:a.columns)||[])}get value(){return this._value}get selectedEntity(){return this.objectColumnMapping.get("entityName").value}constructor(t,n,a){this._formValidationService=t,this._entityService=n,this._structureExplorerService=a,this._nonDisplayedColumns=["Id","CreatedOn","CreatedBy","ModifiedOn","ModifiedBy","ProcessListeners"],this._selectedEntityColumns=[],this.displayedColumns=[],this.readonly=!1,this.entities=[],this._onChange=i=>{},this._onTouched=()=>{},this._findEntityColumn=i=>this._selectedEntityColumns.find(s=>s.name===i),this._isDisplayedColumn=i=>!(0,A.Z)(this.displayedColumns.find(s=>s.name===i)),this.isInvalidElement=i=>this._formValidationService.isInvalidElement(this.objectColumnMapping,i),this.getElementValidationMessage=i=>this._formValidationService.getElementValidationMessage(this.objectColumnMapping,i)}_recalculateMapping(){const t=this.objectColumnMapping.controls,n=t.entityName.value.name,a=Object.keys(t).filter(d=>d!=="entityName"),i=[];a.forEach(d=>{const m=t[d].value;i.push(m)});const s={entitySchemaName:n,columns:i};this._onChange(s)}get _requiredEntityColumns(){return this._selectedEntityColumns.filter(t=>t.isRequired&&this._nonDisplayedColumns.indexOf(t.name)===-1)}_buildConstMappingValue(t){return{name:t.name,value:{const:""}}}_buildMacroMappingValue(t,n){return{name:t.name,value:{macros:{selector:n}}}}_isDefaultMappingValue(t){if("const"in t.value)return t.value.const==="";if("macros"in t.value)return t.value.macros.selector==="";if("form"in t.value)return!1}_loadEntityColumns(t){this._entityService.getEntityWithColumns(t).subscribe(n=>{var a;this._selectedEntityColumns=n.entitySchema.columns,this._setColumns(((a=this._value)===null||a===void 0?void 0:a.columns)||[])})}_needHandleNotesColumn(t){var n,a;if(t.some(y=>{var T,v;return(((v=(T=y.value)===null||T===void 0?void 0:T.macros)===null||v===void 0?void 0:v.selector)||null)===xe.NOTMAPPEDFIELDS}))return!1;const s=["Lead","Contact","FormSubmit"],m=(a=(((n=this.objectColumnMapping)===null||n===void 0?void 0:n.get("entityName"))||null).value)===null||a===void 0?void 0:a.name,O=s.some(y=>y===m),h=this._selectedEntityColumns.some(y=>y.name==="Notes");return O&&h}_setDefaultColumns(t){let n=!1;if(this._requiredEntityColumns.forEach(a=>{const i=this._buildConstMappingValue(a),s=t.find(d=>d.name===a.name)||i;this._isDisplayedColumn(a.name)?this.objectColumnMapping.get(a.name).setValue(s):(this._addMappingField(a,s),n=!0)}),this._needHandleNotesColumn(t)){const a=this._selectedEntityColumns.find(d=>d.name==="Notes"),i=this.objectColumnMapping.get(a.name),s=this._buildMacroMappingValue(a,xe.NOTMAPPEDFIELDS);i&&this._isDefaultMappingValue(i.value)?i.setValue(s):i||(this._addMappingField(a,s),n=!0)}n&&this._recalculateMapping()}_setColumns(t){this.displayedColumns.forEach(n=>{this.objectColumnMapping.removeControl(n.name)}),this.displayedColumns=[],t.forEach(n=>{const a=this._findEntityColumn(n.name);a&&(this._isDisplayedColumn(n.name)?this.objectColumnMapping.get(n.name).setValue(n):this._addMappingField(a,n))}),this._setDefaultColumns(t)}_setEntity(t){var n,a;if(!t)return;const i=((n=this.objectColumnMapping)===null||n===void 0?void 0:n.get("entityName"))||null;if(!i)return;const s=this.entities.find(d=>d.name===t)||null;s&&s.name!==((a=i.value)===null||a===void 0?void 0:a.name)&&i.setValue(s)}_loadEntities(){this._entityService.getEntities().subscribe(t=>{var n;this.entities=t.entities,this._setEntity(((n=this._value)===null||n===void 0?void 0:n.entitySchemaName)||this.entities[0].name)})}_getExcludedColumns(){return this._selectedEntityColumns.filter(t=>this._nonDisplayedColumns.indexOf(t.name)!==-1)}_buildForm(){this.objectColumnMapping=new c.cw({entityName:new c.NI({value:"",disabled:!0},[c.kI.required])});const t=this.value;this.value=t;const n=this.objectColumnMapping.get("entityName");n.valueChanges.subscribe(a=>{n.dirty&&this._recalculateMapping(),this._loadEntityColumns(a.uId)})}_addMappingField(t,n=this._buildConstMappingValue(t)){this.displayedColumns.push(t),this.objectColumnMapping.get(t.name)||(this.objectColumnMapping.addControl(t.name,new c.NI(n,t.isRequired?[c.kI.required]:null)),this.objectColumnMapping.get(t.name).valueChanges.subscribe(()=>{this._recalculateMapping()}))}_removeMappingField(t){this.displayedColumns=this.displayedColumns.filter(n=>n.name!==t.name),this.objectColumnMapping.get(t.name)&&(this.objectColumnMapping.removeControl(t.name),this._recalculateMapping())}ngOnInit(){this._buildForm(),this._loadEntities()}ngDoCheck(){if(!this._control)return;this._control.updateValueAndValidity({emitEvent:!1,onlySelf:!1});const t=this.objectColumnMapping.controls,n=Object.keys(t).filter(a=>a!=="entityName");this._control.touched?n.forEach(a=>{this.objectColumnMapping.controls[a].markAsTouched()}):n.forEach(a=>{this.objectColumnMapping.controls[a].markAsUntouched()})}writeValue(t){this.value=t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}_validateNotMappedFieldsMacro(){return this.displayedColumns.some(n=>{var a,i;const s=this.objectColumnMapping.get(n.name);if(s)return(((i=(a=s.value.value)===null||a===void 0?void 0:a.macros)===null||i===void 0?void 0:i.selector)||null)===xe.NOTMAPPEDFIELDS})}validate(t){var n;this._control=t;const a=this._validateNotMappedFieldsMacro();if(!a)return{notMappedFieldsMacroValidation:a};const i=[],s=this.displayedColumns.filter(m=>m.isRequired).map(m=>m.name),d=m=>{var O;return(O=this.displayedColumns.find(h=>h.name))===null||O===void 0?void 0:O.caption};for(const m of s){const O=m;if(!((n=this.objectColumnMapping.get(O).errors)===null||n===void 0)&&n.required){const y=d(O);i.push(y)}}return i.length===0?null:{emptyRequiredColumns:i}}onAddMappingClick(){const n={providers:[{name:vn.p.Providers.ENTITY_SCHEMA,options:{entitySchemaUId:this.selectedEntity.uId,excludedItems:this._getExcludedColumns().map(a=>a.uId),firstColumnsOnly:!0}}],enableMultiSelection:!0};this._structureExplorerService.show(n).subscribe(a=>{a.forEach(i=>{if(!this._isDisplayedColumn(i.name)){const s=this._findEntityColumn(i.name);s&&(this._addMappingField(s),this._recalculateMapping())}})})}clearColumnMapping(t){t&&!t.isRequired&&this._removeMappingField(t)}}q.\u0275fac=function(t){return new(t||q)(e.Y36(L),e.Y36(Q),e.Y36(Be.vR))},q.\u0275cmp=e.Xpm({type:q,selectors:[["ts-object-column-mapping"]],inputs:{mode:"mode",readonly:"readonly",linkedinAdAccountId:"linkedinAdAccountId",linkedinFormId:"linkedinFormId",value:"value"},features:[e._Bn([{provide:c.JU,useExisting:(0,e.Gpc)(()=>q),multi:!0},{provide:c.Cf,useExisting:q,multi:!0}])],decls:15,vars:11,consts:[[3,"formGroup"],[1,"entity-name"],["formControlName","entityName","required",""],["class","default-value-type-select-option",3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matSuffix","","svgIcon","read-only"],["class","column-mapping-control",3,"mode","readonly","linkedinAdAccountId","linkedinFormId","formControlName","entitySchemaColumn","remove",4,"ngFor","ngForOf"],["mat-button","",1,"default","add-mapping-button",3,"disabled","click"],["svgIcon","add-button"],[1,"default-value-type-select-option",3,"value"],[1,"column-mapping-control",3,"mode","readonly","linkedinAdAccountId","linkedinFormId","formControlName","entitySchemaColumn","remove"]],template:function(t,n){t&1&&(e.TgZ(0,"form",0)(1,"mat-form-field",1)(2,"mat-label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"mat-select",2),e.YNc(6,In,2,2,"mat-option",3),e.qZA(),e.YNc(7,Mn,2,1,"mat-error",4),e._UZ(8,"mat-icon",5),e.qZA(),e.YNc(9,bn,1,6,"ts-mapping-field",6),e.TgZ(10,"button",7),e.NdJ("click",function(){return n.onAddMappingClick()}),e._UZ(11,"mat-icon",8),e.TgZ(12,"span"),e._uU(13),e.ALo(14,"translate"),e.qZA()()()),t&2&&(e.Q6J("formGroup",n.objectColumnMapping),e.xp6(3),e.Oqu(e.lcZ(4,7,"SocialLeadgen.IntegrationPage.ColumnMapping.Object")),e.xp6(3),e.Q6J("ngForOf",n.entities),e.xp6(1),e.Q6J("ngIf",n.isInvalidElement("entityName")),e.xp6(2),e.Q6J("ngForOf",n.displayedColumns),e.xp6(1),e.Q6J("disabled",n.readonly),e.xp6(3),e.Oqu(e.lcZ(14,9,"SocialLeadgen.IntegrationPage.ColumnMapping.AddMapping")))},dependencies:[g.sg,g.O5,c._Y,c.JJ,c.JL,c.Q7,c.sg,c.u,x.eB,f.nI,f.v_,f.$V,f.nX,W.x8,Ae.CK,P.Hw,V,p.X$],styles:["[_nghost-%COMP%]{padding:0}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{overflow-y:auto;height:calc(100% - 85px)}[_nghost-%COMP%]   form[_ngcontent-%COMP%]::-webkit-scrollbar{width:0}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .entity-name[_ngcontent-%COMP%]{margin-bottom:25px}[_nghost-%COMP%]   form[_ngcontent-%COMP%]     .mat-form-field{width:100%;margin-bottom:11px}"]});class ge extends b.vau{constructor(t,n,a,i,s,d){super(),this._userInfo=t,this._translateService=n,this._dialogService=a,this._dataService=i,this._cdr=s,this._detectChangesService=d,this._defaultMappingObjectName="",this._integrationPageLocalizableStringSection="SocialLeadgen.IntegrationPage",this.getRegisteredEvents=()=>[{name:"formActivationChange",dataType:String}]}get createdDate(){const t=this.record.linkedInCreatedTime,n=(0,C.sGo)(t),a={year:"numeric",month:"2-digit",day:"2-digit"};return new Intl.DateTimeFormat(this._userInfo.cultureInfo.sysCultureName,a).format(n)}get mappingType(){const t=this.record.useCustomMapping,n=`${this._integrationPageLocalizableStringSection}.FormsList.MappingType`,a=t?"CustomMapping":"DefaultMapping";return this._translateService.instant(`${n}.${a}`)}get mappingObjectName(){var t;let n;this.record.useCustomMapping?n=((t=this.record.mapping)===null||t===void 0?void 0:t.entitySchemaName)||"":n=this._defaultMappingObjectName;const a=`${this._integrationPageLocalizableStringSection}.FormsList.ObjectsTitle`;return this._translateService.instant(`${a}.${n}`)}get formStatus(){const t=`ToggleStateCaptions.${this.record.isActive?"Active":"Inactive"}`;return this._translateService.instant(`${this._integrationPageLocalizableStringSection}.${t}`)}onFormActivationChanged(t){if(t){this.fireEvent("formActivationChange","activationChange");return}const n=this._translateService.instant(`${this._integrationPageLocalizableStringSection}.FormsList.DeactivateFormConfirmationQuestion`);this._dialogService.openConfirmationDialog(n).subscribe(a=>{a===I.rM.result?this.record.isActive=!0:this.fireEvent("formActivationChange","activationChange")})}ngOnInit(){this._dataService.dataValueStream.pipe((0,Ye.h)(t=>t.key==="default-mapping-object-name")).subscribe(t=>this._defaultMappingObjectName=t.value),this._detectChangesSubscription=this._detectChangesService.changes.pipe((0,Ye.h)(t=>t?.componentName===U.prototype.constructor.name)).subscribe({next:()=>{this._cdr.detectChanges()}}),super.ngOnInit()}ngOnDestroy(){var t;(t=this._detectChangesSubscription)===null||t===void 0||t.unsubscribe()}}ge.\u0275fac=function(t){return new(t||ge)(e.Y36(C.aoG),e.Y36(p.sK),e.Y36(I.xA),e.Y36(Y),e.Y36(e.sBO),e.Y36(N))},ge.\u0275cmp=e.Xpm({type:ge,selectors:[["ts-leadgen-form"]],features:[e.qOj],decls:15,vars:6,consts:[[1,"leadgen-form"],[1,"header"],[1,"name"],[3,"ngModel","ngModelChange","change","click"],[1,"body"],[1,"mapping-object"],[1,"mapping-type"],[1,"creation-date"],[1,"status"],[1,"delimiter"]],template:function(t,n){t&1&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"mat-slide-toggle",3),e.NdJ("ngModelChange",function(i){return n.record.isActive=i})("change",function(i){return n.onFormActivationChanged(i.source.checked)})("click",function(i){return i.cancelBubble=!0}),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5),e._uU(7),e.qZA(),e.TgZ(8,"div",6),e._uU(9),e.qZA(),e.TgZ(10,"div",7),e._uU(11),e.qZA(),e.TgZ(12,"div",8),e._uU(13),e.qZA()()(),e._UZ(14,"div",9)),t&2&&(e.xp6(3),e.Oqu(n.record.name),e.xp6(1),e.Q6J("ngModel",n.record.isActive),e.xp6(3),e.Oqu(n.mappingObjectName),e.xp6(2),e.Oqu(n.mappingType),e.xp6(2),e.Oqu(n.createdDate),e.xp6(2),e.Oqu(n.formStatus))},dependencies:[c.JJ,c.On,Fe.iZ],styles:[".leadgen-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:8px 16px;box-sizing:border-box}.leadgen-form[_ngcontent-%COMP%]:hover{cursor:pointer}.leadgen-form[_ngcontent-%COMP%]:hover   .body[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{opacity:1}.leadgen-form[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;flex-direction:row}.leadgen-form[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{flex-grow:1;color:#5179d8;font-size:13px}.leadgen-form[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{display:flex;color:#757575;font-size:13px}.leadgen-form[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .mapping-object[_ngcontent-%COMP%]{width:25%}.leadgen-form[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .mapping-type[_ngcontent-%COMP%]{width:35%}.leadgen-form[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .creation-date[_ngcontent-%COMP%]{width:25%}.leadgen-form[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{width:15%;text-align:right;opacity:0}.delimiter[_ngcontent-%COMP%]{border-bottom:1px solid #e6e6e6;padding-top:8px;margin:0 16px}"],changeDetection:0});var et=l(58143),Le=l(41867);const xn=function(o){return{formActivationChange:o}},yn=function(o){return{formColumn:o}};class pe{constructor(){this.dataSchema={columns:[{name:"formColumn",caption:"",cellComponentClass:ge}]},this.changeFormSelection=new e.vpe,this.changeFormActivation=new e.vpe,this.canChangeFormSelection=()=>(0,M.of)(!0)}set forms(t){this._forms=[],setTimeout(()=>{t=this._sortByDate(t),this._forms=t,this.data=[...t],t.length>0&&(this.selectedForm=[t[0]])},1)}set selectedForm(t){var n;t.length!==1||((n=this._selectedForm)===null||n===void 0?void 0:n.id)===t[0].id||this.canChangeFormSelection().subscribe(a=>{(a||!this._selectedForm)&&(this._selectedForm=t[0],this.changeFormSelection.emit(this._selectedForm))})}get selectedForm(){return[this._selectedForm]}onItemAction(t,n){switch(n){case"activationChange":this.changeFormActivation.emit(t);break;default:throw new Error(`Invalid record action. Code ${n}`)}}_sortByDate(t){return t.sort((n,a)=>{const i=(0,C.sGo)(n.linkedInCreatedTime),s=(0,C.sGo)(a.linkedInCreatedTime);return i<s?1:i>s?-1:0})}filterByName(t){this.data=this._forms.filter(n=>n.name.toLowerCase().indexOf(t.toLowerCase())>-1)}}pe.\u0275fac=function(t){return new(t||pe)},pe.\u0275cmp=e.Xpm({type:pe,selectors:[["ts-forms-list"]],inputs:{canChangeFormSelection:"canChangeFormSelection",forms:"forms"},outputs:{changeFormSelection:"changeFormSelection",changeFormActivation:"changeFormActivation"},decls:6,vars:11,consts:[[1,"forms-list-actions"],[1,"action","sorting"],[1,"action","search"],[3,"valueChange"],[1,"forms-list-table-viewport"],["selectMode","single",3,"ngClass","data","dataSchema","showHeader","sortable","selected","eventHandlers","selectedChange"]],template:function(t,n){t&1&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"ts-search-input",3),e.NdJ("valueChange",function(i){return n.filterByName(i)}),e.qZA()()(),e.TgZ(4,"div",4)(5,"ts-table",5),e.NdJ("selectedChange",function(i){return n.selectedForm=i}),e.qZA()()),t&2&&(e.xp6(5),e.Q6J("ngClass","forms-list-table")("data",n.data)("dataSchema",n.dataSchema)("showHeader",!1)("sortable",!0)("selected",n.selectedForm)("eventHandlers",e.VKq(9,yn,e.VKq(7,xn,n.onItemAction.bind(n)))))},dependencies:[g.mk,et.J,Le.a],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .forms-list-actions[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px;padding-bottom:10px;display:flex;flex-direction:row}[_nghost-%COMP%]   .forms-list-actions[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{flex-grow:1}[_nghost-%COMP%]   .forms-list-table-viewport[_ngcontent-%COMP%]{overflow-y:auto;flex-grow:1}[_nghost-%COMP%]   .forms-list-table-viewport[_ngcontent-%COMP%]::-webkit-scrollbar{width:0px}[_nghost-%COMP%]   .forms-list-table-viewport[_ngcontent-%COMP%]   .forms-list-table[_ngcontent-%COMP%]     tr{background-color:unset}[_nghost-%COMP%]   .forms-list-table-viewport[_ngcontent-%COMP%]   .forms-list-table[_ngcontent-%COMP%]     tr:hover .leadgen-form{background-color:#f2f5ff}[_nghost-%COMP%]   .forms-list-table-viewport[_ngcontent-%COMP%]   .forms-list-table[_ngcontent-%COMP%]     tr.selected .leadgen-form{background-color:#e5ebff}[_nghost-%COMP%]   .forms-list-table-viewport[_ngcontent-%COMP%]   .forms-list-table[_ngcontent-%COMP%]     tr td.mat-cell{border:unset;padding:0 0 8px}"],changeDetection:0});var On=l(40508);class ue{constructor(t,n){this.dialogRef=t,this.data=n}onCloseClick(){this.dialogRef.close()}}ue.\u0275fac=function(t){return new(t||ue)(e.Y36(D.hV),e.Y36(D.eJ))},ue.\u0275cmp=e.Xpm({type:ue,selectors:[["ts-integration-logs-message-modal-box"]],decls:4,vars:3,consts:[["mat-dialog-title","",1,"header-container"],[1,"close-button",3,"click"],["mat-dialog-content","",1,"main-container"],[3,"text","readOnly","hideTooltip"]],template:function(t,n){t&1&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("click",function(){return n.onCloseClick()}),e.qZA()(),e.TgZ(2,"div",2),e._UZ(3,"ts-code-editor",3),e.qZA()),t&2&&(e.xp6(3),e.Q6J("text",n.data.message)("readOnly",!0)("hideTooltip",!0))},dependencies:[On.w],styles:[`[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}[_nghost-%COMP%]   .header-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}[_nghost-%COMP%]   .header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{background:transparent url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12.071' height='12.071' viewBox='0 0 12.071 12.071'%3E%3Cdefs%3E%3Cstyle%3E.a%7Bfill:none;stroke:%23c8c8c8;stroke-linecap:round;%7D%3C/style%3E%3C/defs%3E%3Cg transform='translate(-742.755 -385.174)'%3E%3Cline class='a' x2='10.657' y2='10.657' transform='translate(743.462 385.881)'/%3E%3Cline class='a' x1='10.657' y2='10.657' transform='translate(743.462 385.881)'/%3E%3C/g%3E%3C/svg%3E") 0% 0% no-repeat padding-box;width:15px;height:15px;cursor:pointer}[_nghost-%COMP%]   .main-container[_ngcontent-%COMP%]{height:100%}`]});var tt=l(54121);function Pn(o,t){o&1&&(e.TgZ(0,"div",2),e._uU(1),e.ALo(2,"translate"),e.qZA()),o&2&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"SocialLeadgen.IntegrationPage.Logs.NoLogsForIntegrationMessage"),`
`))}const Sn=function(){return[]};function Tn(o,t){if(o&1){const n=e.EpF();e.TgZ(0,"div",16)(1,"a",17),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.onShowFullMessageClick(i))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}o&2&&(e.xp6(1),e.Q6J("routerLink",e.DdM(4,Sn)),e.xp6(1),e.Oqu(e.lcZ(3,2,"SocialLeadgen.IntegrationPage.Logs.ShowMoreButtonCaption")))}function kn(o,t){if(o&1&&(e.TgZ(0,"div",7)(1,"div",8)(2,"div",9),e._UZ(3,"div",10),e.TgZ(4,"span",11),e._uU(5),e.qZA()(),e.TgZ(6,"div",12),e._uU(7),e.qZA()(),e.TgZ(8,"div",13),e._uU(9),e.qZA(),e.TgZ(10,"div",14),e.YNc(11,Tn,4,5,"div",15),e.qZA()()),o&2){const n=t.$implicit,a=e.oxw(2);e.xp6(2),e.Q6J("ngClass","type "+a.getIconName(n)),e.xp6(3),e.Oqu(a.getTypeName(n)),e.xp6(2),e.Oqu(n.createdOn),e.xp6(2),e.hij(" ",n.previewMessage," "),e.xp6(2),e.Q6J("ngIf",n.isMessageOverPreview)}}function An(o,t){o&1&&(e.TgZ(0,"div",18),e._UZ(1,"mat-spinner",19),e.qZA())}const wn=function(){return{threshold:0}};function Ln(o,t){if(o&1){const n=e.EpF();e.TgZ(0,"div",20),e.NdJ("inViewportAction",function(i){e.CHM(n);const s=e.oxw(2);return e.KtG(s.onScrollZoneVisible(i))}),e._uU(1," \xA0 "),e.qZA()}o&2&&e.Q6J("inViewportOptions",e.DdM(1,wn))}function Fn(o,t){if(o&1&&(e.TgZ(0,"div",3),e.YNc(1,kn,12,5,"div",4),e.ALo(2,"async"),e.YNc(3,An,2,0,"div",5),e.ALo(4,"async"),e.YNc(5,Ln,2,2,"ng-template",null,6,e.W1O),e.qZA()),o&2){const n=e.MAs(6),a=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,3,a.logs)),e.xp6(2),e.Q6J("ngIf",e.lcZ(4,5,a.loading))("ngIfElse",n)}}var z;(function(o){o.Info="13EC4063-F6DB-42FF-9C39-E3DCC1B0DF4F",o.Warning="91A2A8E8-EE83-4C54-86F9-48461DA4DCB4",o.Error="05510F43-6E4E-481A-9D6B-F7865322C0C3"})(z||(z={}));class En{get previewMessage(){return this.message.slice(0,this._previewMessageSize)}get isMessageOverPreview(){return this.message.length>this._previewMessageSize}constructor(t){this._previewMessageSize=t}}class me{constructor(t,n,a,i){this.dialogService=t,this.queryExecutor=n,this.userInfo=a,this.translateService=i,this.rowPerRequest=8,this.previewMessageSize=135,this._rowOffset=0,this._isAllLogsFetched=!1,this.loading=new tt.X(!1),this.logs=new tt.X([]),this._initUserCulture()}_getLeadGenLogs(){const t=new r.EntitySchemaQuery("LeadGenLog"),n=t.addSchemaColumn("CreatedOn");return t.addSchemaColumn("Message"),t.addSchemaColumn("LeadGenLogType"),n.withOrdering(r.OrderDirection.Desc,1),t.rowCount=this.rowPerRequest,t.rowsOffset=this._rowOffset,t.filters.addSchemaColumnFilterWithParameter(r.ComparisonType.Equal,"IntegrationId",this.integrationId),this.queryExecutor.executeSelectQuery(t)}_initUserCulture(){this._userCulture=this.userInfo.cultureInfo.sysCultureName}_formatDateTime(t){return(0,C.sGo)(t).toLocaleString(this._userCulture)}_convertEntityToLog(t){return t.map(n=>{const a=new En(this.previewMessageSize);return a.message=n.Message,a.type=n.LeadGenLogType.value.toUpperCase(),a.createdOn=this._formatDateTime(n.CreatedOn),a})}_loadLogs(){!(0,r.isGuid)(this.integrationId)||this._isAllLogsFetched||(this.loading.next(!0),this._getLeadGenLogs().pipe((0,u.U)(t=>this._convertEntityToLog(t))).subscribe(t=>{this.logs.next([...this.logs.getValue(),...t]),this.loading.next(!1),this._rowOffset=this.logs.getValue().length,this._isAllLogsFetched=t.length<this.rowPerRequest}))}_translate(t){return this.translateService.instant(`SocialLeadgen.IntegrationPage.Logs.${t}`)}getIconName(t){switch(t.type){case z.Error:return"error";case z.Warning:return"warning";case z.Info:default:return"info"}}getTypeName(t){switch(t.type){case z.Error:return this._translate("Types.Error");case z.Warning:return this._translate("Types.Warning");case z.Info:default:return this._translate("Types.Info")}}ngOnInit(){this._loadLogs()}onScrollZoneVisible(t){t&&t.visible&&this._loadLogs()}onShowFullMessageClick(t){const n={width:"750px",height:"550px",data:{message:t.message}};this.dialogService.open(ue,n)}}me.\u0275fac=function(t){return new(t||me)(e.Y36(I.xA),e.Y36(Ne.oq),e.Y36(C.aoG),e.Y36(p.sK))},me.\u0275cmp=e.Xpm({type:me,selectors:[["ts-integration-logs"]],inputs:{integrationId:"integrationId"},decls:6,vars:10,consts:[["class","logs-empty-container",4,"ngIf"],["class","logs-container",4,"ngIf"],[1,"logs-empty-container"],[1,"logs-container"],["class","log-row",4,"ngFor","ngForOf"],["class","spinner-row",4,"ngIf","ngIfElse"],["more",""],[1,"log-row"],[1,"header"],[3,"ngClass"],[1,"icon"],[1,"message"],[1,"date"],[1,"content"],[1,"footer"],["class","show-more",4,"ngIf"],[1,"show-more"],[3,"routerLink","click"],[1,"spinner-row"],["mode","indeterminate","diameter","32"],["inViewport","",1,"scroll-zone",3,"inViewportOptions","inViewportAction"]],template:function(t,n){t&1&&(e.YNc(0,Pn,3,3,"div",0),e.ALo(1,"async"),e.ALo(2,"async"),e.YNc(3,Fn,7,7,"div",1),e.ALo(4,"async"),e.ALo(5,"async")),t&2&&(e.Q6J("ngIf",e.lcZ(1,2,n.logs).length===0&&!e.lcZ(2,4,n.loading)),e.xp6(3),e.Q6J("ngIf",e.lcZ(4,6,n.logs).length!==0||e.lcZ(5,8,n.loading)))},dependencies:[g.mk,g.sg,g.O5,F.rH,De.wt,Te.sN,g.Ov,p.X$],styles:[".logs-empty-container[_ngcontent-%COMP%]{margin:24px 0}.logs-container[_ngcontent-%COMP%]   .log-row[_ngcontent-%COMP%]{margin:10px 0}.logs-container[_ngcontent-%COMP%]   .log-row[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;margin-bottom:10px}.logs-container[_ngcontent-%COMP%]   .log-row[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.logs-container[_ngcontent-%COMP%]   .log-row[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:16px;height:16px;background-repeat:no-repeat!important;background-position:center}.logs-container[_ngcontent-%COMP%]   .log-row[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{margin-left:8px}.logs-container[_ngcontent-%COMP%]   .log-row[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .type.error[_ngcontent-%COMP%]{color:red}.logs-container[_ngcontent-%COMP%]   .log-row[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .type.error[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background:url(discard-icon.3c978677e456fe8f.svg)}.logs-container[_ngcontent-%COMP%]   .log-row[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .type.warning[_ngcontent-%COMP%]{color:#f4a460}.logs-container[_ngcontent-%COMP%]   .log-row[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .type.warning[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background:url(warning-icon.21d47de149c84d1a.svg)}.logs-container[_ngcontent-%COMP%]   .log-row[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .type.info[_ngcontent-%COMP%]{color:green}.logs-container[_ngcontent-%COMP%]   .log-row[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .type.info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background:url(info-icon.b16867982093b41c.svg)}.logs-container[_ngcontent-%COMP%]   .log-row[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{flex-grow:1;color:#999;text-align:end}.logs-container[_ngcontent-%COMP%]   .log-row[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:block;word-break:break-word;color:#181818}.logs-container[_ngcontent-%COMP%]   .log-row[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .show-more[_ngcontent-%COMP%]{text-align:end}.logs-container[_ngcontent-%COMP%]   .spinner-row[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]});var nt=l(51101);class _e extends b.vau{constructor(t){super(),this._translateService=t,this._localizationPath="SocialLeadgen.IntegrationSection.Columns.IntegrationSectionItemMenu",this._baseActionItems=[{caption:this._translateService.instant(`${this._localizationPath}.Delete`),code:"delete"}],this.getRegisteredEvents=()=>[{name:"actionClick",dataType:String}],this.onActionClick=n=>this.fireEvent("actionClick",n),this.getActions=()=>this._baseActionItems}}_e.\u0275fac=function(t){return new(t||_e)(e.Y36(p.sK))},_e.\u0275cmp=e.Xpm({type:_e,selectors:[["ts-integration-section-item-menu"]],features:[e.qOj],decls:2,vars:1,consts:[[1,"actions-container"],[3,"menuItems","menuItemClick"]],template:function(t,n){t&1&&(e.TgZ(0,"div",0)(1,"ts-compact-actions-menu",1),e.NdJ("menuItemClick",function(i){return n.onActionClick(i)}),e.qZA()()),t&2&&(e.xp6(1),e.Q6J("menuItems",n.getActions()))},dependencies:[nt.H],encapsulation:2});function Dn(o,t){o&1&&e._UZ(0,"ts-mask")}function Zn(o,t){o&1&&(e.TgZ(0,"div",16),e._UZ(1,"div",17),e.TgZ(2,"div",18)(3,"span",19),e._uU(4),e.ALo(5,"translate"),e.qZA()()()),o&2&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"SocialLeadgen.IntegrationSection.BlankSlate.Description")," "))}const at=function(){return["/SocialLeadgen/settings"]},Nn=function(){return{}},Vn=function(){return{tab:"logs"}},Un=function(o){return{actionClick:o}},qn=function(o){return{itemActions:o}};class he extends b.bMH{get _integrationLinkGenerator(){return t=>`integration/${t.type.toLowerCase()}/${t.id}`}constructor(t,n,a){super(t),this.injector=t,this.router=n,this.leadgenService=a,this.getProfileDataKey=()=>"IntegrationSectionProfile",this.getStaticSearchColumns=()=>["name","type","isActive"],this.getGtmSchemaName=()=>"IntegrationSection",this.requestPageData=()=>this.leadgenService.getIntegrationList().pipe((0,G.K)(i=>(0,M.of)({success:!1,errorInfo:{message:i.message}}))),this.getModelFromLoadResponse=i=>i.integrations}_getIntegrationType(t){if((0,A.Z)(t))return"";switch(t){case _.FACEBOOK:return this.translateInstant("SocialLeadgen.IntegrationTypes.Facebook");case _.LINKEDIN:return this.translateInstant("SocialLeadgen.IntegrationTypes.LinkedIn");case _.UNDEFINED:return this.translateInstant("SocialLeadgen.IntegrationTypes.Undefined")}}_deleteLeadgenIntegration(t){this.isLoading=!0,this.leadgenService.deleteLeadgenIntegration(t).subscribe(n=>{if(n.success)this.reloadPageData();else{const a=this.translateInstant("SocialLeadgen.IntegrationSection.DeleteError");this.dialogService.openInfoDialog(a).subscribe()}this.isLoading=!1})}_deleteLeadgenIntegrationConfirmation(t){const n=this.translateInstant("SocialLeadgen.IntegrationSection.DeleteConfirmation");this.dialogService.openConfirmationDialog(n).subscribe(a=>{a===I.Zz.result&&this._deleteLeadgenIntegration(t)})}getDefaultSelectMode(){return"none"}getDefaultDataSchema(){return{columns:[{name:"name",caption:this.translateInstant("SocialLeadgen.IntegrationSection.Columns.Name"),valueType:r.DataValueType.Text,linkGenerator:this._integrationLinkGenerator},{name:"type",caption:this.translateInstant("SocialLeadgen.IntegrationSection.Columns.Type"),valueType:r.DataValueType.Text,formatter:this._getIntegrationType.bind(this)},{name:"isActive",caption:this.translateInstant("SocialLeadgen.IntegrationSection.Columns.IsActive"),valueType:r.DataValueType.Boolean},{name:"itemActions",cellComponentClass:_e}]}}openSocialMediaProvider(){this.dialogService.open(j,{width:"800px",height:"560px",minWidth:"800px",minHeight:"560px",data:{}}).subscribe(t=>{(0,A.Z)(t)||t.status==="OK"&&t.type==="linkedin"&&this.router.navigate(["/SocialLeadgen/integration/linkedin/new"],{queryParams:{adaccountid:t.data.selectedAdAccount.adAccountId}})})}ngOnInit(){this.isLoading=!0,super.ngOnInit()}onItemAction(t,n){switch(n){case"delete":this._deleteLeadgenIntegrationConfirmation(t);break;default:throw new Error(`Invalid action code: ${n}`)}}}he.\u0275fac=function(t){return new(t||he)(e.Y36(e.zs3),e.Y36(F.F0),e.Y36(S))},he.\u0275cmp=e.Xpm({type:he,selectors:[["ts-integration-section"]],features:[e.qOj],decls:26,vars:32,consts:[[4,"ngIf"],[1,"base-section-wrap"],[1,"header"],[1,"pane"],[3,"title"],[1,"actions"],["mat-flat-button","","color","primary",1,"action-button",3,"click"],["mat-flat-button","","color","accent",1,"action-button",3,"click"],["mat-button","",1,"action-button",3,"routerLink","queryParams"],[1,"filters"],[3,"value","valueChange"],[1,"flex-wrapper"],[1,"table-wrapper"],[3,"ngClass"],["headerSticky","true","sortColumn","name",3,"eventHandlers"],["class","blank-slate-wrapper","data-qa","leadgen-blank-slate-wrapper",4,"ngIf"],["data-qa","leadgen-blank-slate-wrapper",1,"blank-slate-wrapper"],[1,"blank-slate-icon"],[1,"blank-slate-description"],["data-qa","integration-blank-slate-description"]],template:function(t,n){t&1&&(e.YNc(0,Dn,1,0,"ts-mask",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"ts-header",4),e.ALo(5,"translate"),e.TgZ(6,"div",5)(7,"button",6),e.NdJ("click",function(){return n.close()}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"button",7),e.NdJ("click",function(){return n.openSocialMediaProvider()}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"button",8),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"button",8),e._uU(17),e.ALo(18,"translate"),e.qZA()()(),e.TgZ(19,"div",9)(20,"ts-search-input",10),e.NdJ("valueChange",function(i){return n.searchKey=i}),e.qZA()()()(),e.TgZ(21,"div",11)(22,"div",12)(23,"div",13),e._UZ(24,"ts-table",14),e.YNc(25,Zn,6,3,"div",15),e.qZA()()()()),t&2&&(e.Q6J("ngIf",n.isLoading),e.xp6(4),e.Q6J("title",e.lcZ(5,14,"SocialLeadgen.IntegrationSection.Header.Title")),e.xp6(4),e.hij(" ",e.lcZ(9,16,"BasePageComponent.Close")," "),e.xp6(3),e.hij(" ",e.lcZ(12,18,"SocialLeadgen.IntegrationSection.Header.Buttons.New")," "),e.xp6(2),e.Q6J("routerLink",e.DdM(24,at))("queryParams",e.DdM(25,Nn)),e.xp6(1),e.hij(" ",e.lcZ(15,20,"SocialLeadgen.IntegrationSection.Header.Buttons.Settings")," "),e.xp6(2),e.Q6J("routerLink",e.DdM(26,at))("queryParams",e.DdM(27,Vn)),e.xp6(1),e.hij(" ",e.lcZ(18,22,"SocialLeadgen.IntegrationSection.Header.Buttons.Logs")," "),e.xp6(3),e.Q6J("value",n.searchKey),e.xp6(3),e.Q6J("ngClass",n.isEmpty()?"pane empty":"pane"),e.xp6(1),e.Q6J("eventHandlers",e.VKq(30,qn,e.VKq(28,Un,n.onItemAction.bind(n)))),e.xp6(1),e.Q6J("ngIf",n.isEmpty()))},dependencies:[g.mk,g.O5,x.eB,qe.g,Ue.G,et.J,Le.a,F.rH,p.X$],styles:["mat-dialog-container{border-top:3px solid #006ce0}  .base-section-wrap .pane{margin:8px!important}  .base-section-wrap .header .pane{border-radius:8px 8px 0 0}  .base-section-wrap .header .pane ts-header .bottom-content-wrapper{justify-content:space-between}  .base-section-wrap .table-wrapper .pane{border-radius:0 0 8px 8px;display:flex;flex-direction:column}  .base-section-wrap .table-wrapper .pane.empty{align-items:center;justify-content:center}  .base-section-wrap .table-wrapper .pane ts-table thead{width:calc(100% - 16px)!important}  .base-section-wrap .table-wrapper .pane ts-table .mat-column-name{width:40%!important}  .base-section-wrap .table-wrapper .pane ts-table .mat-column-type{width:45%!important}  .base-section-wrap .table-wrapper .pane ts-table .mat-column-isActive{width:10%!important}  .base-section-wrap .table-wrapper .pane ts-table .mat-column-itemActions{width:5%!important}  .base-section-wrap .table-wrapper .pane .blank-slate-wrapper{position:unset;top:unset}  .base-section-wrap .table-wrapper .pane .blank-slate-wrapper .blank-slate-icon{width:134px;height:139px;margin-bottom:32px;background:url(gears-blankslate.e1584bf7188d8077.svg);background-repeat:no-repeat;background-position:center;background-size:100%}  .base-section-wrap .table-wrapper .pane .blank-slate-wrapper .blank-slate-description{padding:13px 19px;max-width:unset;color:#181818;box-shadow:-3px 0 #006ce0}"]});function Rn(o,t){if(o&1&&e._UZ(0,"div",1),o&2){const n=e.oxw();e.Q6J("matTooltip",n.getValue())("matTooltipClass","tooltip")("matTooltipPosition","below")}}class R extends b.vau{}R.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(R)))(n||R)}}(),R.\u0275cmp=e.Xpm({type:R,selectors:[["ts-error-icon-cell"]],features:[e.qOj],decls:1,vars:1,consts:[["class","icon discard",3,"matTooltip","matTooltipClass","matTooltipPosition",4,"ngIf"],[1,"icon","discard",3,"matTooltip","matTooltipClass","matTooltipPosition"]],template:function(t,n){t&1&&e.YNc(0,Rn,1,3,"div",0),t&2&&e.Q6J("ngIf",n.getValue())},dependencies:[g.O5,Je.Kd],styles:[".icon[_ngcontent-%COMP%]{width:18px;height:18px;background-position:center;background-repeat:no-repeat;background-size:cover}.icon.discard[_ngcontent-%COMP%]{background-image:url(discard-icon.3c978677e456fe8f.svg)}  .tooltip{border-color:red!important}"]});var Qe=l(68176);class Oe{constructor(t){this.translateService=t,this._translationPrefix="SocialLeadgen.IntegrationSettings.FacebookPagesConnections",this.isExpanded=!0}translate(t){return this.translateService.instant(`${this._translationPrefix}.${t}`)}}Oe.\u0275fac=function(t){return new(t||Oe)(e.Y36(p.sK))},Oe.\u0275cmp=e.Xpm({type:Oe,selectors:[["ts-facebook-pages-connections"]],decls:10,vars:4,consts:[[3,"hideToggle","onExpanded"],["expansion-panel-header","",1,"expansion-panel-header"],[1,"expansion-panel-header-container"],[1,"expansion-panel-icon",3,"svgIcon"],[1,"expansion-panel-header-title"],["expansion-panel-content",""],[1,"blankslate"],[1,"message"]],template:function(t,n){t&1&&(e.TgZ(0,"ts-expansion-panel",0),e.NdJ("onExpanded",function(){return n.isExpanded=!n.isExpanded}),e.TgZ(1,"div",1)(2,"div",2),e._UZ(3,"mat-icon",3),e.TgZ(4,"span",4),e._uU(5),e.qZA()()(),e.TgZ(6,"div",5)(7,"div",6)(8,"span",7),e._uU(9),e.qZA()()()()),t&2&&(e.Q6J("hideToggle",!0),e.xp6(3),e.Q6J("svgIcon","detail-"+(n.isExpanded?"open":"closed")),e.xp6(2),e.Oqu(n.translate("Header")),e.xp6(4),e.Oqu(n.translate("Blankslate")))},dependencies:[P.Hw,Qe.A],styles:[".mat-expansion-panel-header{padding:0!important}  .mat-expansion-panel-header .expansion-panel-header{display:flex;justify-content:space-between;width:100%;padding:0!important}  .mat-expansion-panel-header .expansion-panel-header .expansion-panel-header-container{display:flex}  .mat-expansion-panel-header .expansion-panel-header .expansion-panel-header-container .expansion-panel-header-title{color:#4e7bd8!important;font-size:13px}  .mat-expansion-panel-header .expansion-panel-header .expansion-panel-header-container mat-icon.expansion-panel-icon{height:14px;width:14px;padding-right:13px;margin-top:2px}  .mat-expansion-panel-body{padding-left:28px;padding-right:0!important}.blankslate[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100px}.blankslate[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{color:#757575}"]});class K extends b.vau{}K.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(K)))(n||K)}}(),K.\u0275cmp=e.Xpm({type:K,selectors:[["ts-icon-cell"]],features:[e.qOj],decls:1,vars:3,template:function(t,n){t&1&&e._UZ(0,"div"),t&2&&e.Gre("icon ",n.getValue(),"")},styles:[".icon[_ngcontent-%COMP%]{width:20px;height:20px;background-position:center;background-repeat:no-repeat;background-size:cover}.icon.linkedin[_ngcontent-%COMP%]{background-image:url(linkedin-icon.c40bde28041a76cf.svg)}"]});var Jn=l(5998),Bn=l(67023);class fe{set integrations(t){this._fillSelectionConfig(t)}constructor(t,n,a){this.matIconRegistry=t,this.domSanitizer=n,this.translateService=a,this._integrationFilterLocalizableStringSeciton="SocialLeadgen.IntegrationSettings.Logs.IntegrationFilter",this.selectedIntegrationIdChange=new e.vpe,this._registerIcons()}_registerIcons(){["facebook-logo","linkedin-logo","select-menu-logo"].forEach(t=>{this.matIconRegistry.addSvgIconLiteral(t,this.domSanitizer.bypassSecurityTrustHtml(l(96386)("./"+t+".svg")))})}_getDefaultSelectionConfig(){const t=this.translateService.instant(`${this._integrationFilterLocalizableStringSeciton}.PlaceholderCaption`),n=this.translateService.instant(`${this._integrationFilterLocalizableStringSeciton}.EmptyOptionCaption`);return{options:[],placeholder:{caption:t},emptyOption:{caption:n,svgIconName:"select-menu-logo"}}}_fillSelectionConfig(t){if(this.selectIntegrationConfig||(this.selectIntegrationConfig=this._getDefaultSelectionConfig()),!t){this.selectIntegrationConfig.options=[];return}const n=[...t].sort((a,i)=>a.name.localeCompare(i.name));this.selectIntegrationConfig.options=n.map(a=>({value:a.id,caption:a.name,svgIconName:a.type===_.LINKEDIN?"linkedin-logo":"facebook-logo"}))}onSelectedIntegrationChanged(t){this.selectedIntegrationIdChange.emit(t)}}fe.\u0275fac=function(t){return new(t||fe)(e.Y36(P.jv),e.Y36(Jn.H7),e.Y36(p.sK))},fe.\u0275cmp=e.Xpm({type:fe,selectors:[["ts-integration-filter"]],inputs:{integrations:"integrations"},outputs:{selectedIntegrationIdChange:"selectedIntegrationIdChange"},decls:2,vars:1,consts:[[3,"config","valueChange"]],template:function(t,n){t&1&&(e.TgZ(0,"div")(1,"ts-select-menu",0),e.NdJ("valueChange",function(i){return n.onSelectedIntegrationChanged(i)}),e.qZA()()),t&2&&(e.xp6(1),e.Q6J("config",n.selectIntegrationConfig))},dependencies:[Bn.d]});var Gn=l(73514),Yn=l(9018);function Qn(o,t){o&1&&e._UZ(0,"div")}function $n(o,t){o&1&&(e.TgZ(0,"div",4),e._UZ(1,"div",5),e.TgZ(2,"div",6),e._uU(3),e.ALo(4,"translate"),e.qZA()()),o&2&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"SocialLeadgen.IntegrationSettings.Logs.NoLogsMessage")))}function jn(o,t){o&1&&(e.TgZ(0,"div",10),e._UZ(1,"mat-spinner",11),e.qZA())}const zn=function(){return{threshold:0}};function Kn(o,t){if(o&1){const n=e.EpF();e.TgZ(0,"div",12),e.NdJ("inViewportAction",function(i){e.CHM(n);const s=e.oxw(2);return e.KtG(s.onScrollZoneVisible(i))}),e._uU(1,"\xA0"),e.qZA()}o&2&&e.Q6J("inViewportOptions",e.DdM(1,zn))}function Hn(o,t){if(o&1&&(e._UZ(0,"ts-table",7),e.YNc(1,jn,2,0,"div",8),e.YNc(2,Kn,2,2,"ng-template",null,9,e.W1O)),o&2){const n=e.MAs(3),a=e.oxw();e.Q6J("dataSource",a.tableDataSource)("dataSchema",a.tableDataSchema)("sortColumn","createdOn")("sortDirection","desc")("sortable",!1),e.xp6(1),e.Q6J("ngIf",a.loading)("ngIfElse",n)}}class Ce{constructor(t,n,a,i,s){this.settingsService=t,this.leadgenService=n,this.translateService=a,this.queryExecutor=i,this.dialogService=s,this._translateBaseKey="SocialLeadgen.IntegrationSettings.Logs",this._rowPerRequest=8,this._isAllLogsFetched=!1,this._rowOffset=0,this._integrationId=null,this.loading=!0,this.filterIntegrations=[],this.tableDataSource=new Gn.r4,this.tableDataSchema={columns:[{name:"createdOn",caption:this.translateService.instant(`${this._translateBaseKey}.DateColumnCaption`),valueType:r.DataValueType.DateTime,span:5},{name:"integrationName",caption:this.translateService.instant(`${this._translateBaseKey}.IntegrationColumnCaption`),valueType:r.DataValueType.Text,span:5},{name:"message",caption:this.translateService.instant(`${this._translateBaseKey}.DetailsColumnCaption`),valueType:r.DataValueType.Text}]}}_convertEntityToLog(t){const n=this.translateService.instant(`${this._translateBaseKey}.IntegrationNotFound`);return t.map(a=>{const i=this.filterIntegrations.find(s=>s.id===a.IntegrationId);return{createdOn:(0,C.sGo)(a.CreatedOn),integrationName:i?i.name:n,message:a.Message}})}_loadLogs(){this._isAllLogsFetched||(this.loading=!0,this._getLeadGenLogs().pipe((0,u.U)(t=>this._convertEntityToLog(t))).subscribe(t=>{this.tableDataSource.data=[...this.tableDataSource.data,...t],this.loading=!1,this._rowOffset=this.tableDataSource.data.length,this._isAllLogsFetched=t.length<this._rowPerRequest}))}_clearState(){this._isAllLogsFetched=!1,this._rowOffset=0,this.tableDataSource.data=[]}_getLeadGenLogs(){const t=new r.EntitySchemaQuery("LeadGenLog"),n=t.addSchemaColumn("CreatedOn");return t.addSchemaColumn("Message"),t.addSchemaColumn("IntegrationId"),n.withOrdering(r.OrderDirection.Desc,1),t.rowCount=this._rowPerRequest,t.rowsOffset=this._rowOffset,(0,r.isGuid)(this._integrationId)&&t.filters.addSchemaColumnFilterWithParameter(r.ComparisonType.Equal,"IntegrationId",this._integrationId),this.queryExecutor.executeSelectQuery(t)}_initLoad(){this.leadgenService.getIntegrationList().pipe((0,G.K)(()=>{const t=this.translateService.instant(`${this._translateBaseKey}.GetIntegrationListError`);return this.dialogService.openInfoDialog(t),Yn.E})).subscribe(t=>{this.filterIntegrations=t.integrations,this._loadLogs()})}ngOnInit(){this.settingsService.isAccountExists().subscribe(t=>{t?this._initLoad():(this.loading=!1,this._loadLogs())})}onFilteredIntegrationIdChange(t){this._integrationId=t,this._clearState(),this._loadLogs()}onScrollZoneVisible(t){t?.visible&&this._loadLogs()}}Ce.\u0275fac=function(t){return new(t||Ce)(e.Y36(E),e.Y36(S),e.Y36(p.sK),e.Y36(Ne.oq),e.Y36(I.xA))},Ce.\u0275cmp=e.Xpm({type:Ce,selectors:[["ts-integration-settings-log"]],decls:6,vars:4,consts:[[3,"integrations","selectedIntegrationIdChange"],[4,"ngIf","ngIfThen","ngIfElse"],["blankslate",""],["logs",""],[1,"blank-slate"],[1,"blank-slate-icon"],[1,"blank-slate-description"],[3,"dataSource","dataSchema","sortColumn","sortDirection","sortable"],["class","spinner-row",4,"ngIf","ngIfElse"],["more",""],[1,"spinner-row"],["mode","indeterminate","diameter","32"],["inViewport","",1,"scroll-zone",3,"inViewportOptions","inViewportAction"]],template:function(t,n){if(t&1&&(e.TgZ(0,"ts-integration-filter",0),e.NdJ("selectedIntegrationIdChange",function(i){return n.onFilteredIntegrationIdChange(i)}),e.qZA(),e.YNc(1,Qn,1,0,"div",1),e.YNc(2,$n,5,3,"ng-template",null,2,e.W1O),e.YNc(4,Hn,4,7,"ng-template",null,3,e.W1O)),t&2){const a=e.MAs(3),i=e.MAs(5);e.Q6J("integrations",n.filterIntegrations),e.xp6(1),e.Q6J("ngIf",n.tableDataSource.data.length===0&&!n.loading)("ngIfThen",a)("ngIfElse",i)}},dependencies:[g.O5,Le.a,De.wt,Te.sN,fe,p.X$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;box-sizing:border-box;padding:8px;height:100%;width:100%}.blank-slate[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%}.blank-slate[_ngcontent-%COMP%]   .blank-slate-icon[_ngcontent-%COMP%]{width:134px;height:139px;margin-bottom:32px;background:url(book-blankslate.88cd4a91ac9dfb48.svg);background-repeat:no-repeat;background-position:center}.blank-slate[_ngcontent-%COMP%]   .blank-slate-description[_ngcontent-%COMP%]{font-size:18px;line-height:24px;text-align:center;font-family:Bpmonline Open Sans Light,serif;color:#757575;box-shadow:unset;padding:unset;width:230px}.spinner-row[_ngcontent-%COMP%]{margin-top:8px;display:flex;justify-content:center;align-items:center}"]});class H extends b.vau{constructor(t){super(),this._translateService=t,this._translationPrefix="SocialLeadgen.IntegrationSettings.LinkedInAdAccountsConnections.AdAccountsTable.UsersTable",this._baseActionItems=[{caption:this._translate("MenuCell.Delete"),code:"delete"}],this.getRegisteredEvents=()=>[{name:"actionClick",dataType:String}],this.onActionClick=n=>this.fireEvent("actionClick",n),this.getActions=()=>this._baseActionItems}_translate(t){return this._translateService.instant(`${this._translationPrefix}.${t}`)}}H.\u0275fac=function(t){return new(t||H)(e.Y36(p.sK))},H.\u0275cmp=e.Xpm({type:H,selectors:[["ts-menu-cell"]],features:[e.qOj],decls:2,vars:1,consts:[[1,"actions-container"],[3,"menuItems","menuItemClick"]],template:function(t,n){t&1&&(e.TgZ(0,"div",0)(1,"ts-compact-actions-menu",1),e.NdJ("menuItemClick",function(i){return n.onActionClick(i)}),e.qZA()()),t&2&&(e.xp6(1),e.Q6J("menuItems",n.getActions()))},dependencies:[nt.H],encapsulation:2});const Xn=function(o){return{actionClick:o}},Wn=function(o){return{itemActions:o}};class ve extends b.vau{constructor(t,n){super(),this.userInfo=t,this.translateService=n,this._translationPrefix="SocialLeadgen.IntegrationSettings.LinkedInAdAccountsConnections.AdAccountsTable.UsersTable",this.dataSchema={columns:[{name:"linkedInUserName",caption:this.translate("Headers.UserName"),valueType:r.DataValueType.Text,formatter:this._formatName.bind(this),span:6},{name:"status",caption:this.translate("Headers.TokenStatus"),valueType:r.DataValueType.Text,formatter:this._formatTokenStatus.bind(this),span:4},{name:"expirationDate",caption:this.translate("Headers.ExpirationDate"),valueType:r.DataValueType.Text,formatter:this._formatDate.bind(this),span:4},{name:"hasAdAccountAccess",caption:this.translate("Headers.HasAdAccountAccess"),valueType:r.DataValueType.Text,formatter:this._hasAdAccountAccess.bind(this),span:8},{name:"error",cellComponentClass:R,span:1},{name:"itemActions",cellComponentClass:H,span:1}]},this.getRegisteredEvents=()=>[{name:"actionClick",dataType:Object}]}_applyData(t){t=t.map(n=>(n.error=this._calculateErrorMessage(n),n)),this.data=t}_calculateErrorMessage(t){switch(t.status){case Z.Active:return null;case Z.Expired:return this.translate("TokenStatusErrorMessage.Expired");case Z.Revoked:return this.translate("TokenStatusErrorMessage.Revoked");case Z.Unknown:return this.translate("TokenStatusErrorMessage.Unknown")}}_formatName(t,n){return(0,A.Z)(t)?n.linkedInUserId:t}_formatDate(t){if((0,A.Z)(t))return null;const n=(0,C.sGo)(t),a={year:"numeric",month:"2-digit",day:"2-digit"};return new Intl.DateTimeFormat(this.userInfo.cultureInfo.sysCultureName,a).format(n)}_formatTokenStatus(t){switch(t){case Z.Active:return this.translate("TokenStatuses.Active");case Z.Expired:return this.translate("TokenStatuses.Expired");case Z.Revoked:return this.translate("TokenStatuses.Revoked");case Z.Unknown:return this.translate("TokenStatuses.Unknown")}}_hasAdAccountAccess(t){return t?this.translate("HasAdAccountAccess.Yes"):this.translate("HasAdAccountAccess.No")}onItemAction(t,n){this.fireEvent("actionClick",{record:t,actionCode:n})}translate(t){return this.translateService.instant(`${this._translationPrefix}.${t}`)}ngOnInit(){this._applyData(this.getValue()),super.ngOnInit()}}ve.\u0275fac=function(t){return new(t||ve)(e.Y36(C.aoG),e.Y36(p.sK))},ve.\u0275cmp=e.Xpm({type:ve,selectors:[["ts-linkedin-users-list-cell"]],features:[e.qOj],decls:1,vars:8,consts:[[3,"data","dataSchema","sortable","eventHandlers"]],template:function(t,n){t&1&&e._UZ(0,"ts-table",0),t&2&&e.Q6J("data",n.record.tokens)("dataSchema",n.dataSchema)("sortable",!1)("eventHandlers",e.VKq(6,Wn,e.VKq(4,Xn,n.onItemAction.bind(n))))},dependencies:[Le.a],styles:["[_nghost-%COMP%]{display:block;box-sizing:border-box;padding-left:50px;padding-right:0;width:100%}[_nghost-%COMP%]   ts-table[_ngcontent-%COMP%]{width:100%;min-width:unset!important}"]});function ea(o,t){if(o&1&&(e.TgZ(0,"div",8)(1,"span",9),e._uU(2),e.qZA()()),o&2){const n=e.oxw();e.xp6(2),e.Oqu(n.translate("Blankslate"))}}const ot=function(o){return{actionClick:o}},ta=function(o,t){return{itemActions:o,tokens:t}};function na(o,t){if(o&1&&e._UZ(0,"ts-table",10),o&2){const n=e.oxw();e.Q6J("data",n.data)("expanded",n.data)("rowExpanderPosition","start")("dataSchema",n.dataSchema)("sortable",!1)("eventHandlers",e.WLB(10,ta,e.VKq(6,ot,n.onAdAccountAction.bind(n)),e.VKq(8,ot,n.onTokenAction.bind(n))))}}class Ie{constructor(t,n,a,i,s){this.settingsService=t,this.leadgenService=n,this.translateService=a,this.dialogService=i,this.userInfo=s,this.isExpanded=!0,this.state="loading",this.translationPrefix="SocialLeadgen.IntegrationSettings.LinkedInAdAccountsConnections",this.dataSchema={columns:[{name:"icon",cellComponentClass:K,span:1},{name:"name",caption:this.translate("AdAccountsTable.Headers.Name"),valueType:r.DataValueType.Text,formatter:this._formatName.bind(this),span:5},{name:"link",caption:this.translate("AdAccountsTable.Headers.Link"),valueType:r.DataValueType.Text,externalLink:!0,linkGenerator:this._generateLink.bind(this),span:8},{name:"connectionStatus",caption:this.translate("AdAccountsTable.Headers.ConnectionStatus"),valueType:r.DataValueType.Text,formatter:this._formatConnectionStatus.bind(this),span:4},{name:"expirationDate",caption:this.translate("AdAccountsTable.Headers.ExpirationDate"),valueType:r.DataValueType.Text,formatter:this._formatDate.bind(this),span:4},{name:"error",cellComponentClass:R,span:1},{name:"itemActions",cellComponentClass:H,span:1}],expandableRow:{name:"tokens",valueType:r.DataValueType.Text,cellComponentClass:ve}},this.ready=new e.vpe,this.updating=new e.vpe}_formatName(t,n){return(0,A.Z)(t)?n.id:t}_generateLink(t){return{url:t.link,target:"_blank"}}_formatConnectionStatus(t){switch(t){case ye.Inactive:return this.translate("AdAccountsTable.ConnectionStatuses.Inactive");case ye.Active:return this.translate("AdAccountsTable.ConnectionStatuses.Active")}}_formatDate(t){if((0,A.Z)(t))return null;const n=(0,C.sGo)(t),a={year:"numeric",month:"2-digit",day:"2-digit"};return new Intl.DateTimeFormat(this.userInfo.cultureInfo.sysCultureName,a).format(n)}_calculateErrorMessage(t){switch(t.connectionStatus){case ye.Inactive:return this.translate("AdAccountsTable.ConnectionStatusErrorMessage.Inactive");case ye.Active:return null}}_applyData(t){t=t.map(n=>(n.icon="linkedin",n.error=this._calculateErrorMessage(n),n)),this.data=t}_loadAdAccounts(t){this.state=t,this.leadgenService.getLinkedInTokensIntrospection({responseTimeZone:this.userInfo.timeZoneId}).subscribe(n=>{this.ready.emit(!0),n.adAccounts.length===0?this.state="blankslate":(this.state="table",this._applyData(n.adAccounts))})}_deleteAdAccountConfirmation(t){const n=this.translate("AdAccountsTable.DeleteConfirmation");this.dialogService.openConfirmationDialog(n).subscribe(a=>{a===I.Zz.result&&this._deleteAdAccount(t)})}_deleteAdAccount(t){this.updating.emit(!0),this.leadgenService.deleteLinkedInAdAccount(t).subscribe({next:()=>{this._loadAdAccounts("reloading")},error:()=>{const n=this.translate("AdAccountsTable.DeleteError");this.dialogService.openInfoDialog(n).subscribe(),this.ready.emit(!0)}})}_deleteUserTokenConfirmation(t){const n=this.translate("AdAccountsTable.UsersTable.DeleteConfirmation");this.dialogService.openConfirmationDialog(n).subscribe(a=>{a===I.Zz.result&&this._deleteUserToken(t)})}_deleteUserToken(t){this.updating.emit(!0),this.leadgenService.deleteLinkedInUserToken(t).subscribe({next:()=>{this._loadAdAccounts("reloading")},error:n=>{const i=n.error.errorInfo.message;this.dialogService.openInfoDialog(i).subscribe(),this.ready.emit(!0)}})}onAdAccountAction(t,n){switch(n){case"delete":this._deleteAdAccountConfirmation(t.id);break;default:throw new Error(`Invalid action code. Code ${n}`)}}onTokenAction(t,n){switch(n.actionCode){case"delete":this._deleteUserTokenConfirmation(n.record.linkedInUserId);break;default:throw new Error(`Invalid token action code. Code ${n.actionCode}`)}}translate(t){return this.translateService.instant(`${this.translationPrefix}.${t}`)}ngOnInit(){this.settingsService.isAccountExists().subscribe(t=>{t?this._loadAdAccounts("loading"):(this.state="blankslate",this.ready.emit(!0))})}}Ie.\u0275fac=function(t){return new(t||Ie)(e.Y36(E),e.Y36(S),e.Y36(p.sK),e.Y36(I.xA),e.Y36(C.aoG))},Ie.\u0275cmp=e.Xpm({type:Ie,selectors:[["ts-linkedin-ad-accounts-connections"]],outputs:{ready:"ready",updating:"updating"},decls:9,vars:5,consts:[[3,"hideToggle","onExpanded"],["expansion-panel-header","",1,"expansion-panel-header"],[1,"expansion-panel-header-container"],[1,"expansion-panel-icon",3,"svgIcon"],[1,"expansion-panel-header-title"],["expansion-panel-content",""],["class","blankslate",4,"ngIf"],[3,"data","expanded","rowExpanderPosition","dataSchema","sortable","eventHandlers",4,"ngIf"],[1,"blankslate"],[1,"message"],[3,"data","expanded","rowExpanderPosition","dataSchema","sortable","eventHandlers"]],template:function(t,n){t&1&&(e.TgZ(0,"ts-expansion-panel",0),e.NdJ("onExpanded",function(){return n.isExpanded=!n.isExpanded}),e.TgZ(1,"div",1)(2,"div",2),e._UZ(3,"mat-icon",3),e.TgZ(4,"span",4),e._uU(5),e.qZA()()(),e.TgZ(6,"div",5),e.YNc(7,ea,3,1,"div",6),e.YNc(8,na,1,13,"ts-table",7),e.qZA()()),t&2&&(e.Q6J("hideToggle",!0),e.xp6(3),e.Q6J("svgIcon","detail-"+(n.isExpanded?"open":"closed")),e.xp6(2),e.Oqu(n.translate("Header")),e.xp6(2),e.Q6J("ngIf",n.state==="blankslate"),e.xp6(1),e.Q6J("ngIf",n.state==="table"||n.state==="reloading"))},dependencies:[g.O5,P.Hw,Le.a,Qe.A],styles:[".mat-expansion-panel-header{padding:0!important}  .mat-expansion-panel-header .expansion-panel-header{display:flex;justify-content:space-between;width:100%;padding:0!important}  .mat-expansion-panel-header .expansion-panel-header .expansion-panel-header-container{display:flex}  .mat-expansion-panel-header .expansion-panel-header .expansion-panel-header-container .expansion-panel-header-title{color:#4e7bd8!important;font-size:13px}  .mat-expansion-panel-header .expansion-panel-header .expansion-panel-header-container mat-icon.expansion-panel-icon{height:14px;width:14px;padding-right:13px;margin-top:2px}  .mat-expansion-panel-body{padding-left:28px;padding-right:0!important}  .expandable-row{height:0px!important}  .expandable-row .expandable-cell-collapsed{height:0px!important}  .expandable-row .expandable-cell-expanded{padding-left:0!important;padding-right:0!important}.blankslate[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100px}.blankslate[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{color:#757575}.loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100px}ts-table[_ngcontent-%COMP%]{min-width:unset!important}"]});function aa(o,t){o&1&&e._UZ(0,"ts-mask")}function oa(o,t){if(o&1){const n=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.save())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}o&2&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"BasePageComponent.Apply")," "))}function ia(o,t){if(o&1){const n=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.cancel())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}o&2&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"BasePageComponent.Cancel")," "))}function sa(o,t){if(o&1){const n=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.close())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}o&2&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"BasePageComponent.Close")," "))}function ra(o,t){if(o&1&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),o&2){const n=e.oxw();e.xp6(1),e.hij(" ",n.getElementValidationMessage("url")," ")}}function ca(o,t){if(o&1&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),o&2){const n=t.$implicit;e.Q6J("value",n.id),e.xp6(1),e.hij(" ",n.name," ")}}class Me extends b.neP{get notificationGroups(){var t;return(t=this.model.notificationGroups)===null||t===void 0?void 0:t.rows}constructor(t,n,a,i,s){super(t),this.injector=t,this.userInfo=n,this.router=a,this.settingsService=i,this.formValidationService=s,this._settingsPageLocalizableStringSeciton="SocialLeadgen.IntegrationSettings",this._isNew=!0,this._dataReady={settings:!1,linkedInAdAccounts:!1},this.selectedTabIndex=0,this.showLoadingSpinner=!0,this.getGtmSchemaName=()=>"LeadgenSettingsPage",this.getModelFromLoadResponse=d=>d,this.requestPageData=()=>this.settingsService.getSettings().pipe((0,ke.b)(()=>this.ready("settings"))),this.savePageData=d=>this.settingsService.saveSettings(d).pipe((0,G.K)(()=>(0,M.of)({success:!1,errorInfo:{message:this.translateInstant(`${this._settingsPageLocalizableStringSeciton}.Error.Save`)}}))),this.closeAfterSave=()=>this.router.navigateByUrl("/SocialLeadgen"),this.isInvalidElement=d=>this.formValidationService.isInvalidElement(this.settingsForm,d),this.getElementValidationMessage=d=>this.formValidationService.getElementValidationMessage(this.settingsForm,d)}_subscribeOnValueChange(t,n,a){const i=function(s){this.model[n]=s,this.setIsChanged()};a===void 0?t.get(n).valueChanges.subscribe(i.bind(this)):t.get(n).valueChanges.subscribe(a.bind(this))}_validateForm(t){return new Ge.y(n=>{this.settingsForm.markAllAsTouched(),this.settingsForm.updateValueAndValidity(),setTimeout(()=>{const a=this.settingsForm.valid;if(!a&&t){const i=this.translateInstant(`${this._settingsPageLocalizableStringSeciton}.Error.FormValidation`);this.dialogService.openInfoDialog(i)}n.next(a),n.complete()},1)})}_buildForm(){this.settingsForm=new c.cw({url:new c.NI("",[c.kI.required]),group:new c.NI(null)}),this._subscribeOnValueChange(this.settingsForm,"url",t=>{this.model.account.creatioUrl=t,this.setIsChanged()}),this._subscribeOnValueChange(this.settingsForm,"group",t=>{this.model.notificationGroups.selected=t,this.setIsChanged()})}_setActiveTab(t){switch(t){case"CONNECTION":this.selectedTabIndex=0;break;case"LOGS":this.selectedTabIndex=1;break;default:console.warn(`Invalid tab code: ${t}`)}}_showAutorouteMessage(){const t=this.translateInstant(`${this._settingsPageLocalizableStringSeciton}.AutorouteMessage`);this.dialogService.openInfoDialog(t)}_readRoutingParameters(){var t;const n=this.activateRoute.snapshot.queryParams,a=((t=n.tab)===null||t===void 0?void 0:t.toUpperCase())||"CONNECTION";this._isNew=!(0,A.Z)(n.createAccount),this._setActiveTab(a),this._isNew&&(this.setIsChanged(),this._showAutorouteMessage())}afterPageDataLoaded(){this._isNew&&this.settingsForm.patchValue({url:(0,C.MAR)().replace("/0/","")})}onModelSet(t){this.settingsForm.patchValue({url:t.account.creatioUrl,group:t.notificationGroups.selected},{emitEvent:!1})}save(){this._validateForm(!0).subscribe(t=>{if(t)return super.save()})}close(){this._isNew?this.window.close():super.close()}ready(t){this.showLoadingSpinner=!0,this._dataReady[t]=!0;for(const n in this._dataReady)if(this._dataReady[n]===!1)return;this.showLoadingSpinner=!1}updating(t){this.showLoadingSpinner=!0,this._dataReady[t]=!1}ngOnInit(){this._buildForm(),this._readRoutingParameters(),super.ngOnInit()}}Me.\u0275fac=function(t){return new(t||Me)(e.Y36(e.zs3),e.Y36(C.aoG),e.Y36(F.F0),e.Y36(E),e.Y36(L))},Me.\u0275cmp=e.Xpm({type:Me,selectors:[["ts-integration-settings"]],features:[e.qOj],decls:43,vars:29,consts:[[4,"ngIf"],[1,"header"],[1,"pane"],[3,"title"],["class","action-button","mat-flat-button","","color","accent",3,"click",4,"ngIf"],["class","action-button","mat-flat-button","","color","primary",3,"click",4,"ngIf"],[1,"page-content-wrapper"],[1,"page-content"],[1,"left-bar-wrapper"],[1,"left-bar"],[1,"form",3,"formGroup"],["matInput","","type","text","formControlName","url","required",""],["formControlName","group","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"note"],[1,"note-header"],["svgIcon","info-tooltip",1,"note-header-icon"],[1,"note-header-text"],[1,"note-body",3,"innerHTML"],[1,"main-content","pane"],["animationDuration","0ms","disableRipple","true",3,"selectedIndex","selectedIndexChange"],[3,"label"],[3,"ready","updating"],["mat-flat-button","","color","accent",1,"action-button",3,"click"],["mat-flat-button","","color","primary",1,"action-button",3,"click"],[3,"value"]],template:function(t,n){t&1&&(e.YNc(0,aa,1,0,"ts-mask",0),e.TgZ(1,"div",1)(2,"div",2)(3,"ts-header",3),e.ALo(4,"translate"),e.YNc(5,oa,3,3,"button",4),e.YNc(6,ia,3,3,"button",5),e.YNc(7,sa,3,3,"button",5),e.qZA()()(),e.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",2)(13,"form",10)(14,"mat-form-field")(15,"mat-label"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e._UZ(18,"input",11),e.YNc(19,ra,2,1,"mat-error",0),e.qZA(),e.TgZ(20,"mat-form-field")(21,"mat-label"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"mat-select",12),e.YNc(25,ca,2,2,"mat-option",13),e.qZA()()()(),e.TgZ(26,"div",2)(27,"div",14)(28,"div",15),e._UZ(29,"mat-icon",16),e.TgZ(30,"span",17),e._uU(31),e.ALo(32,"translate"),e.qZA()(),e._UZ(33,"div",18),e.ALo(34,"translate"),e.qZA()()()(),e.TgZ(35,"div",19)(36,"mat-tab-group",20),e.NdJ("selectedIndexChange",function(i){return n.selectedTabIndex=i}),e.TgZ(37,"mat-tab",21),e.ALo(38,"translate"),e.TgZ(39,"ts-linkedin-ad-accounts-connections",22),e.NdJ("ready",function(){return n.ready("linkedInAdAccounts")})("updating",function(){return n.updating("linkedInAdAccounts")}),e.qZA()(),e.TgZ(40,"mat-tab",21),e.ALo(41,"translate"),e._UZ(42,"ts-integration-settings-log"),e.qZA()()()()()),t&2&&(e.Q6J("ngIf",n.showLoadingSpinner),e.xp6(3),e.s9C("title",e.lcZ(4,15,"SocialLeadgen.IntegrationSettings.Header.Title")),e.xp6(2),e.Q6J("ngIf",n.saveButtonVisible()),e.xp6(1),e.Q6J("ngIf",n.cancelButtonVisible()),e.xp6(1),e.Q6J("ngIf",n.closeButtonVisible()),e.xp6(6),e.Q6J("formGroup",n.settingsForm),e.xp6(3),e.Oqu(e.lcZ(17,17,"SocialLeadgen.IntegrationSettings.Detail.Url")),e.xp6(3),e.Q6J("ngIf",n.isInvalidElement("url")),e.xp6(3),e.Oqu(e.lcZ(23,19,"SocialLeadgen.IntegrationSettings.Detail.Group")),e.xp6(3),e.Q6J("ngForOf",n.notificationGroups),e.xp6(6),e.Oqu(e.lcZ(32,21,"SocialLeadgen.IntegrationSettings.Notes.Header")),e.xp6(2),e.Q6J("innerHTML",e.lcZ(34,23,"SocialLeadgen.IntegrationSettings.Notes.Text"),e.oJD),e.xp6(3),e.Q6J("selectedIndex",n.selectedTabIndex),e.xp6(1),e.s9C("label",e.lcZ(38,25,"SocialLeadgen.IntegrationSettings.Tabs.Connection")),e.xp6(3),e.s9C("label",e.lcZ(41,27,"SocialLeadgen.IntegrationSettings.Tabs.Logs")))},dependencies:[g.sg,g.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.sg,c.u,x.eB,qe.g,f.nI,f.v_,f.$V,W.x8,Ae.CK,Ee.SK,Ee.R7,P.Hw,Pe.k0,Ue.G,Ie,Ce,p.X$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;min-height:100vh}.pane[_ngcontent-%COMP%]{overflow:hidden;border-radius:8px!important}.header[_ngcontent-%COMP%]{width:100%;z-index:800;background-color:#ebeeef;box-sizing:border-box;padding:8px;position:fixed;top:0;left:0}.header[_ngcontent-%COMP%]   .pane[_ngcontent-%COMP%]{height:106px}.header[_ngcontent-%COMP%]   .pane[_ngcontent-%COMP%]   ts-header[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:not(:first-child){margin-left:10px}.page-content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;height:100%;min-height:calc(100vh - 122px);margin-top:122px}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]{width:100%;min-width:1280px;display:flex;flex-direction:row}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]{width:432px;min-width:432px;box-sizing:border-box;padding-left:8px;padding-right:8px;overflow-y:auto}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]   .left-bar[_ngcontent-%COMP%]{width:100%}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]   .left-bar[_ngcontent-%COMP%]   .pane[_ngcontent-%COMP%]{margin-bottom:8px;padding:16px}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]   .left-bar[_ngcontent-%COMP%]   .pane[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]   .left-bar[_ngcontent-%COMP%]   .pane[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]   .note-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]   .left-bar[_ngcontent-%COMP%]   .pane[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]   .note-header[_ngcontent-%COMP%]   .note-header-icon[_ngcontent-%COMP%]{height:32px;width:32px}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]   .left-bar[_ngcontent-%COMP%]   .pane[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]   .note-header[_ngcontent-%COMP%]   .note-header-icon[_ngcontent-%COMP%]     svg .circle{fill:#22ac14}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]   .left-bar[_ngcontent-%COMP%]   .pane[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]   .note-header[_ngcontent-%COMP%]   .note-header-icon[_ngcontent-%COMP%]     svg .content{fill:#fff}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]   .left-bar[_ngcontent-%COMP%]   .pane[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]   .note-header[_ngcontent-%COMP%]   .note-header-text[_ngcontent-%COMP%]{line-height:24px;font-size:18px;margin-left:16px;color:#22ac14}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left-bar-wrapper[_ngcontent-%COMP%]   .left-bar[_ngcontent-%COMP%]   .pane[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]   .note-body[_ngcontent-%COMP%]{margin-top:15px;font-size:13px}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{flex-grow:1;box-sizing:border-box;margin-right:8px;margin-bottom:8px}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   mat-tab-group[_ngcontent-%COMP%]{height:100%;background:url(purple-background.009ee3996c01efd7.svg);background-size:100%!important}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   mat-tab-group[_ngcontent-%COMP%]     .mat-tab-header{height:40px;box-sizing:border-box;padding-top:8px;padding-left:16px;padding-right:16px;border-bottom:0px}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   mat-tab-group[_ngcontent-%COMP%]     .mat-tab-header .mat-ink-bar{display:none!important}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   mat-tab-group[_ngcontent-%COMP%]     .mat-tab-header .mat-tab-label{height:40px}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   mat-tab-group[_ngcontent-%COMP%]     .mat-tab-header .mat-tab-label .mat-tab-label-content{color:#fff}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   mat-tab-group[_ngcontent-%COMP%]     .mat-tab-header .mat-tab-label.mat-tab-label-active{border-radius:8px;background-color:#fff}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   mat-tab-group[_ngcontent-%COMP%]     .mat-tab-header .mat-tab-label.mat-tab-label-active .mat-tab-label-content{color:#181818}.page-content-wrapper[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   mat-tab-group[_ngcontent-%COMP%]     .mat-tab-body-wrapper{height:100%;background-color:#fff;border-radius:8px;padding:8px}"]});const _a=[[Oe,Ie,ve,Ce,fe,Me,K,R,H],j,U,he,_e,oe,ie,V,se,re,q,de,pe,ge,me,ue,ce,ae],la=[{path:"",component:he,canActivate:[$]},{path:"settings",component:Me},{path:"integration/:type/:id",component:U,canActivate:[$]},{path:"error",component:ae}];class X{}X.\u0275fac=function(t){return new(t||X)},X.\u0275mod=e.oAB({type:X}),X.\u0275inj=e.cJS({imports:[F.Bz.forChild(la),F.Bz]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.kYT(X,{imports:[F.Bz],exports:[F.Bz]})}();var da=l(25833);class be{}be.\u0275fac=function(t){return new(t||be)},be.\u0275mod=e.oAB({type:be}),be.\u0275inj=e.cJS({providers:[...It,...Mt,b.Pnv,{provide:b.thQ,useValue:"SocialLeadgenModule"},{provide:f.Qi,useValue:{floatLabel:"always"}},{provide:Be.$A,useClass:it.T,multi:!0},b.c64,b.i3c,Be.vR,N],imports:[g.ez,c.u5,c.UX,Se.jT,x.yu,I._M,W.uw,B.Zh,Fe.Wd,Ee.Nn,P.Ps,Pe.x4,I.sm,p.aw,b.kLW,X,I.Pb,$e.StructureExplorerModule,b.LL5,b.Y05,De.Yn,Te.UK,I.z8,Je.AA,I.Yo]}),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.kYT(be,{declarations:[Oe,Ie,ve,Ce,fe,Me,K,R,H,j,U,he,_e,oe,ie,V,se,re,q,de,pe,ge,me,ue,ce,ae],imports:[g.ez,c.u5,c.UX,Se.jT,x.yu,I._M,W.uw,B.Zh,Fe.Wd,Ee.Nn,P.Ps,Pe.x4,I.sm,p.aw,b.kLW,X,I.Pb,$e.StructureExplorerModule,b.LL5,b.Y05,De.Yn,Te.UK,I.z8,Je.AA,I.Yo]})}(),e.B6R(U,[g.mk,g.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.oH,c.sg,c.u,x.eB,qe.g,f.nI,f.v_,f.$V,f.nX,B.FC,Fe.iZ,P.Hw,Pe.k0,Ue.G,F.rH,Qe.A,da.B,oe,ie,q,de,pe,me],[p.X$])},96163:J=>{J.exports=`<svg id="_2111398" data-name="2111398" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">
  <path id="Path_7769" data-name="Path 7769" d="M13.125,0H1.875A1.876,1.876,0,0,0,0,1.875v11.25A1.877,1.877,0,0,0,1.875,15h11.25A1.877,1.877,0,0,0,15,13.125V1.875A1.877,1.877,0,0,0,13.125,0Z" fill="#3b5999"/>
  <path id="Path_7770" data-name="Path 7770" d="M13.668,9.168V7.3c0-.515.418-.467.934-.467h.934V4.5H13.668a2.8,2.8,0,0,0-2.8,2.8V9.168H9V11.5h1.867v5.135h2.8V11.5h1.4L16,9.168Z" transform="translate(-3.355 -1.637)" fill="#fff"/>
</svg>
`},11175:J=>{J.exports=`<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">
  <path id="_174857" data-name="174857" d="M13.643,0H1.357A1.357,1.357,0,0,0,0,1.357V13.643A1.357,1.357,0,0,0,1.357,15H13.643A1.357,1.357,0,0,0,15,13.643V1.357A1.357,1.357,0,0,0,13.643,0Zm-9,12.952a.4.4,0,0,1-.395.4H2.566a.4.4,0,0,1-.395-.4V5.906a.4.4,0,0,1,.4-.395H4.247a.4.4,0,0,1,.395.395Zm-1.237-8.1A1.6,1.6,0,1,1,5,3.25a1.6,1.6,0,0,1-1.594,1.6Zm10.019,8.137a.363.363,0,0,1-.363.363h-1.8a.363.363,0,0,1-.363-.363v-3.3c0-.493.145-2.161-1.288-2.161C8.5,7.518,8.27,8.66,8.225,9.172v3.812a.363.363,0,0,1-.363.363H6.118a.363.363,0,0,1-.363-.363V5.874a.363.363,0,0,1,.363-.363H7.862a.363.363,0,0,1,.363.363v.615a2.476,2.476,0,0,1,2.329-1.1c2.888,0,2.872,2.7,2.872,4.181v3.41Z" fill="#0077b7"/>
</svg>
`},56835:J=>{J.exports=`<svg id="list" xmlns="http://www.w3.org/2000/svg" width="16" height="14" viewBox="0 0 16 14">
  <g id="Rectangle_6298" data-name="Rectangle 6298" fill="none" stroke="#54657d" stroke-width="1">
    <rect width="16" height="4" stroke="none"/>
    <rect x="0.5" y="0.5" width="15" height="3" fill="none"/>
  </g>
  <g id="Rectangle_6299" data-name="Rectangle 6299" transform="translate(0 5)" fill="none" stroke="#54657d" stroke-width="1">
    <rect width="16" height="4" stroke="none"/>
    <rect x="0.5" y="0.5" width="15" height="3" fill="none"/>
  </g>
  <g id="Rectangle_6300" data-name="Rectangle 6300" transform="translate(0 10)" fill="none" stroke="#54657d" stroke-width="1">
    <rect width="16" height="4" stroke="none"/>
    <rect x="0.5" y="0.5" width="15" height="3" fill="none"/>
  </g>
</svg>`}}]);
